{
    "blocks": {

    "PtQPNI": {

        "label": "PtQPNI",

        "type": "structured",

        "data": {

            "content": [

                {

                    "id": "3e5ed8c4-f34b-4749-8a68-b1aeb21a2308",

                    "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                    "metadata": {

                        "id": "73",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            73,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 73

                    },

                    "score": 0.191654763367559

                },

                {

                    "id": "2f879bcb-731d-4a7c-a1c2-3f38ac14134d",

                    "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                    "metadata": {

                        "id": "78",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            78,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 78

                    },

                    "score": 0.196762609192349

                },

                {

                    "id": "de6f1ec2-401b-49b2-8b49-df5c97393516",

                    "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                    "metadata": {

                        "id": "4",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            4,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 4

                    },

                    "score": 0.210462333330851

                },

                {

                    "id": "3e4f056b-1af4-4648-bac8-b3fc0826c007",

                    "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                    "metadata": {

                        "id": "2",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            2,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 2

                    },

                    "score": 0.216207268268944

                },

                {

                    "id": "d855abf2-c23c-4c56-a461-5b9112cfe625",

                    "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                    "metadata": {

                        "id": "41",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            41,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 41

                    },

                    "score": 0.222945190159805

                },

                {

                    "id": "6d8e3895-2b92-429c-97ff-7f7c1ba52470",

                    "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                    "metadata": {

                        "id": "86",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            86,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 86

                    },

                    "score": 0.223351498848735

                },

                {

                    "id": "7d9d3b31-65e0-44bc-915c-681a85a4ac3e",

                    "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                    "metadata": {

                        "id": "18",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            18,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 18

                    },

                    "score": 0.223413484212586

                },

                {

                    "id": "2fc15eff-a0a6-4e70-9ae5-081a799ddede",

                    "content": "# FeatBit Server-Side SDK for .NET\n\n",

                    "metadata": {

                        "id": "0",

                        "info": [

                            {

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            0,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 0

                    },

                    "score": 0.224769165346233

                },

                {

                    "id": "b7e7898e-204f-4a02-bef9-92b0ff9aec6e",

                    "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                    "metadata": {

                        "id": "82",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            82,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 82

                    },

                    "score": 0.225510101111544

                },

                {

                    "id": "9880781b-9a56-4e23-a556-283c535712ae",

                    "content": "```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\n",

                    "metadata": {

                        "id": "79",

                        "info": [

                            {

                                "content": "# FeatBit Server-Side SDK for .NET\n\n",

                                "metadata": {

                                    "id": 0

                                }

                            },

                            {

                                "content": "## Introduction\n\n",

                                "metadata": {

                                    "id": 1

                                }

                            },

                            {

                                "content": "This is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\n",

                                "metadata": {

                                    "id": 2

                                }

                            },

                            {

                                "content": "The FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\n",

                                "metadata": {

                                    "id": 3

                                }

                            },

                            {

                                "content": "For using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n",

                                "metadata": {

                                    "id": 4

                                }

                            },

                            {

                                "content": "## Data Synchronization\n\n",

                                "metadata": {

                                    "id": 5

                                }

                            },

                            {

                                "content": "We use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\n",

                                "metadata": {

                                    "id": 6

                                }

                            },

                            {

                                "content": "If you want to use your own data source, see [Offline Mode](#offline-mode).\n\n",

                                "metadata": {

                                    "id": 7

                                }

                            },

                            {

                                "content": "## Get Started\n\n",

                                "metadata": {

                                    "id": 8

                                }

                            },

                            {

                                "content": "### Installation\n\n",

                                "metadata": {

                                    "id": 9

                                }

                            },

                            {

                                "content": "The latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n",

                                "metadata": {

                                    "id": 10

                                }

                            },

                            {

                                "content": "```sh\ndotnet add package FeatBit.ServerSdk\n```\n\n",

                                "metadata": {

                                    "id": 11

                                }

                            },

                            {

                                "content": "Use the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n",

                                "metadata": {

                                    "id": 12

                                }

                            },

                            {

                                "content": "### Prerequisite\n\n",

                                "metadata": {

                                    "id": 13

                                }

                            },

                            {

                                "content": "Before using the SDK, you need to obtain the environment secret and SDK URLs.\n\n",

                                "metadata": {

                                    "id": 14

                                }

                            },

                            {

                                "content": "Follow the documentation below to retrieve these values\n\n",

                                "metadata": {

                                    "id": 15

                                }

                            },

                            {

                                "content": "- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n",

                                "metadata": {

                                    "id": 16

                                }

                            },

                            {

                                "content": "### Quick Start\n\n",

                                "metadata": {

                                    "id": 17

                                }

                            },

                            {

                                "content": "The following code demonstrates basic usage of FeatBit.ServerSdk.\n\n",

                                "metadata": {

                                    "id": 18

                                }

                            },

                            {

                                "content": "```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 19

                                }

                            },

                            {

                                "content": "// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"https://app-eval.featbit.co\"))\n    .Streaming(new Uri(\"wss://app-eval.featbit.co\"))\n    .Build();\n\n",

                                "metadata": {

                                    "id": 20

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n",

                                "metadata": {

                                    "id": 21

                                }

                            },

                            {

                                "content": "// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 22

                                }

                            },

                            {

                                "content": "// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 23

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 24

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n",

                                "metadata": {

                                    "id": 25

                                }

                            },

                            {

                                "content": "// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n",

                                "metadata": {

                                    "id": 26

                                }

                            },

                            {

                                "content": "### Examples\n\n",

                                "metadata": {

                                    "id": 27

                                }

                            },

                            {

                                "content": "- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n",

                                "metadata": {

                                    "id": 28

                                }

                            },

                            {

                                "content": "## SDK\n\n",

                                "metadata": {

                                    "id": 29

                                }

                            },

                            {

                                "content": "### FbClient\n\n",

                                "metadata": {

                                    "id": 30

                                }

                            },

                            {

                                "content": "The FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n",

                                "metadata": {

                                    "id": 31

                                }

                            },

                            {

                                "content": "#### FbClient Using Default Options\n\n",

                                "metadata": {

                                    "id": 32

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\n\n",

                                "metadata": {

                                    "id": 33

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n",

                                "metadata": {

                                    "id": 34

                                }

                            },

                            {

                                "content": "#### FbClient Using Custom Options\n\n",

                                "metadata": {

                                    "id": 35

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\n",

                                "metadata": {

                                    "id": 36

                                }

                            },

                            {

                                "content": "var consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\n",

                                "metadata": {

                                    "id": 37

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 38

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 39

                                }

                            },

                            {

                                "content": "#### Dependency Injection\n\n",

                                "metadata": {

                                    "id": 40

                                }

                            },

                            {

                                "content": "We can register the FeatBit services using standard conventions. And by default, the SDK will use the default\n`ILoggerFactory` provided by the host unless you specify a custom one.\n\n",

                                "metadata": {

                                    "id": 41

                                }

                            },

                            {

                                "content": "> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n",

                                "metadata": {

                                    "id": 42

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\n",

                                "metadata": {

                                    "id": 43

                                }

                            },

                            {

                                "content": "var builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n",

                                "metadata": {

                                    "id": 44

                                }

                            },

                            {

                                "content": "// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"wss://app-eval.featbit.co\");\n    options.EventUri = new Uri(\"https://app-eval.featbit.co\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\n",

                                "metadata": {

                                    "id": 45

                                }

                            },

                            {

                                "content": "var app = builder.Build();\napp.Run();\n```\n\n",

                                "metadata": {

                                    "id": 46

                                }

                            },

                            {

                                "content": "Then the `IFbClient` interface can be obtained through dependency injection.\n\n",

                                "metadata": {

                                    "id": 47

                                }

                            },

                            {

                                "content": "```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n",

                                "metadata": {

                                    "id": 48

                                }

                            },

                            {

                                "content": "    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n",

                                "metadata": {

                                    "id": 49

                                }

                            },

                            {

                                "content": "#### Logging\n\n",

                                "metadata": {

                                    "id": 50

                                }

                            },

                            {

                                "content": "The SDK supports standard .NET logging via [Microsoft.Extensions.Logging](https://learn.microsoft.com/dotnet/core/extensions/logging).\n\n",

                                "metadata": {

                                    "id": 51

                                }

                            },

                            {

                                "content": "```csharp\n// Create a Microsoft.Extensions.Logging LoggerFactory, configuring it with the providers,\n// log levels and other desired configuration as usual.\n// Take the console logger factory as an example.\nvar loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());\n\n",

                                "metadata": {

                                    "id": 52

                                }

                            },

                            {

                                "content": "// Pass the LoggerFactory to the SDK so the SDK will use it to log messages.\nvar options = new FbOptionsBuilder(secret)\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 53

                                }

                            },

                            {

                                "content": "If you're using ASP.NET Core, you can use the `AddFeatBit` extension method, which automatically uses the logger\nfactory provided by ASP.NET Core.\n\n",

                                "metadata": {

                                    "id": 54

                                }

                            },

                            {

                                "content": "### FbUser\n\n",

                                "metadata": {

                                    "id": 55

                                }

                            },

                            {

                                "content": "FbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\n",

                                "metadata": {

                                    "id": 56

                                }

                            },

                            {

                                "content": "Besides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\n",

                                "metadata": {

                                    "id": 57

                                }

                            },

                            {

                                "content": "There is only one method for building FbUser.\n\n",

                                "metadata": {

                                    "id": 58

                                }

                            },

                            {

                                "content": "```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 59

                                }

                            },

                            {

                                "content": "### Evaluating flags\n\n",

                                "metadata": {

                                    "id": 60

                                }

                            },

                            {

                                "content": "By using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\n",

                                "metadata": {

                                    "id": 61

                                }

                            },

                            {

                                "content": "There is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n",

                                "metadata": {

                                    "id": 62

                                }

                            },

                            {

                                "content": "- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n",

                                "metadata": {

                                    "id": 63

                                }

                            },

                            {

                                "content": "> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\n",

                                "metadata": {

                                    "id": 64

                                }

                            },

                            {

                                "content": "Variation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n",

                                "metadata": {

                                    "id": 65

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n",

                                "metadata": {

                                    "id": 66

                                }

                            },

                            {

                                "content": "// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n",

                                "metadata": {

                                    "id": 67

                                }

                            },

                            {

                                "content": "// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n",

                                "metadata": {

                                    "id": 68

                                }

                            },

                            {

                                "content": "// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n",

                                "metadata": {

                                    "id": 69

                                }

                            },

                            {

                                "content": "// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n",

                                "metadata": {

                                    "id": 70

                                }

                            },

                            {

                                "content": "// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n",

                                "metadata": {

                                    "id": 71

                                }

                            },

                            {

                                "content": "### Offline Mode\n\n",

                                "metadata": {

                                    "id": 72

                                }

                            },

                            {

                                "content": "In some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n",

                                "metadata": {

                                    "id": 73

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 74

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 75

                                }

                            },

                            {

                                "content": "When you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n",

                                "metadata": {

                                    "id": 76

                                }

                            },

                            {

                                "content": "> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\n",

                                "metadata": {

                                    "id": 77

                                }

                            },

                            {

                                "content": "The format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n",

                                "metadata": {

                                    "id": 78

                                }

                            },

                            {

                                "metadata": {

                                    "id": 79

                                }

                            },

                            {

                                "content": "Then use that file to initialize FbClient:\n\n",

                                "metadata": {

                                    "id": 80

                                }

                            },

                            {

                                "content": "```csharp\nusing FeatBit.Sdk.Server.Options;\n\n",

                                "metadata": {

                                    "id": 81

                                }

                            },

                            {

                                "content": "var json = File.ReadAllText(\"featbit-bootstrap.json\");\n\n",

                                "metadata": {

                                    "id": 82

                                }

                            },

                            {

                                "content": "var options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\n",

                                "metadata": {

                                    "id": 83

                                }

                            },

                            {

                                "content": "var client = new FbClient(options);\n```\n\n",

                                "metadata": {

                                    "id": 84

                                }

                            },

                            {

                                "content": "### Disable Events Collection\n\n",

                                "metadata": {

                                    "id": 85

                                }

                            },

                            {

                                "content": "By default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\n",

                                "metadata": {

                                    "id": 86

                                }

                            },

                            {

                                "content": "If you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n",

                                "metadata": {

                                    "id": 87

                                }

                            },

                            {

                                "content": "```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n",

                                "metadata": {

                                    "id": 88

                                }

                            },

                            {

                                "content": "### Experiments (A/B/n Testing)\n\n",

                                "metadata": {

                                    "id": 89

                                }

                            },

                            {

                                "content": "We support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\n",

                                "metadata": {

                                    "id": 90

                                }

                            },

                            {

                                "content": "In case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n",

                                "metadata": {

                                    "id": 91

                                }

                            },

                            {

                                "content": "```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n",

                                "metadata": {

                                    "id": 92

                                }

                            },

                            {

                                "content": "**numericValue** is not mandatory, the default value is **1.0**.\n\n",

                                "metadata": {

                                    "id": 93

                                }

                            },

                            {

                                "content": "Make sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n",

                                "metadata": {

                                    "id": 94

                                }

                            },

                            {

                                "content": "## Supported .NET versions\n\n",

                                "metadata": {

                                    "id": 95

                                }

                            },

                            {

                                "content": "This version of the SDK is built for the following targets:\n\n",

                                "metadata": {

                                    "id": 96

                                }

                            },

                            {

                                "content": "- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\n",

                                "metadata": {

                                    "id": 97

                                }

                            },

                            {

                                "content": "The .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n",

                                "metadata": {

                                    "id": 98

                                }

                            },

                            {

                                "content": "> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n",

                                "metadata": {

                                    "id": 99

                                }

                            },

                            {

                                "content": "## Getting support\n\n",

                                "metadata": {

                                    "id": 100

                                }

                            },

                            {

                                "content": "- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n",

                                "metadata": {

                                    "id": 101

                                }

                            },

                            {

                                "content": "## See Also\n\n",

                                "metadata": {

                                    "id": 102

                                }

                            },

                            {

                                "content": "- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\n",

                                "metadata": {

                                    "id": 103

                                }

                            }

                        ],

                        "path": [

                            79,

                            "content"

                        ],

                        "key_1": "content",

                        "list_0": 79

                    },

                    "score": 0.228956038702973

                }

            ]

        },

        "looped": true

    },

    "ld8hab": {

        "label": "ld8hab",

        "type": "structured",

        "data": {

            "content": ""

        }

    }

},

"edges": {

    "modify-1743628187699": {

        "type": "modify",

        "data": {

            "content": "{{PtQPNI}}",

            "modify_type": "edit_structured",

            "extra_configs": {

                "operations": [

                    {

                        "type": "get",

                        "params": {

                            "path": [

                                "content"

                            ],

                            "default": "Get Failed, value not exist"

                        }

                    }

                ]

            },

            "inputs": {

                "PtQPNI": "PtQPNI"

            },

            "outputs": {

                "ld8hab": "ld8hab"

            }

        }

    }

}
}