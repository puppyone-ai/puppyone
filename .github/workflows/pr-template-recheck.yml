name: PR Template Recheck

on:
  issue_comment:
    types: [created]

permissions:
  contents: read
  pull-requests: write
  actions: write

jobs:
  recheck:
    if: github.event.issue.pull_request && contains(github.event.comment.body, '/recheck')
    runs-on: ubuntu-latest
    steps:
      - name: Dispatch PR Template Enforcer for this PR
        uses: actions/github-script@v7
        with:
          script: |
            const prNum = context.payload.issue.number;
            await github.actions.createWorkflowDispatch({
              owner: context.repo.owner,
              repo: context.repo.repo,
              workflow_id: 'pr-template-enforcer.yml',
              ref: 'qubits',
              inputs: { pr_number: String(prNum) }
            });
