# .github/workflows/build-check.yml

# Name of the workflow
name: 'Build and Test Check (pull_request)'

# Events that trigger the workflow
on:
  pull_request:
    branches:
      - 'qubits'

# Define the jobs
jobs:
  # Job ID, can be customized
  build:
    # Job name, displayed on GitHub PR page
    name: 'NPM Build Check (pull_request)'
    # Virtual machine environment to run the job
    runs-on: ubuntu-latest

    # Set default working directory for all run commands in this job
    defaults:
      run:
        working-directory: ./PuppyFlow

    # Steps included in the job
    steps:
      # Step 1: Checkout the repository
      # Use the official checkout action to pull the repository code into the VM
      - name: Checkout Repository
        uses: actions/checkout@v4

      # Step 2: Setup Node.js environment
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22' # Adjust Node.js version according to your project
          # Cache npm dependencies in the PuppyFlow directory
          cache: 'npm'
          cache-dependency-path: PuppyFlow/package-lock.json

      # Step 3: Install dependencies (executed automatically in PuppyFlow directory)
      - name: Install Dependencies
        run: npm ci

      # Step 4: Run build script (executed automatically in PuppyFlow directory)
      - name: Run Build Script
        run: npm run build
