{
  "blocks": [
    {
      "id": "llm-1741588460405",
      "type": "llm",
      "position": {
        "x": 1104,
        "y": 1120
      },
      "data": {
        "subMenuType": null,
        "content": "[{\"role\":\"system\",\"content\":\"You are an AI\"},{\"role\":\"user\",\"content\":\"answer the question by {{y60AiK}}\"}]",
        "looped": false,
        "model": "gpt-4o",
        "base_url": "",
        "structured_output": false
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "HEQ1Z_",
      "position": {
        "x": 1360,
        "y": 1056
      },
      "data": {
        "content": "",
        "label": "HEQ1Z_",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 240,
        "height": 176
      }
    },
    {
      "id": "search-1741588175536",
      "type": "search",
      "position": {
        "x": 672,
        "y": 784
      },
      "data": {
        "subMenuType": "search-Vector",
        "content": "",
        "query_id": {
          "id": "HGub16",
          "label": "问题"
        },
        "vector_db": {
          "id": "",
          "label": ""
        },
        "top_k": 5,
        "extra_configs": {
          "threshold": 0.7
        }
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "llm-1741588243599",
      "type": "llm",
      "position": {
        "x": 672,
        "y": -80
      },
      "data": {
        "subMenuType": null,
        "content": "[{\"role\":\"system\",\"content\":\"You are an AI\"},{\"role\":\"user\",\"content\":\"summary a set of keywords of {{jV4Xpe}}\"}]",
        "looped": false,
        "model": "gpt-4o",
        "base_url": "",
        "structured_output": false,
        "resultNode": "vnOCEo"
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "modify-1741953801598",
      "type": "modify",
      "position": {
        "x": 160,
        "y": -1040
      },
      "data": {
        "subMenuType": "modify-convert2structured",
        "content": "",
        "extra_configs": {
          "list_separator": "[\",\",\";\",\".\",\"\\n\"]",
          "dict_key": "",
          "length_separator": 10
        },
        "resultNode": "pdEGCS"
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "modify-1741588325661",
      "type": "modify",
      "position": {
        "x": 672,
        "y": 240
      },
      "data": {
        "subMenuType": "modify-get",
        "content": "",
        "type": "get_values",
        "content_type": "list",
        "extra_configs": {},
        "looped": false,
        "params": {
          "value": ""
        },
        "getConfigData": [
          {
            "key": "key",
            "value": ""
          }
        ]
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "TSPk1p",
      "position": {
        "x": 1152,
        "y": -240
      },
      "data": {
        "content": "",
        "label": "TSPk1p",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "structured",
      "looped": true,
      "measured": {
        "width": 432,
        "height": 368
      },
      "selected": false,
      "dragging": false,
      "width": 432,
      "height": 368,
      "resizing": false
    },
    {
      "id": "HGub16",
      "position": {
        "x": 544,
        "y": 1056
      },
      "data": {
        "content": "",
        "label": "问题",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 336,
        "height": 176
      },
      "selected": false,
      "dragging": false,
      "width": 336,
      "height": 176,
      "resizing": false
    },
    {
      "id": "y60AiK",
      "position": {
        "x": 1024,
        "y": 720
      },
      "data": {
        "content": "[]",
        "label": "y60AiK",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "structured",
      "looped": false,
      "measured": {
        "width": 240,
        "height": 176
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "modify-1741953758449",
      "type": "modify",
      "position": {
        "x": 160,
        "y": -1472
      },
      "data": {
        "subMenuType": "modify-text",
        "content": "[\"{{EZy7x-}}\",\"{{LIv4dK}}\",\"{{Nyce_M}}\"]",
        "looped": false,
        "configNum": 100,
        "retMode": "return all",
        "resultNode": "imlZMZ"
      },
      "measured": {
        "width": 80,
        "height": 48
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "Nyce_M",
      "position": {
        "x": 752,
        "y": -1920
      },
      "data": {
        "content": "# FeatBit Server-Side SDK for Python\n\n## Introduction\n\nThis is the Python Server-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\n\nThe FeatBit Server-Side SDK for Python is designed primarily for use in multi-user systems such as web servers and applications.\n\n## Data synchonization\n\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\n\n## Get Started\n\n### Installation\ninstall the sdk in using pip, this version of the SDK is compatible with Python 3.6 through 3.11.\n\n```shell\npip install fb-python-sdk\n```\n\n### Prerequisite\n\nBefore using the SDK, you need to obtain the environment secret and SDK URLs. \n\nFollow the documentation below to retrieve these values\n\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n  \n### Quick Start\n\n> Note that the _**env_secret**_, _**streaming_url**_ and _**event_url**_ are required to initialize the SDK.\n\nThe following code demonstrates basic usage of the SDK.\n\n```python\nfrom fbclient import get, set_config\nfrom fbclient.config import Config\n\nenv_secret = '<replace-with-your-env-secret>'\nevent_url = 'http://localhost:5100'\nstreaming_url = 'ws://localhost:5100'\n\nset_config(Config(env_secret, event_url, streaming_url))\nclient = get()\n\nif client.initialize:\n    flag_key = '<replace-with-your-flag-key>'\n    user_key = 'bot-id'\n    user_name = 'bot'\n    user = {'key': user_key, 'name': user_name}\n    detail = client.variation_detail(flag_key, user, default=None)\n    print(f'flag {flag_key} returns {detail.variation} for user {user_key}, reason: {detail.reason}')\n\n# ensure that the SDK shuts down cleanly and has a chance to deliver events to FeatBit before the program exits\nclient.stop()\n```\n\n### Examples\n\n- [Python Demo](https://github.com/featbit/featbit-samples/blob/main/samples/dino-game/demo-python/demo_python.py)\n\n### FBClient\n\nApplications **SHOULD instantiate a single FBClient instance** for the lifetime of the application. In the case where an application\nneeds to evaluate feature flags from different environments, you may create multiple clients, but they should still be\nretained for the lifetime of the application rather than created per request or per thread.\n\n#### Bootstrapping\n\nThe bootstrapping is in fact the call of constructor of `FBClient`, in which the SDK will be initialized and connect to FeatBit.\n\nThe constructor will return when it successfully connects, or when the timeout(default: 15 seconds) expires, whichever comes first. If it has not succeeded in connecting when the timeout elapses, you will receive the client in an uninitialized state where feature flags will return default values; it will still continue trying to connect in the background unless there has been a network error or you close the client(using `stop()`). You can detect whether initialization has succeeded by calling `initialize()`.\n\nThe best way to use the SDK as a singleton, first make sure you have called `fbclient.set_config()` at startup time. Then `fbclient.get()` will return the same shared `fbclient.client.FBClient` instance each time. The client will be initialized if it runs first time.\n```python\nfrom fbclient.config import Config\nfrom fbclient import get, set_config \n\nset_config(Config(env_secret, event_url, streaming_url))\nclient = get()\n\nif client.initialize:\n    # the client is ready\n```\nYou can also manage your `fbclient.client.FBClient`, the SDK will be initialized if you call `fbclient.client.FBClient` constructor. With constructor, you can set the timeout for initialization, the default value is 15 seconds.\n```python\nfrom fbclient.config import Config\nfrom fbclient.client import FBClient\n\nclient = FBClient(Config(env_secret, event_url, streaming_url), start_wait=15)\n\nif client.initialize:\n    # the client is ready\n```\nIf you prefer to have the constructor return immediately, and then wait for initialization to finish at some other point, you can use `fbclient.client.fbclient.update_status_provider` object, which provides an asynchronous way, as follows:\n\n``` python\nfrom fbclient.config import Config\nfrom fbclient.client import FBClient\n\nclient = FBClient(Config(env_secret), start_wait=0)\nif client.update_status_provider.wait_for_OKState():\n    # the client is ready\n```\n\nIt's possible to set a timeout in seconds for the `wait_for_OKState` method. If the timeout is reached, the method will return `False` and the client will still be in an uninitialized state. If you do not specify a timeout, the method will wait indefinitely.\n\n\n> To check if the client is ready is optional. Even if the client is not ready, you can still evaluate feature flags, but the default value will be returned if SDK is not yet initialized.\n\n### FBUser\n\nA dictionary of attributes that can affect flag evaluation, usually corresponding to a user of your application.\nThis object contains built-in properties(`key`, `name`). The `key` and `name` are required. The `key` must uniquely identify each user; this could be a username or email address for authenticated users, or a ID for anonymous users. The `name` is used to search your user quickly. You may also define custom properties with arbitrary names and values.\nFor instance, the custom key should be a string; the custom value should be a string, number or boolean value\n\n```python\nuser = {'key': user_key, 'name': user_name, 'age': age}\n```\n\n### Evaluation\n\nSDK calculates the value of a feature flag for a given user, and returns a flag vlaue/an object that describes the way that the value was determined.\n\n```python\nif client.initialize:\n    user = {'key': user_key, 'name': user_name, 'age': age}\n    # evaluate the flag value\n    flag_value = client.variation(flag_key, user, default_value)\n    # evaluate the flag value and get the detail\n    detail = client.variation_detail(flag_key, user, default=None)\n```\n\nIf you would like to get variations of all feature flags in a special environment, you can use `fbclient.client.FBClient.get_all_latest_flag_variations`, SDK will return `fbclient.common_types.AllFlagStates`, that explain the details of all feature flags. `fbclient.common_types.AllFlagStates.get()` returns the detail of a given feature flag key.\n\n```python\nif client.initialize:\n    user = {'key': user_key, 'name': user_name}\n    all_flag_values = client.get_all_latest_flag_variations(user)\n    # get all feature flag keys\n    keys = all_flag_values.keys()\n    for flag_key in keys:\n        # get viariation detail\n        detail = all_flag_values.get(flag_key, default=None)\n        # get viariation\n        value = all_flag_values.get_variation(flag_key, default=None)\n```\n\n> **Note**\n> If evaluation happened before the client is initialized, or you provide the wrong flag key/user for evaluation, the `variation` calls will return the default value. The `fbclient.common_types.EvalDetail` will explain the details of the latest evaluation including error reason.\n\n### Flag Tracking\n\n`fbclient.client.FBClient.flag_tracker` registers a listener to be notified of feature flag changes in general.\n\nNote that a flag value change listener is bound to a specific user and flag key.\n\nThe flag value change listener will be notified whenever the SDK receives any change to any feature flag's configuration,\nor to a user segment that is referenced by a feature flag. To register a flag value change listener, use `add_flag_value_may_changed_listener` or `add_flag_value_changed_listener`\n\nWhen you track a flag change using `add_flag_value_maybe_changed_listener`, this does not necessarily mean the flag's value has changed for any particular flag, only that some part of the flag configuration was changed so that it *_MAY_* return a different value than it previously returned for some user.\n\nIf you want to track a flag whose value *_MUST_* be changed, `add_flag_value_changed_listener` will register a listener that will be notified if and only if the flag value changes.\n\nChange notices only work if the SDK is actually connecting to FeatBit feature flag center.\nIf the SDK is in offline mode, then it cannot know when there is a change, because flags are read on an as-needed basis.\n\n```python\nif client.initialize:\n    #  flag value may be changed\n    client.flag_tracker.add_flag_value_maybe_changed_listener(flag_key, user, flag_value_maybe_changed_callback_fn)\n    #  flag value must be changed\n    client.flag_tracker.add_flag_value_changed_listener(flag_key, user, flag_value_changed_callback_fn)\n\n```\n`flag_key`: the key of the feature flag to track\n\n`user`: the user to evaluate the flag value\n\n`callback_fn`: the function to be called for the flag value change\n* the first argument is the flag key\n* the second argument is the latest flag value\n\n\n\n### Offline Mode\n\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n```python\nconfig = Config(env_secret, event_url, streaming_url, offline=True)\n```\nWhen you put the SDK in offline mode, no insight message is sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source,\nSDK allows users to populate feature flags and segments data from a JSON string. Here is an example: [fbclient_test_data.json](tests/fbclient_test_data.json).\n\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to construct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format and use this output as the starting point for your file. Here's how:\n\n```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\nThen you can use this file to initialize the SDK in offline mode:\n\n```python\n// first load data from file and then\nclient.initialize_from_external_json(json)\n```\n\n### Experiments (A/B/n Testing)\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform, then you should be able to see the result in near real time after the experiment is started.\n\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n```python\nclient.track_metric(user, event_name, numeric_value);\n```\n**numeric_value** is not mandatory, the default value is **1**.\n\nMake sure `track_metric` is called after the related feature flag is evaluated by simply calling `variation` or `variation_detail`\notherwise, the custom event may not be included into the experiment result.\n\n## Getting support\n\n- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/featbit-python-sdk/issues/new).\n\n## See Also\n- [Connect To Python Sdk](https://docs.featbit.co/sdk/overview#python)",
        "label": "Nyce_M",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 560,
        "height": 384
      },
      "selected": false,
      "width": 560,
      "height": 384,
      "resizing": false,
      "dragging": false
    },
    {
      "id": "O7JwCn",
      "position": {
        "x": 528,
        "y": 464
      },
      "data": {
        "content": "",
        "label": "O7JwCn",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "structured",
      "looped": false,
      "measured": {
        "width": 368,
        "height": 192
      },
      "selected": false,
      "dragging": false,
      "width": 368,
      "height": 192,
      "resizing": false
    },
    {
      "id": "pdEGCS",
      "position": {
        "x": -80,
        "y": -896
      },
      "data": {
        "content": "{\"text_1\":\"[\\\\\\\"> **Attention**\\\\n>\\\\n> If you are using the v1 or v2 of the SDK, please refer to this [doc](https://github.com/featbit/featbit-js-client-sdk/tree/v2)\\\\n\\\\n# FeatBit Client SDK for JavaScript\\\\n\\\\n## Introduction\\\\n\\\\nThis is the Client-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\\\\n\\\\nBe aware, this is a client side SDK, it is intended for use in a single-user context, which can be mobile, desktop or embedded applications. This SDK can only be ran in a browser environment, it is not suitable for NodeJs applications.\\\\n\\\\n## Get Started\\\\n\\\\n### Installation\\\\n\\\\n\\\\`\\\\`\\\\`bash\\\\nnpm install --save @featbit/js-client-sdk\\\\n\\\\`\\\\`\\\\`\\\\n### Prerequisite\\\\n\\\\nBefore using the SDK, you need to obtain the environment secret (the sdkKey) and SDK URLs.\\\\n\\\\nFollow the documentation below to retrieve these values\\\\n- [How to get environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\\\n- [How to get SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\\\n\\\\n### Quick Start\\\\n\\\\nThe following code demonstrates the basic usage of \\\\`@featbit/js-client-sdk\\\\`.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nimport { FbClientBuilder, UserBuilder } from \\\\\\\"@featbit/js-client-sdk\\\\\\\";\\\\n\\\\nconst bob = new UserBuilder(\\\\'a-unique-key-of-user\\\\')\\\\n    .name(\\\\'bob\\\\')\\\\n    .custom(\\\\'age\\\\', \\\\'18\\\\')\\\\n    .custom(\\\\'country\\\\', \\\\'FR\\\\')\\\\n    .build();\\\\n\\\\n// setup SDK client with websocket streaming\\\\nconst fbClient = new FbClientBuilder()\\\\n    .sdkKey(\\\\\\\"your_sdk_key\\\\\\\")\\\\n    .streamingUri(\\\\'ws://localhost:5100\\\\')\\\\n    .eventsUri(\\\\\\\"http://localhost:5100\\\\\\\")\\\\n    .user(bob)\\\\n    .build();\\\\n\\\\n(async () => {\\\\n  // wait for the SDK to be initialized\\\\n  try {\\\\n    await fbClient.waitForInitialization();\\\\n  } catch(err) {\\\\n    // failed to initialize the SDK\\\\n    console.log(err);\\\\n  }\\\\n\\\\n  // flag to be evaluated\\\\n  const flagKey = \\\\\\\"game-runner\\\\\\\";\\\\n\\\\n  // evaluate a feature flag for a given user\\\\n  const boolVariation = await fbClient.boolVariation(flagKey, false);\\\\n\\\\n  // switch user\\\\n  const alice = new UserBuilder(\\\\'another-unique-key-of-user\\\\')\\\\n      .name(\\\\'alice\\\\')\\\\n      .custom(\\\\'country\\\\', \\\\'UK\\\\')\\\\n      .custom(\\\\'age\\\\', 36)\\\\n      .build();\\\\n  \\\\n  await fbClient.identify(alice);\\\\n})();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n## Examples\\\\n- [web App](./examples/console-app)\\\\n- For how to use FeatBit with React, please refer to the [react-client-sdk](https://github.com/featbit/featbit-react-client-sdk)\\\\n\\\\n## SDK\\\\n\\\\n### FbClient\\\\n\\\\nThe \\\\`FbClient\\\\` is the heart of the SDK which provides access to FeatBit server. Applications should instantiate a single instance for the lifetime of the application.\\\\n\\\\n\\\\`FbClientBuilder\\\\` is used to construct a \\\\`FbClient\\\\` instance. The builder exposes methods to configure the SDK, and finally to create the \\\\`FbClient\\\\` instance.\\\\n\\\\n#### FbClient Using Streaming\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nimport { FbClientBuilder, UserBuilder } from \\\\\\\"@featbit/js-client-sdk\\\\\\\";\\\\n\\\\nconst user = new UserBuilder(\\\\'a-unique-key-of-user\\\\')\\\\n    .name(\\\\'bob\\\\')\\\\n    .build();\\\\n    \\\\nconst fbClient = new FbClientBuilder()\\\\n    .sdkKey(\\\\\\\"your_sdk_key\\\\\\\")\\\\n    .streamingUri(\\\\'ws://localhost:5100\\\\')\\\\n    .eventsUri(\\\\\\\"http://localhost:5100\\\\\\\")\\\\n    .user(user)\\\\n    .build();\\\\n\\\\`\\\\`\\\\`\\\\n#### FbClient Using Polling\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nimport { FbClientBuilder, UserBuilder, DataSyncModeEnum } from \\\\\\\"@featbit/js-client-sdk\\\\\\\";\\\\n\\\\nconst user = new UserBuilder(\\\\'a-unique-key-of-user\\\\')\\\\n    .name(\\\\'bob\\\\')\\\\n    .build();\\\\n\\\\nconst fbClient = new FbClientBuilder()\\\\n    .sdkKey(\\\\\\\"your_sdk_key\\\\\\\")\\\\n    .dataSyncMode(DataSyncModeEnum.POLLING)\\\\n    .pollingUri(\\\\'http://localhost:5100\\\\')\\\\n    .eventsUri(\\\\\\\"http://localhost:5100\\\\\\\")\\\\n    .pollingInterval(10000)\\\\n    .build();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n#### IUser\\\\n\\\\n\\\\`IUser\\\\` defines the attributes of a user for whom you are evaluating feature flags. IUser has two built-in attributes: key and name. The only mandatory attribute of a IUser is the key, which must uniquely identify each user.\\\\n\\\\nBesides these built-in properties, you can define any additional attributes associated with the user using \\\\`custom(string key, string value)\\\\` method on UserBuilder. Both built-in attributes and custom attributes can be referenced in targeting rules, and are included in analytics data.\\\\n\\\\n\\\\`UserBuilder\\\\` is used to construct a \\\\`IUser\\\\` instance. The builder exposes methods to configure the IUser, and finally to create the IUser instance.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nimport { UserBuilder } from \\\\\\\"@featbit/js-client-sdk\\\\\\\";\\\\n\\\\nconst bob = new UserBuilder(\\\\\\\"unique_key_for_bob\\\\\\\")\\\\n    .name(\\\\\\\"Bob\\\\\\\")\\\\n    .custom(\\\\'age\\\\', 18)\\\\n    .custom(\\\\'country\\\\', \\\\'FR\\\\')\\\\n    .build();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Bootstrap\\\\nIf you already have the feature flags available, you can pass them to the SDK instead of requesting from the remote.\\\\n\\\\n\\\\n> **_NOTE:_** The bootstrapped flags will be overridden by the remote flags if they are available.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\n// define the option with the bootstrap parameter\\\\nconst options = {\\\\n  ...\\\\n  bootstrap = [{\\\\n    // feature flag key name\\\\n    id: string,\\\\n    // variation value\\\\n    variation: string,\\\\n    // variation data type, string will be used if not specified\\\\n    variationType: VariationDataType\\\\n  }]\\\\n}\\\\n\\\\nconst fbClient = new FbClientBuilder(options).build();\\\\n// or\\\\nconst fbClient = new FbClientBuilder()\\\\n    //... other options\\\\n    .bootstrap(options.bootstrap)\\\\n    .build();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Evaluation\\\\n\\\\nAfter initialization, the SDK has all the feature flags locally, and it does not need to request the remote server for any feature flag evaluation. All evaluation is done locally and synchronously, the average evaluation time is less than 1 ms.\\\\n\\\\nThere is a \\\\`variation\\\\` method that returns a flag value, and a \\\\`variationDetail\\\\` method that returns an object\\\\ndescribing how the value was determined for each type.\\\\n\\\\n- boolVariation/boolVariationDetail\\\\n- stringVariation/stringVariationDetail\\\\n- numberVariation/numberVariationDetail\\\\n- jsonVariation/jsonVariationDetail\\\\n\\\\nVariation calls take the feature flag key and a default value. If any error makes it impossible to\\\\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\n// flag to be evaluated\\\\nconst flagKey = \\\\\\\"game-runner\\\\\\\";\\\\n\\\\n// evaluate a feature flag for a given user\\\\nconst boolVariation = await fbClient.boolVariation(flagKey, false);\\\\n\\\\n// evaluate a boolean flag for a given user with evaluation detail\\\\nconst boolVariationDetail = await fbClient.boolVariationDetail(flagKey, false);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Offline Mode\\\\n\\\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\\\n\\\\`\\\\`\\\\`javascript\\\\nimport { FbClientBuilder } from \\\\\\\"@featbit/browser-server-sdk\\\\\\\";\\\\n\\\\nconst fbClient = new FbClientBuilder()\\\\n    //... other options\\\\n    .offline(true)\\\\n    .build();\\\\n\\\\n\\\\`\\\\`\\\\`\\\\nWhen Offline mode is enabled, you should provide the flags with the [bootstrap](#bootstrap) option,\\\\notherwise, the SDK would return the defaul value you passed to the \\\\`variation\\\\` method.\\\\n\\\\n### Events\\\\n\\\\n#### Wait for ready\\\\n\\\\nTo find out when the client is ready, you can use one of two mechanisms: events or promises.\\\\n\\\\nThe client object can emit JavaScript events. It emits a ready event when it receives initial flag values from the server. You can listen for this event to determine when the client is ready to evaluate flags.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nfbClient.on(\\\\'ready\\\\', () => {\\\\n  var flagValue = fbClient.variation(\\\\\\\"YOUR_FEATURE_KEY\\\\\\\", defaultValue);\\\\n});\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nOr, you can use a promise instead of an event. The SDK has a method that returns a promise for initialization: **waitForInitialization()**. The behavior of waitUntilReady() is equivalent to the ready event. The promise resolves when the client receives its initial flag data. As with all promises, you can either use .then() to provide a callback, or use await if you are writing asynchronous code.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nfbClient.waitForInitialization().then((data) => {\\\\n  // data has the following structure [ {id: \\\\'featureFlagKey\\\\', variation: variationValue } ]\\\\n  // variationValue has the type as defined on remote\\\\n  // initialization succeeded, flag values are now available\\\\n});\\\\n// or, with await:\\\\nconst featureFlags = await fbClient.waitForInitialization();\\\\n// initialization succeeded, flag values are now available\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nThe SDK only decides initialization has failed if it receives an error response indicating that the environment ID is invalid. If it has trouble connecting to FeatBit, it will keep retrying until it succeeds.\\\\n\\\\n#### Subscribe to flag(s) changes\\\\n\\\\nTo get notified when a feature flag is changed, we offer two methods\\\\n- subscribe to the changes of any feature flag(s)\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nfbClient.on(\\\\'update\\\\', (keys: string[]) => {\\\\n  // do something when any feature flag changes\\\\n});\\\\n\\\\n\\\\`\\\\`\\\\`\\\\n- subscribe to the changes of a specific feature flag\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\n// replace feature_flag_key with your feature flag key\\\\nfbClient.on(\\\\'update:feature_flag_key\\\\', (key) => {\\\\n  const myFeature = fbClient.variation(\\\\'feature_flag_key\\\\', defaultValue);\\\\n});\\\\n\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Switch user after initialization\\\\nIf the user changed after some process, login for example, the following method can be used to set the user after initialization.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nawait fbClient.identify(user);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n\\\\n### Data synchronization\\\\n\\\\nWe use **WebSocket** or **Polling** to make the local data synchronized with the server, and then store them in localStorage by default. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK, the average synchronization time is less than **100ms** if WebSocket is configured. Be aware the WebSocket/Polling connection may be interrupted due to internet outage, but it will be resumed automatically once the problem is gone.\\\\n\\\\n### Network failure handling\\\\n\\\\nAs all data is stored locally in the localStorage, in the following situations, the SDK would still work when there is temporarily no internet connection:\\\\n- it has already received the data from previous connections\\\\n- the \\\\`fbClient.bootstrap(featureFlags)\\\\` method is called with all necessary feature flags\\\\n\\\\nIn the meantime, the SDK would try to reconnect to the server by an incremental interval, this makes sure that the websocket would be restored when the internet connection is back.\\\\n\\\\n### Experiments (A/B/n Testing)\\\\n\\\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\\\\nthen you should be able to see the result in near real time after the experiment is started.\\\\n\\\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\\\n\\\\n\\\\`\\\\`\\\\`javascript\\\\nfbClient.track(eventName, numericValue);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n**numericValue** is not mandatory, the default value is **1.0**.\\\\n\\\\nMake sure \\\\`track\\\\` is called after the related feature flag is called, otherwise the custom event won\\\\'t be included\\\\ninto the experiment result.\\\\n\\\\n## Getting support\\\\n- If you have a specific question about using this sdk, we encourage you\\\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\\\n- If you encounter a bug or would like to request a\\\\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\\\\n\\\\n## See Also\\\\n- [Connect To JavaScript Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#javascript)\\\\\\\",\\\\\\\"# FeatBit Server-Side SDK for .NET\\\\n\\\\n## Introduction\\\\n\\\\nThis is the .NET Server-Side SDK for the 100% open-source feature flags management\\\\nplatform [FeatBit](https://github.com/featbit/featbit).\\\\n\\\\nThe FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\\\\napplications. It is not intended for use in desktop and embedded systems applications.\\\\n\\\\nFor using FeatBit in *client-side* .NET applications, refer to\\\\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\\\\n\\\\n## Data Synchronization\\\\n\\\\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\\\\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\\\\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\\\\ninternet outage, but it will be resumed automatically once the problem is gone.\\\\n\\\\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\\\\n\\\\n## Get Started\\\\n\\\\n### Installation\\\\n\\\\nThe latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\\\\n\\\\n\\\\`\\\\`\\\\`sh\\\\ndotnet add package FeatBit.ServerSdk\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nUse the \\\\`--version\\\\` option to specify\\\\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\\\\n\\\\n### Prerequisite\\\\n\\\\nBefore using the SDK, you need to obtain the environment secret and SDK URLs.\\\\n\\\\nFollow the documentation below to retrieve these values\\\\n\\\\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\\\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\\\n\\\\n### Quick Start\\\\n\\\\nThe following code demonstrates basic usage of FeatBit.ServerSdk.\\\\n\\\\n\\\\`\\\\`\\\\`cs\\\\nusing FeatBit.Sdk.Server;\\\\nusing FeatBit.Sdk.Server.Model;\\\\nusing FeatBit.Sdk.Server.Options;\\\\n\\\\n// setup SDK options\\\\nvar options = new FbOptionsBuilder(\\\\\\\"<replace-with-your-env-secret>\\\\\\\")\\\\n    .Event(new Uri(\\\\\\\"<replace-with-your-event-url>\\\\\\\"))\\\\n    .Streaming(new Uri(\\\\\\\"<replace-with-your-streaming-url>\\\\\\\"))\\\\n    .Build();\\\\n\\\\n// Creates a new client instance that connects to FeatBit with the custom option.\\\\nvar client = new FbClient(options);\\\\nif (!client.Initialized)\\\\n{\\\\n    Console.WriteLine(\\\\\\\"FbClient failed to initialize. All Variation calls will use fallback value.\\\\\\\");\\\\n}\\\\nelse\\\\n{\\\\n    Console.WriteLine(\\\\\\\"FbClient successfully initialized!\\\\\\\");\\\\n}\\\\n\\\\n// flag to be evaluated\\\\nconst string flagKey = \\\\\\\"game-runner\\\\\\\";\\\\n\\\\n// create a user\\\\nvar user = FbUser.Builder(\\\\\\\"anonymous\\\\\\\").Build();\\\\n\\\\n// evaluate a boolean flag for a given user\\\\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\\\\nConsole.WriteLine($\\\\\\\"flag \\\\'{flagKey}\\\\' returns {boolVariation} for user {user.Key}\\\\\\\");\\\\n\\\\n// evaluate a boolean flag for a given user with evaluation detail\\\\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\\\\nConsole.WriteLine(\\\\n    $\\\\\\\"flag \\\\'{flagKey}\\\\' returns {boolVariationDetail.Value} for user {user.Key}. \\\\\\\" +\\\\n    $\\\\\\\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\\\\\\\"\\\\n);\\\\n\\\\n// close the client to ensure that all insights are sent out before the app exits\\\\nawait client.CloseAsync();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Examples\\\\n\\\\n- [Console App](/examples/ConsoleApp/Program.cs)\\\\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\\\\n\\\\n## SDK\\\\n\\\\n### FbClient\\\\n\\\\nThe FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\\\\n\\\\n#### FbClient Using Default Options\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nusing FeatBit.Sdk.Server;\\\\n\\\\n// Creates a new client instance that connects to FeatBit with the default option.\\\\nvar client = new FbClient(\\\\\\\"<replace-with-your-env-secret>\\\\\\\");\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n#### FbClient Using Custom Options\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nusing FeatBit.Sdk.Server;\\\\nusing FeatBit.Sdk.Server.Options;\\\\nusing Microsoft.Extensions.Logging;\\\\n\\\\nvar consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\\\\n\\\\nvar options = new FbOptionsBuilder(\\\\\\\"<replace-with-your-env-secret>\\\\\\\")\\\\n    .Streaming(new Uri(\\\\\\\"ws://localhost:5100\\\\\\\"))\\\\n    .Event(new Uri(\\\\\\\"http://localhost:5100\\\\\\\"))\\\\n    .StartWaitTime(TimeSpan.FromSeconds(3))\\\\n    .LoggerFactory(consoleLoggerFactory)\\\\n    .Build();\\\\n\\\\n// Creates a new client instance that connects to FeatBit with the custom option.\\\\nvar client = new FbClient(options);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n#### Dependency Injection\\\\n\\\\nWe can register the FeatBit services using standard conventions.\\\\n\\\\n> **Note**\\\\n> The \\\\`AddFeatBit\\\\` extension method will block the current thread for a maximum duration specified in \\\\`FbOptions.StartWaitTime\\\\`.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nusing FeatBit.Sdk.Server.DependencyInjection;\\\\n\\\\nvar builder = WebApplication.CreateBuilder(args);\\\\nbuilder.Services.AddControllers();\\\\n\\\\n// add FeatBit service\\\\nbuilder.Services.AddFeatBit(options =>\\\\n{\\\\n    options.EnvSecret = \\\\\\\"<replace-with-your-env-secret>\\\\\\\";\\\\n    options.StreamingUri = new Uri(\\\\\\\"ws://localhost:5100\\\\\\\");\\\\n    options.EventUri = new Uri(\\\\\\\"http://localhost:5100\\\\\\\");\\\\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\\\\n});\\\\n\\\\nvar app = builder.Build();\\\\napp.Run();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nThen the \\\\`IFbClient\\\\` interface can be obtained through dependency injection.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\npublic class HomeController : ControllerBase\\\\n{\\\\n    private readonly IFbClient _fbClient;\\\\n\\\\n    public HomeController(IFbClient fbClient)\\\\n    {\\\\n        _fbClient = fbClient;\\\\n    }\\\\n}\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### FbUser\\\\n\\\\nFbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\\\\nattributes: \\\\`key\\\\` and \\\\`name\\\\`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\\\\nuser.\\\\n\\\\nBesides these built-in properties, you can define any additional attributes associated with the user\\\\nusing \\\\`Custom(string key, string value)\\\\` method on \\\\`IFbUserBuilder\\\\`. Both built-in attributes and custom attributes can\\\\nbe referenced in targeting rules, and are included in analytics data.\\\\n\\\\nThere is only one method for building FbUser.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nvar bob = FbUser.Builder(\\\\\\\"a-unique-key-of-user\\\\\\\")\\\\n    .Name(\\\\\\\"bob\\\\\\\")\\\\n    .Custom(\\\\\\\"age\\\\\\\", \\\\\\\"15\\\\\\\")\\\\n    .Custom(\\\\\\\"country\\\\\\\", \\\\\\\"FR\\\\\\\")\\\\n    .Build();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Evaluating flags\\\\n\\\\nBy using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\\\\ngiven user.\\\\n\\\\nThere is a \\\\`Variation\\\\` method that returns a flag value, and a \\\\`VariationDetail\\\\` method that returns an object\\\\ndescribing how the value was determined for each type.\\\\n\\\\n- BoolVariation/BoolVariationDetail\\\\n- StringVariation/StringVariationDetail\\\\n- DoubleVariation/DoubleVariationDetail\\\\n- FloatVariation/FloatVariationDetail\\\\n- IntVariation/IntVariationDetail\\\\n- JsonVariation/JsonVariationDetail (in consideration)\\\\n\\\\n> **Note**\\\\n> Since the current version does not have native support for retrieving JSON variations, you can use the \\\\`StringVariation\\\\` method as an alternative to get the JSON string.\\\\n\\\\nVariation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\\\\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nusing FeatBit.Sdk.Server;\\\\nusing FeatBit.Sdk.Server.Model;\\\\n\\\\n// Creates a new client instance that connects to FeatBit with the default option.\\\\nvar client = new FbClient(\\\\\\\"<replace-with-your-env-secret>\\\\\\\");\\\\n\\\\n// The flag key to be evaluated\\\\nconst string flagKey = \\\\\\\"game-runner\\\\\\\";\\\\n\\\\n// The user\\\\nvar user = FbUser.Builder(\\\\\\\"anonymous\\\\\\\").Build();\\\\n\\\\n// Evaluate a boolean flag for a given user\\\\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\\\\nConsole.WriteLine($\\\\\\\"flag \\\\'{flagKey}\\\\' returns {boolVariation} for user {user.Key}\\\\\\\");\\\\n\\\\n// evaluate a boolean flag for a given user with evaluation detail\\\\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\\\\nConsole.WriteLine(\\\\n    $\\\\\\\"flag \\\\'{flagKey}\\\\' returns {boolVariationDetail.Value} for user {user.Key}. \\\\\\\" +\\\\n    $\\\\\\\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\\\\\\\"\\\\n);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Offline Mode\\\\n\\\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nvar options = new FbOptionsBuilder()\\\\n    .Offline(true)\\\\n    .Build();\\\\n\\\\nvar client = new FbClient(options);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nWhen you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\\\\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\\\\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\\\\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\\\\n\\\\n> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\\\\n\\\\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\\\\nconstruct these objects yourself, it\\\\'s simpler to request existing flags directly from the FeatBit server in JSON format\\\\nand use this output as the starting point for your file. Here\\\\'s how:\\\\n\\\\n\\\\`\\\\`\\\\`shell\\\\n# replace http://localhost:5100 with your evaluation server url\\\\ncurl -H \\\\\\\"Authorization: <your-env-secret>\\\\\\\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nThen use that file to initialize FbClient:\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nusing FeatBit.Sdk.Server.Options;\\\\n\\\\nvar json = File.ReadAllText(\\\\\\\"featbit-bootstrap.json\\\\\\\");\\\\n\\\\nvar options = new FbOptionsBuilder()\\\\n    .Offline(true)\\\\n    .UseJsonBootstrapProvider(json)\\\\n    .Build();\\\\n\\\\nvar client = new FbClient(options);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Disable Events Collection\\\\n\\\\nBy default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\\\\nserver, unless the SDK is in offline mode.\\\\n\\\\nIf you prefer to disable this event collection while the SDK is in online mode, you\\\\ncan configure this behavior using the \\\\`DisableEvents\\\\` option.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nvar options = new FbOptionsBuilder()\\\\n    .DisableEvents(true)\\\\n    .Build();\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Experiments (A/B/n Testing)\\\\n\\\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\\\\nthen you should be able to see the result in near real time after the experiment is started.\\\\n\\\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\\\n\\\\n\\\\`\\\\`\\\\`csharp\\\\nclient.Track(user, eventName, numericValue);\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n**numericValue** is not mandatory, the default value is **1.0**.\\\\n\\\\nMake sure \\\\`track\\\\` is called after the related feature flag is called, otherwise the custom event won\\\\'t be included\\\\ninto the experiment result.\\\\n\\\\n## Supported .NET versions\\\\n\\\\nThis version of the SDK is built for the following targets:\\\\n\\\\n- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\\\\n- .NET Core 3.1: runs on .NET Core 3.1+.\\\\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\\\\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\\\\n  platform.\\\\n\\\\nThe .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\\\\napplication or library is targeted to.\\\\n\\\\n> **_NOTE:_** This SDK requires the \\\\`System.Text.Json\\\\` API to be available, which is included in the runtime for .NET\\\\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\\\\n> in \\\\`System.Text.Json\\\\` as a NuGet package dependency.\\\\n\\\\n## Getting support\\\\n\\\\n- If you have a specific question about using this sdk, we encourage you\\\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\\\n- If you encounter a bug or would like to request a\\\\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\\\\n\\\\n## See Also\\\\n\\\\n- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\\\\\\\",\\\\\\\"# FeatBit Server-Side SDK for Python\\\\n\\\\n## Introduction\\\\n\\\\nThis is the Python Server-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\\\\n\\\\nThe FeatBit Server-Side SDK for Python is designed primarily for use in multi-user systems such as web servers and applications.\\\\n\\\\n## Data synchonization\\\\n\\\\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\\\\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\\\\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\\\\ninternet outage, but it will be resumed automatically once the problem is gone.\\\\n\\\\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\\\\n\\\\n## Get Started\\\\n\\\\n### Installation\\\\ninstall the sdk in using pip, this version of the SDK is compatible with Python 3.6 through 3.11.\\\\n\\\\n\\\\`\\\\`\\\\`shell\\\\npip install fb-python-sdk\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Prerequisite\\\\n\\\\nBefore using the SDK, you need to obtain the environment secret and SDK URLs. \\\\n\\\\nFollow the documentation below to retrieve these values\\\\n\\\\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\\\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\\\n  \\\\n### Quick Start\\\\n\\\\n> Note that the _**env_secret**_, _**streaming_url**_ and _**event_url**_ are required to initialize the SDK.\\\\n\\\\nThe following code demonstrates basic usage of the SDK.\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nfrom fbclient import get, set_config\\\\nfrom fbclient.config import Config\\\\n\\\\nenv_secret = \\\\'<replace-with-your-env-secret>\\\\'\\\\nevent_url = \\\\'http://localhost:5100\\\\'\\\\nstreaming_url = \\\\'ws://localhost:5100\\\\'\\\\n\\\\nset_config(Config(env_secret, event_url, streaming_url))\\\\nclient = get()\\\\n\\\\nif client.initialize:\\\\n    flag_key = \\\\'<replace-with-your-flag-key>\\\\'\\\\n    user_key = \\\\'bot-id\\\\'\\\\n    user_name = \\\\'bot\\\\'\\\\n    user = {\\\\'key\\\\': user_key, \\\\'name\\\\': user_name}\\\\n    detail = client.variation_detail(flag_key, user, default=None)\\\\n    print(f\\\\'flag {flag_key} returns {detail.variation} for user {user_key}, reason: {detail.reason}\\\\')\\\\n\\\\n# ensure that the SDK shuts down cleanly and has a chance to deliver events to FeatBit before the program exits\\\\nclient.stop()\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Examples\\\\n\\\\n- [Python Demo](https://github.com/featbit/featbit-samples/blob/main/samples/dino-game/demo-python/demo_python.py)\\\\n\\\\n### FBClient\\\\n\\\\nApplications **SHOULD instantiate a single FBClient instance** for the lifetime of the application. In the case where an application\\\\nneeds to evaluate feature flags from different environments, you may create multiple clients, but they should still be\\\\nretained for the lifetime of the application rather than created per request or per thread.\\\\n\\\\n#### Bootstrapping\\\\n\\\\nThe bootstrapping is in fact the call of constructor of \\\\`FBClient\\\\`, in which the SDK will be initialized and connect to FeatBit.\\\\n\\\\nThe constructor will return when it successfully connects, or when the timeout(default: 15 seconds) expires, whichever comes first. If it has not succeeded in connecting when the timeout elapses, you will receive the client in an uninitialized state where feature flags will return default values; it will still continue trying to connect in the background unless there has been a network error or you close the client(using \\\\`stop()\\\\`). You can detect whether initialization has succeeded by calling \\\\`initialize()\\\\`.\\\\n\\\\nThe best way to use the SDK as a singleton, first make sure you have called \\\\`fbclient.set_config()\\\\` at startup time. Then \\\\`fbclient.get()\\\\` will return the same shared \\\\`fbclient.client.FBClient\\\\` instance each time. The client will be initialized if it runs first time.\\\\n\\\\`\\\\`\\\\`python\\\\nfrom fbclient.config import Config\\\\nfrom fbclient import get, set_config \\\\n\\\\nset_config(Config(env_secret, event_url, streaming_url))\\\\nclient = get()\\\\n\\\\nif client.initialize:\\\\n    # the client is ready\\\\n\\\\`\\\\`\\\\`\\\\nYou can also manage your \\\\`fbclient.client.FBClient\\\\`, the SDK will be initialized if you call \\\\`fbclient.client.FBClient\\\\` constructor. With constructor, you can set the timeout for initialization, the default value is 15 seconds.\\\\n\\\\`\\\\`\\\\`python\\\\nfrom fbclient.config import Config\\\\nfrom fbclient.client import FBClient\\\\n\\\\nclient = FBClient(Config(env_secret, event_url, streaming_url), start_wait=15)\\\\n\\\\nif client.initialize:\\\\n    # the client is ready\\\\n\\\\`\\\\`\\\\`\\\\nIf you prefer to have the constructor return immediately, and then wait for initialization to finish at some other point, you can use \\\\`fbclient.client.fbclient.update_status_provider\\\\` object, which provides an asynchronous way, as follows:\\\\n\\\\n\\\\`\\\\`\\\\` python\\\\nfrom fbclient.config import Config\\\\nfrom fbclient.client import FBClient\\\\n\\\\nclient = FBClient(Config(env_secret), start_wait=0)\\\\nif client.update_status_provider.wait_for_OKState():\\\\n    # the client is ready\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nIt\\\\'s possible to set a timeout in seconds for the \\\\`wait_for_OKState\\\\` method. If the timeout is reached, the method will return \\\\`False\\\\` and the client will still be in an uninitialized state. If you do not specify a timeout, the method will wait indefinitely.\\\\n\\\\n\\\\n> To check if the client is ready is optional. Even if the client is not ready, you can still evaluate feature flags, but the default value will be returned if SDK is not yet initialized.\\\\n\\\\n### FBUser\\\\n\\\\nA dictionary of attributes that can affect flag evaluation, usually corresponding to a user of your application.\\\\nThis object contains built-in properties(\\\\`key\\\\`, \\\\`name\\\\`). The \\\\`key\\\\` and \\\\`name\\\\` are required. The \\\\`key\\\\` must uniquely identify each user; this could be a username or email address for authenticated users, or a ID for anonymous users. The \\\\`name\\\\` is used to search your user quickly. You may also define custom properties with arbitrary names and values.\\\\nFor instance, the custom key should be a string; the custom value should be a string, number or boolean value\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nuser = {\\\\'key\\\\': user_key, \\\\'name\\\\': user_name, \\\\'age\\\\': age}\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Evaluation\\\\n\\\\nSDK calculates the value of a feature flag for a given user, and returns a flag vlaue/an object that describes the way that the value was determined.\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nif client.initialize:\\\\n    user = {\\\\'key\\\\': user_key, \\\\'name\\\\': user_name, \\\\'age\\\\': age}\\\\n    # evaluate the flag value\\\\n    flag_value = client.variation(flag_key, user, default_value)\\\\n    # evaluate the flag value and get the detail\\\\n    detail = client.variation_detail(flag_key, user, default=None)\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nIf you would like to get variations of all feature flags in a special environment, you can use \\\\`fbclient.client.FBClient.get_all_latest_flag_variations\\\\`, SDK will return \\\\`fbclient.common_types.AllFlagStates\\\\`, that explain the details of all feature flags. \\\\`fbclient.common_types.AllFlagStates.get()\\\\` returns the detail of a given feature flag key.\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nif client.initialize:\\\\n    user = {\\\\'key\\\\': user_key, \\\\'name\\\\': user_name}\\\\n    all_flag_values = client.get_all_latest_flag_variations(user)\\\\n    # get all feature flag keys\\\\n    keys = all_flag_values.keys()\\\\n    for flag_key in keys:\\\\n        # get viariation detail\\\\n        detail = all_flag_values.get(flag_key, default=None)\\\\n        # get viariation\\\\n        value = all_flag_values.get_variation(flag_key, default=None)\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n> **Note**\\\\n> If evaluation happened before the client is initialized, or you provide the wrong flag key/user for evaluation, the \\\\`variation\\\\` calls will return the default value. The \\\\`fbclient.common_types.EvalDetail\\\\` will explain the details of the latest evaluation including error reason.\\\\n\\\\n### Flag Tracking\\\\n\\\\n\\\\`fbclient.client.FBClient.flag_tracker\\\\` registers a listener to be notified of feature flag changes in general.\\\\n\\\\nNote that a flag value change listener is bound to a specific user and flag key.\\\\n\\\\nThe flag value change listener will be notified whenever the SDK receives any change to any feature flag\\\\'s configuration,\\\\nor to a user segment that is referenced by a feature flag. To register a flag value change listener, use \\\\`add_flag_value_may_changed_listener\\\\` or \\\\`add_flag_value_changed_listener\\\\`\\\\n\\\\nWhen you track a flag change using \\\\`add_flag_value_maybe_changed_listener\\\\`, this does not necessarily mean the flag\\\\'s value has changed for any particular flag, only that some part of the flag configuration was changed so that it *_MAY_* return a different value than it previously returned for some user.\\\\n\\\\nIf you want to track a flag whose value *_MUST_* be changed, \\\\`add_flag_value_changed_listener\\\\` will register a listener that will be notified if and only if the flag value changes.\\\\n\\\\nChange notices only work if the SDK is actually connecting to FeatBit feature flag center.\\\\nIf the SDK is in offline mode, then it cannot know when there is a change, because flags are read on an as-needed basis.\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nif client.initialize:\\\\n    #  flag value may be changed\\\\n    client.flag_tracker.add_flag_value_maybe_changed_listener(flag_key, user, flag_value_maybe_changed_callback_fn)\\\\n    #  flag value must be changed\\\\n    client.flag_tracker.add_flag_value_changed_listener(flag_key, user, flag_value_changed_callback_fn)\\\\n\\\\n\\\\`\\\\`\\\\`\\\\n\\\\`flag_key\\\\`: the key of the feature flag to track\\\\n\\\\n\\\\`user\\\\`: the user to evaluate the flag value\\\\n\\\\n\\\\`callback_fn\\\\`: the function to be called for the flag value change\\\\n* the first argument is the flag key\\\\n* the second argument is the latest flag value\\\\n\\\\n\\\\n\\\\n### Offline Mode\\\\n\\\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\nconfig = Config(env_secret, event_url, streaming_url, offline=True)\\\\n\\\\`\\\\`\\\\`\\\\nWhen you put the SDK in offline mode, no insight message is sent to the server and all feature flag evaluations return\\\\nfallback values because there are no feature flags or segments available. If you want to use your own data source,\\\\nSDK allows users to populate feature flags and segments data from a JSON string. Here is an example: [fbclient_test_data.json](tests/fbclient_test_data.json).\\\\n\\\\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to construct these objects yourself, it\\\\'s simpler to request existing flags directly from the FeatBit server in JSON format and use this output as the starting point for your file. Here\\\\'s how:\\\\n\\\\n\\\\`\\\\`\\\\`shell\\\\n# replace http://localhost:5100 with your evaluation server url\\\\ncurl -H \\\\\\\"Authorization: <your-env-secret>\\\\\\\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\\\\n\\\\`\\\\`\\\\`\\\\n\\\\nThen you can use this file to initialize the SDK in offline mode:\\\\n\\\\n\\\\`\\\\`\\\\`python\\\\n// first load data from file and then\\\\nclient.initialize_from_external_json(json)\\\\n\\\\`\\\\`\\\\`\\\\n\\\\n### Experiments (A/B/n Testing)\\\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform, then you should be able to see the result in near real time after the experiment is started.\\\\n\\\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\\\n\\\\`\\\\`\\\\`python\\\\nclient.track_metric(user, event_name, numeric_value);\\\\n\\\\`\\\\`\\\\`\\\\n**numeric_value** is not mandatory, the default value is **1**.\\\\n\\\\nMake sure \\\\`track_metric\\\\` is called after the related feature flag is evaluated by simply calling \\\\`variation\\\\` or \\\\`variation_detail\\\\`\\\\notherwise, the custom event may not be included into the experiment result.\\\\n\\\\n## Getting support\\\\n\\\\n- If you have a specific question about using this sdk, we encourage you\\\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\\\n- If you encounter a bug or would like to request a\\\\n  feature, [submit an issue](https://github.com/featbit/featbit-python-sdk/issues/new).\\\\n\\\\n## See Also\\\\n- [Connect To Python Sdk](https://docs.featbit.co/sdk/overview#python)\\\\\\\"]\"}",
        "label": "pdEGCS",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "structured",
      "looped": false,
      "measured": {
        "width": 560,
        "height": 384
      },
      "selected": false,
      "dragging": false,
      "width": 560,
      "height": 384,
      "resizing": false
    },
    {
      "id": "imlZMZ",
      "position": {
        "x": 48,
        "y": -1296
      },
      "data": {
        "content": "[\\\"> **Attention**\\n>\\n> If you are using the v1 or v2 of the SDK, please refer to this [doc](https://github.com/featbit/featbit-js-client-sdk/tree/v2)\\n\\n# FeatBit Client SDK for JavaScript\\n\\n## Introduction\\n\\nThis is the Client-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\\n\\nBe aware, this is a client side SDK, it is intended for use in a single-user context, which can be mobile, desktop or embedded applications. This SDK can only be ran in a browser environment, it is not suitable for NodeJs applications.\\n\\n## Get Started\\n\\n### Installation\\n\\n\\`\\`\\`bash\\nnpm install --save @featbit/js-client-sdk\\n\\`\\`\\`\\n### Prerequisite\\n\\nBefore using the SDK, you need to obtain the environment secret (the sdkKey) and SDK URLs.\\n\\nFollow the documentation below to retrieve these values\\n- [How to get environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\n- [How to get SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\n\\n### Quick Start\\n\\nThe following code demonstrates the basic usage of \\`@featbit/js-client-sdk\\`.\\n\\n\\`\\`\\`javascript\\nimport { FbClientBuilder, UserBuilder } from \\\"@featbit/js-client-sdk\\\";\\n\\nconst bob = new UserBuilder(\\'a-unique-key-of-user\\')\\n    .name(\\'bob\\')\\n    .custom(\\'age\\', \\'18\\')\\n    .custom(\\'country\\', \\'FR\\')\\n    .build();\\n\\n// setup SDK client with websocket streaming\\nconst fbClient = new FbClientBuilder()\\n    .sdkKey(\\\"your_sdk_key\\\")\\n    .streamingUri(\\'ws://localhost:5100\\')\\n    .eventsUri(\\\"http://localhost:5100\\\")\\n    .user(bob)\\n    .build();\\n\\n(async () => {\\n  // wait for the SDK to be initialized\\n  try {\\n    await fbClient.waitForInitialization();\\n  } catch(err) {\\n    // failed to initialize the SDK\\n    console.log(err);\\n  }\\n\\n  // flag to be evaluated\\n  const flagKey = \\\"game-runner\\\";\\n\\n  // evaluate a feature flag for a given user\\n  const boolVariation = await fbClient.boolVariation(flagKey, false);\\n\\n  // switch user\\n  const alice = new UserBuilder(\\'another-unique-key-of-user\\')\\n      .name(\\'alice\\')\\n      .custom(\\'country\\', \\'UK\\')\\n      .custom(\\'age\\', 36)\\n      .build();\\n  \\n  await fbClient.identify(alice);\\n})();\\n\\`\\`\\`\\n\\n## Examples\\n- [web App](./examples/console-app)\\n- For how to use FeatBit with React, please refer to the [react-client-sdk](https://github.com/featbit/featbit-react-client-sdk)\\n\\n## SDK\\n\\n### FbClient\\n\\nThe \\`FbClient\\` is the heart of the SDK which provides access to FeatBit server. Applications should instantiate a single instance for the lifetime of the application.\\n\\n\\`FbClientBuilder\\` is used to construct a \\`FbClient\\` instance. The builder exposes methods to configure the SDK, and finally to create the \\`FbClient\\` instance.\\n\\n#### FbClient Using Streaming\\n\\n\\`\\`\\`javascript\\nimport { FbClientBuilder, UserBuilder } from \\\"@featbit/js-client-sdk\\\";\\n\\nconst user = new UserBuilder(\\'a-unique-key-of-user\\')\\n    .name(\\'bob\\')\\n    .build();\\n    \\nconst fbClient = new FbClientBuilder()\\n    .sdkKey(\\\"your_sdk_key\\\")\\n    .streamingUri(\\'ws://localhost:5100\\')\\n    .eventsUri(\\\"http://localhost:5100\\\")\\n    .user(user)\\n    .build();\\n\\`\\`\\`\\n#### FbClient Using Polling\\n\\n\\`\\`\\`javascript\\nimport { FbClientBuilder, UserBuilder, DataSyncModeEnum } from \\\"@featbit/js-client-sdk\\\";\\n\\nconst user = new UserBuilder(\\'a-unique-key-of-user\\')\\n    .name(\\'bob\\')\\n    .build();\\n\\nconst fbClient = new FbClientBuilder()\\n    .sdkKey(\\\"your_sdk_key\\\")\\n    .dataSyncMode(DataSyncModeEnum.POLLING)\\n    .pollingUri(\\'http://localhost:5100\\')\\n    .eventsUri(\\\"http://localhost:5100\\\")\\n    .pollingInterval(10000)\\n    .build();\\n\\`\\`\\`\\n\\n#### IUser\\n\\n\\`IUser\\` defines the attributes of a user for whom you are evaluating feature flags. IUser has two built-in attributes: key and name. The only mandatory attribute of a IUser is the key, which must uniquely identify each user.\\n\\nBesides these built-in properties, you can define any additional attributes associated with the user using \\`custom(string key, string value)\\` method on UserBuilder. Both built-in attributes and custom attributes can be referenced in targeting rules, and are included in analytics data.\\n\\n\\`UserBuilder\\` is used to construct a \\`IUser\\` instance. The builder exposes methods to configure the IUser, and finally to create the IUser instance.\\n\\n\\`\\`\\`javascript\\nimport { UserBuilder } from \\\"@featbit/js-client-sdk\\\";\\n\\nconst bob = new UserBuilder(\\\"unique_key_for_bob\\\")\\n    .name(\\\"Bob\\\")\\n    .custom(\\'age\\', 18)\\n    .custom(\\'country\\', \\'FR\\')\\n    .build();\\n\\`\\`\\`\\n\\n### Bootstrap\\nIf you already have the feature flags available, you can pass them to the SDK instead of requesting from the remote.\\n\\n\\n> **_NOTE:_** The bootstrapped flags will be overridden by the remote flags if they are available.\\n\\n\\`\\`\\`javascript\\n// define the option with the bootstrap parameter\\nconst options = {\\n  ...\\n  bootstrap = [{\\n    // feature flag key name\\n    id: string,\\n    // variation value\\n    variation: string,\\n    // variation data type, string will be used if not specified\\n    variationType: VariationDataType\\n  }]\\n}\\n\\nconst fbClient = new FbClientBuilder(options).build();\\n// or\\nconst fbClient = new FbClientBuilder()\\n    //... other options\\n    .bootstrap(options.bootstrap)\\n    .build();\\n\\`\\`\\`\\n\\n### Evaluation\\n\\nAfter initialization, the SDK has all the feature flags locally, and it does not need to request the remote server for any feature flag evaluation. All evaluation is done locally and synchronously, the average evaluation time is less than 1 ms.\\n\\nThere is a \\`variation\\` method that returns a flag value, and a \\`variationDetail\\` method that returns an object\\ndescribing how the value was determined for each type.\\n\\n- boolVariation/boolVariationDetail\\n- stringVariation/stringVariationDetail\\n- numberVariation/numberVariationDetail\\n- jsonVariation/jsonVariationDetail\\n\\nVariation calls take the feature flag key and a default value. If any error makes it impossible to\\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\\n\\n\\`\\`\\`javascript\\n// flag to be evaluated\\nconst flagKey = \\\"game-runner\\\";\\n\\n// evaluate a feature flag for a given user\\nconst boolVariation = await fbClient.boolVariation(flagKey, false);\\n\\n// evaluate a boolean flag for a given user with evaluation detail\\nconst boolVariationDetail = await fbClient.boolVariationDetail(flagKey, false);\\n\\`\\`\\`\\n\\n### Offline Mode\\n\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\n\\`\\`\\`javascript\\nimport { FbClientBuilder } from \\\"@featbit/browser-server-sdk\\\";\\n\\nconst fbClient = new FbClientBuilder()\\n    //... other options\\n    .offline(true)\\n    .build();\\n\\n\\`\\`\\`\\nWhen Offline mode is enabled, you should provide the flags with the [bootstrap](#bootstrap) option,\\notherwise, the SDK would return the defaul value you passed to the \\`variation\\` method.\\n\\n### Events\\n\\n#### Wait for ready\\n\\nTo find out when the client is ready, you can use one of two mechanisms: events or promises.\\n\\nThe client object can emit JavaScript events. It emits a ready event when it receives initial flag values from the server. You can listen for this event to determine when the client is ready to evaluate flags.\\n\\n\\`\\`\\`javascript\\nfbClient.on(\\'ready\\', () => {\\n  var flagValue = fbClient.variation(\\\"YOUR_FEATURE_KEY\\\", defaultValue);\\n});\\n\\`\\`\\`\\n\\nOr, you can use a promise instead of an event. The SDK has a method that returns a promise for initialization: **waitForInitialization()**. The behavior of waitUntilReady() is equivalent to the ready event. The promise resolves when the client receives its initial flag data. As with all promises, you can either use .then() to provide a callback, or use await if you are writing asynchronous code.\\n\\n\\`\\`\\`javascript\\nfbClient.waitForInitialization().then((data) => {\\n  // data has the following structure [ {id: \\'featureFlagKey\\', variation: variationValue } ]\\n  // variationValue has the type as defined on remote\\n  // initialization succeeded, flag values are now available\\n});\\n// or, with await:\\nconst featureFlags = await fbClient.waitForInitialization();\\n// initialization succeeded, flag values are now available\\n\\`\\`\\`\\n\\nThe SDK only decides initialization has failed if it receives an error response indicating that the environment ID is invalid. If it has trouble connecting to FeatBit, it will keep retrying until it succeeds.\\n\\n#### Subscribe to flag(s) changes\\n\\nTo get notified when a feature flag is changed, we offer two methods\\n- subscribe to the changes of any feature flag(s)\\n\\n\\`\\`\\`javascript\\nfbClient.on(\\'update\\', (keys: string[]) => {\\n  // do something when any feature flag changes\\n});\\n\\n\\`\\`\\`\\n- subscribe to the changes of a specific feature flag\\n\\n\\`\\`\\`javascript\\n// replace feature_flag_key with your feature flag key\\nfbClient.on(\\'update:feature_flag_key\\', (key) => {\\n  const myFeature = fbClient.variation(\\'feature_flag_key\\', defaultValue);\\n});\\n\\n\\`\\`\\`\\n\\n### Switch user after initialization\\nIf the user changed after some process, login for example, the following method can be used to set the user after initialization.\\n\\n\\`\\`\\`javascript\\nawait fbClient.identify(user);\\n\\`\\`\\`\\n\\n\\n### Data synchronization\\n\\nWe use **WebSocket** or **Polling** to make the local data synchronized with the server, and then store them in localStorage by default. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK, the average synchronization time is less than **100ms** if WebSocket is configured. Be aware the WebSocket/Polling connection may be interrupted due to internet outage, but it will be resumed automatically once the problem is gone.\\n\\n### Network failure handling\\n\\nAs all data is stored locally in the localStorage, in the following situations, the SDK would still work when there is temporarily no internet connection:\\n- it has already received the data from previous connections\\n- the \\`fbClient.bootstrap(featureFlags)\\` method is called with all necessary feature flags\\n\\nIn the meantime, the SDK would try to reconnect to the server by an incremental interval, this makes sure that the websocket would be restored when the internet connection is back.\\n\\n### Experiments (A/B/n Testing)\\n\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\\nthen you should be able to see the result in near real time after the experiment is started.\\n\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\n\\n\\`\\`\\`javascript\\nfbClient.track(eventName, numericValue);\\n\\`\\`\\`\\n\\n**numericValue** is not mandatory, the default value is **1.0**.\\n\\nMake sure \\`track\\` is called after the related feature flag is called, otherwise the custom event won\\'t be included\\ninto the experiment result.\\n\\n## Getting support\\n- If you have a specific question about using this sdk, we encourage you\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\n- If you encounter a bug or would like to request a\\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\\n\\n## See Also\\n- [Connect To JavaScript Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#javascript)\\\",\\\"# FeatBit Server-Side SDK for .NET\\n\\n## Introduction\\n\\nThis is the .NET Server-Side SDK for the 100% open-source feature flags management\\nplatform [FeatBit](https://github.com/featbit/featbit).\\n\\nThe FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\\napplications. It is not intended for use in desktop and embedded systems applications.\\n\\nFor using FeatBit in *client-side* .NET applications, refer to\\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\\n\\n## Data Synchronization\\n\\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\\ninternet outage, but it will be resumed automatically once the problem is gone.\\n\\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\\n\\n## Get Started\\n\\n### Installation\\n\\nThe latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\\n\\n\\`\\`\\`sh\\ndotnet add package FeatBit.ServerSdk\\n\\`\\`\\`\\n\\nUse the \\`--version\\` option to specify\\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\\n\\n### Prerequisite\\n\\nBefore using the SDK, you need to obtain the environment secret and SDK URLs.\\n\\nFollow the documentation below to retrieve these values\\n\\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\n\\n### Quick Start\\n\\nThe following code demonstrates basic usage of FeatBit.ServerSdk.\\n\\n\\`\\`\\`cs\\nusing FeatBit.Sdk.Server;\\nusing FeatBit.Sdk.Server.Model;\\nusing FeatBit.Sdk.Server.Options;\\n\\n// setup SDK options\\nvar options = new FbOptionsBuilder(\\\"<replace-with-your-env-secret>\\\")\\n    .Event(new Uri(\\\"<replace-with-your-event-url>\\\"))\\n    .Streaming(new Uri(\\\"<replace-with-your-streaming-url>\\\"))\\n    .Build();\\n\\n// Creates a new client instance that connects to FeatBit with the custom option.\\nvar client = new FbClient(options);\\nif (!client.Initialized)\\n{\\n    Console.WriteLine(\\\"FbClient failed to initialize. All Variation calls will use fallback value.\\\");\\n}\\nelse\\n{\\n    Console.WriteLine(\\\"FbClient successfully initialized!\\\");\\n}\\n\\n// flag to be evaluated\\nconst string flagKey = \\\"game-runner\\\";\\n\\n// create a user\\nvar user = FbUser.Builder(\\\"anonymous\\\").Build();\\n\\n// evaluate a boolean flag for a given user\\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\\nConsole.WriteLine($\\\"flag \\'{flagKey}\\' returns {boolVariation} for user {user.Key}\\\");\\n\\n// evaluate a boolean flag for a given user with evaluation detail\\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\\nConsole.WriteLine(\\n    $\\\"flag \\'{flagKey}\\' returns {boolVariationDetail.Value} for user {user.Key}. \\\" +\\n    $\\\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\\\"\\n);\\n\\n// close the client to ensure that all insights are sent out before the app exits\\nawait client.CloseAsync();\\n\\`\\`\\`\\n\\n### Examples\\n\\n- [Console App](/examples/ConsoleApp/Program.cs)\\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\\n\\n## SDK\\n\\n### FbClient\\n\\nThe FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\\n\\n#### FbClient Using Default Options\\n\\n\\`\\`\\`csharp\\nusing FeatBit.Sdk.Server;\\n\\n// Creates a new client instance that connects to FeatBit with the default option.\\nvar client = new FbClient(\\\"<replace-with-your-env-secret>\\\");\\n\\`\\`\\`\\n\\n#### FbClient Using Custom Options\\n\\n\\`\\`\\`csharp\\nusing FeatBit.Sdk.Server;\\nusing FeatBit.Sdk.Server.Options;\\nusing Microsoft.Extensions.Logging;\\n\\nvar consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\\n\\nvar options = new FbOptionsBuilder(\\\"<replace-with-your-env-secret>\\\")\\n    .Streaming(new Uri(\\\"ws://localhost:5100\\\"))\\n    .Event(new Uri(\\\"http://localhost:5100\\\"))\\n    .StartWaitTime(TimeSpan.FromSeconds(3))\\n    .LoggerFactory(consoleLoggerFactory)\\n    .Build();\\n\\n// Creates a new client instance that connects to FeatBit with the custom option.\\nvar client = new FbClient(options);\\n\\`\\`\\`\\n\\n#### Dependency Injection\\n\\nWe can register the FeatBit services using standard conventions.\\n\\n> **Note**\\n> The \\`AddFeatBit\\` extension method will block the current thread for a maximum duration specified in \\`FbOptions.StartWaitTime\\`.\\n\\n\\`\\`\\`csharp\\nusing FeatBit.Sdk.Server.DependencyInjection;\\n\\nvar builder = WebApplication.CreateBuilder(args);\\nbuilder.Services.AddControllers();\\n\\n// add FeatBit service\\nbuilder.Services.AddFeatBit(options =>\\n{\\n    options.EnvSecret = \\\"<replace-with-your-env-secret>\\\";\\n    options.StreamingUri = new Uri(\\\"ws://localhost:5100\\\");\\n    options.EventUri = new Uri(\\\"http://localhost:5100\\\");\\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\\n});\\n\\nvar app = builder.Build();\\napp.Run();\\n\\`\\`\\`\\n\\nThen the \\`IFbClient\\` interface can be obtained through dependency injection.\\n\\n\\`\\`\\`csharp\\npublic class HomeController : ControllerBase\\n{\\n    private readonly IFbClient _fbClient;\\n\\n    public HomeController(IFbClient fbClient)\\n    {\\n        _fbClient = fbClient;\\n    }\\n}\\n\\`\\`\\`\\n\\n### FbUser\\n\\nFbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\\nattributes: \\`key\\` and \\`name\\`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\\nuser.\\n\\nBesides these built-in properties, you can define any additional attributes associated with the user\\nusing \\`Custom(string key, string value)\\` method on \\`IFbUserBuilder\\`. Both built-in attributes and custom attributes can\\nbe referenced in targeting rules, and are included in analytics data.\\n\\nThere is only one method for building FbUser.\\n\\n\\`\\`\\`csharp\\nvar bob = FbUser.Builder(\\\"a-unique-key-of-user\\\")\\n    .Name(\\\"bob\\\")\\n    .Custom(\\\"age\\\", \\\"15\\\")\\n    .Custom(\\\"country\\\", \\\"FR\\\")\\n    .Build();\\n\\`\\`\\`\\n\\n### Evaluating flags\\n\\nBy using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\\ngiven user.\\n\\nThere is a \\`Variation\\` method that returns a flag value, and a \\`VariationDetail\\` method that returns an object\\ndescribing how the value was determined for each type.\\n\\n- BoolVariation/BoolVariationDetail\\n- StringVariation/StringVariationDetail\\n- DoubleVariation/DoubleVariationDetail\\n- FloatVariation/FloatVariationDetail\\n- IntVariation/IntVariationDetail\\n- JsonVariation/JsonVariationDetail (in consideration)\\n\\n> **Note**\\n> Since the current version does not have native support for retrieving JSON variations, you can use the \\`StringVariation\\` method as an alternative to get the JSON string.\\n\\nVariation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\\n\\n\\`\\`\\`csharp\\nusing FeatBit.Sdk.Server;\\nusing FeatBit.Sdk.Server.Model;\\n\\n// Creates a new client instance that connects to FeatBit with the default option.\\nvar client = new FbClient(\\\"<replace-with-your-env-secret>\\\");\\n\\n// The flag key to be evaluated\\nconst string flagKey = \\\"game-runner\\\";\\n\\n// The user\\nvar user = FbUser.Builder(\\\"anonymous\\\").Build();\\n\\n// Evaluate a boolean flag for a given user\\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\\nConsole.WriteLine($\\\"flag \\'{flagKey}\\' returns {boolVariation} for user {user.Key}\\\");\\n\\n// evaluate a boolean flag for a given user with evaluation detail\\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\\nConsole.WriteLine(\\n    $\\\"flag \\'{flagKey}\\' returns {boolVariationDetail.Value} for user {user.Key}. \\\" +\\n    $\\\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\\\"\\n);\\n\\`\\`\\`\\n\\n### Offline Mode\\n\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\n\\n\\`\\`\\`csharp\\nvar options = new FbOptionsBuilder()\\n    .Offline(true)\\n    .Build();\\n\\nvar client = new FbClient(options);\\n\\`\\`\\`\\n\\nWhen you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\\n\\n> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\\n\\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\\nconstruct these objects yourself, it\\'s simpler to request existing flags directly from the FeatBit server in JSON format\\nand use this output as the starting point for your file. Here\\'s how:\\n\\n\\`\\`\\`shell\\n# replace http://localhost:5100 with your evaluation server url\\ncurl -H \\\"Authorization: <your-env-secret>\\\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\\n\\`\\`\\`\\n\\nThen use that file to initialize FbClient:\\n\\n\\`\\`\\`csharp\\nusing FeatBit.Sdk.Server.Options;\\n\\nvar json = File.ReadAllText(\\\"featbit-bootstrap.json\\\");\\n\\nvar options = new FbOptionsBuilder()\\n    .Offline(true)\\n    .UseJsonBootstrapProvider(json)\\n    .Build();\\n\\nvar client = new FbClient(options);\\n\\`\\`\\`\\n\\n### Disable Events Collection\\n\\nBy default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\\nserver, unless the SDK is in offline mode.\\n\\nIf you prefer to disable this event collection while the SDK is in online mode, you\\ncan configure this behavior using the \\`DisableEvents\\` option.\\n\\n\\`\\`\\`csharp\\nvar options = new FbOptionsBuilder()\\n    .DisableEvents(true)\\n    .Build();\\n\\`\\`\\`\\n\\n### Experiments (A/B/n Testing)\\n\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\\nthen you should be able to see the result in near real time after the experiment is started.\\n\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\n\\n\\`\\`\\`csharp\\nclient.Track(user, eventName, numericValue);\\n\\`\\`\\`\\n\\n**numericValue** is not mandatory, the default value is **1.0**.\\n\\nMake sure \\`track\\` is called after the related feature flag is called, otherwise the custom event won\\'t be included\\ninto the experiment result.\\n\\n## Supported .NET versions\\n\\nThis version of the SDK is built for the following targets:\\n\\n- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\\n- .NET Core 3.1: runs on .NET Core 3.1+.\\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\\n  platform.\\n\\nThe .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\\napplication or library is targeted to.\\n\\n> **_NOTE:_** This SDK requires the \\`System.Text.Json\\` API to be available, which is included in the runtime for .NET\\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\\n> in \\`System.Text.Json\\` as a NuGet package dependency.\\n\\n## Getting support\\n\\n- If you have a specific question about using this sdk, we encourage you\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\n- If you encounter a bug or would like to request a\\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\\n\\n## See Also\\n\\n- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)\\\",\\\"# FeatBit Server-Side SDK for Python\\n\\n## Introduction\\n\\nThis is the Python Server-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\\n\\nThe FeatBit Server-Side SDK for Python is designed primarily for use in multi-user systems such as web servers and applications.\\n\\n## Data synchonization\\n\\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\\ninternet outage, but it will be resumed automatically once the problem is gone.\\n\\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\\n\\n## Get Started\\n\\n### Installation\\ninstall the sdk in using pip, this version of the SDK is compatible with Python 3.6 through 3.11.\\n\\n\\`\\`\\`shell\\npip install fb-python-sdk\\n\\`\\`\\`\\n\\n### Prerequisite\\n\\nBefore using the SDK, you need to obtain the environment secret and SDK URLs. \\n\\nFollow the documentation below to retrieve these values\\n\\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\\n  \\n### Quick Start\\n\\n> Note that the _**env_secret**_, _**streaming_url**_ and _**event_url**_ are required to initialize the SDK.\\n\\nThe following code demonstrates basic usage of the SDK.\\n\\n\\`\\`\\`python\\nfrom fbclient import get, set_config\\nfrom fbclient.config import Config\\n\\nenv_secret = \\'<replace-with-your-env-secret>\\'\\nevent_url = \\'http://localhost:5100\\'\\nstreaming_url = \\'ws://localhost:5100\\'\\n\\nset_config(Config(env_secret, event_url, streaming_url))\\nclient = get()\\n\\nif client.initialize:\\n    flag_key = \\'<replace-with-your-flag-key>\\'\\n    user_key = \\'bot-id\\'\\n    user_name = \\'bot\\'\\n    user = {\\'key\\': user_key, \\'name\\': user_name}\\n    detail = client.variation_detail(flag_key, user, default=None)\\n    print(f\\'flag {flag_key} returns {detail.variation} for user {user_key}, reason: {detail.reason}\\')\\n\\n# ensure that the SDK shuts down cleanly and has a chance to deliver events to FeatBit before the program exits\\nclient.stop()\\n\\`\\`\\`\\n\\n### Examples\\n\\n- [Python Demo](https://github.com/featbit/featbit-samples/blob/main/samples/dino-game/demo-python/demo_python.py)\\n\\n### FBClient\\n\\nApplications **SHOULD instantiate a single FBClient instance** for the lifetime of the application. In the case where an application\\nneeds to evaluate feature flags from different environments, you may create multiple clients, but they should still be\\nretained for the lifetime of the application rather than created per request or per thread.\\n\\n#### Bootstrapping\\n\\nThe bootstrapping is in fact the call of constructor of \\`FBClient\\`, in which the SDK will be initialized and connect to FeatBit.\\n\\nThe constructor will return when it successfully connects, or when the timeout(default: 15 seconds) expires, whichever comes first. If it has not succeeded in connecting when the timeout elapses, you will receive the client in an uninitialized state where feature flags will return default values; it will still continue trying to connect in the background unless there has been a network error or you close the client(using \\`stop()\\`). You can detect whether initialization has succeeded by calling \\`initialize()\\`.\\n\\nThe best way to use the SDK as a singleton, first make sure you have called \\`fbclient.set_config()\\` at startup time. Then \\`fbclient.get()\\` will return the same shared \\`fbclient.client.FBClient\\` instance each time. The client will be initialized if it runs first time.\\n\\`\\`\\`python\\nfrom fbclient.config import Config\\nfrom fbclient import get, set_config \\n\\nset_config(Config(env_secret, event_url, streaming_url))\\nclient = get()\\n\\nif client.initialize:\\n    # the client is ready\\n\\`\\`\\`\\nYou can also manage your \\`fbclient.client.FBClient\\`, the SDK will be initialized if you call \\`fbclient.client.FBClient\\` constructor. With constructor, you can set the timeout for initialization, the default value is 15 seconds.\\n\\`\\`\\`python\\nfrom fbclient.config import Config\\nfrom fbclient.client import FBClient\\n\\nclient = FBClient(Config(env_secret, event_url, streaming_url), start_wait=15)\\n\\nif client.initialize:\\n    # the client is ready\\n\\`\\`\\`\\nIf you prefer to have the constructor return immediately, and then wait for initialization to finish at some other point, you can use \\`fbclient.client.fbclient.update_status_provider\\` object, which provides an asynchronous way, as follows:\\n\\n\\`\\`\\` python\\nfrom fbclient.config import Config\\nfrom fbclient.client import FBClient\\n\\nclient = FBClient(Config(env_secret), start_wait=0)\\nif client.update_status_provider.wait_for_OKState():\\n    # the client is ready\\n\\`\\`\\`\\n\\nIt\\'s possible to set a timeout in seconds for the \\`wait_for_OKState\\` method. If the timeout is reached, the method will return \\`False\\` and the client will still be in an uninitialized state. If you do not specify a timeout, the method will wait indefinitely.\\n\\n\\n> To check if the client is ready is optional. Even if the client is not ready, you can still evaluate feature flags, but the default value will be returned if SDK is not yet initialized.\\n\\n### FBUser\\n\\nA dictionary of attributes that can affect flag evaluation, usually corresponding to a user of your application.\\nThis object contains built-in properties(\\`key\\`, \\`name\\`). The \\`key\\` and \\`name\\` are required. The \\`key\\` must uniquely identify each user; this could be a username or email address for authenticated users, or a ID for anonymous users. The \\`name\\` is used to search your user quickly. You may also define custom properties with arbitrary names and values.\\nFor instance, the custom key should be a string; the custom value should be a string, number or boolean value\\n\\n\\`\\`\\`python\\nuser = {\\'key\\': user_key, \\'name\\': user_name, \\'age\\': age}\\n\\`\\`\\`\\n\\n### Evaluation\\n\\nSDK calculates the value of a feature flag for a given user, and returns a flag vlaue/an object that describes the way that the value was determined.\\n\\n\\`\\`\\`python\\nif client.initialize:\\n    user = {\\'key\\': user_key, \\'name\\': user_name, \\'age\\': age}\\n    # evaluate the flag value\\n    flag_value = client.variation(flag_key, user, default_value)\\n    # evaluate the flag value and get the detail\\n    detail = client.variation_detail(flag_key, user, default=None)\\n\\`\\`\\`\\n\\nIf you would like to get variations of all feature flags in a special environment, you can use \\`fbclient.client.FBClient.get_all_latest_flag_variations\\`, SDK will return \\`fbclient.common_types.AllFlagStates\\`, that explain the details of all feature flags. \\`fbclient.common_types.AllFlagStates.get()\\` returns the detail of a given feature flag key.\\n\\n\\`\\`\\`python\\nif client.initialize:\\n    user = {\\'key\\': user_key, \\'name\\': user_name}\\n    all_flag_values = client.get_all_latest_flag_variations(user)\\n    # get all feature flag keys\\n    keys = all_flag_values.keys()\\n    for flag_key in keys:\\n        # get viariation detail\\n        detail = all_flag_values.get(flag_key, default=None)\\n        # get viariation\\n        value = all_flag_values.get_variation(flag_key, default=None)\\n\\`\\`\\`\\n\\n> **Note**\\n> If evaluation happened before the client is initialized, or you provide the wrong flag key/user for evaluation, the \\`variation\\` calls will return the default value. The \\`fbclient.common_types.EvalDetail\\` will explain the details of the latest evaluation including error reason.\\n\\n### Flag Tracking\\n\\n\\`fbclient.client.FBClient.flag_tracker\\` registers a listener to be notified of feature flag changes in general.\\n\\nNote that a flag value change listener is bound to a specific user and flag key.\\n\\nThe flag value change listener will be notified whenever the SDK receives any change to any feature flag\\'s configuration,\\nor to a user segment that is referenced by a feature flag. To register a flag value change listener, use \\`add_flag_value_may_changed_listener\\` or \\`add_flag_value_changed_listener\\`\\n\\nWhen you track a flag change using \\`add_flag_value_maybe_changed_listener\\`, this does not necessarily mean the flag\\'s value has changed for any particular flag, only that some part of the flag configuration was changed so that it *_MAY_* return a different value than it previously returned for some user.\\n\\nIf you want to track a flag whose value *_MUST_* be changed, \\`add_flag_value_changed_listener\\` will register a listener that will be notified if and only if the flag value changes.\\n\\nChange notices only work if the SDK is actually connecting to FeatBit feature flag center.\\nIf the SDK is in offline mode, then it cannot know when there is a change, because flags are read on an as-needed basis.\\n\\n\\`\\`\\`python\\nif client.initialize:\\n    #  flag value may be changed\\n    client.flag_tracker.add_flag_value_maybe_changed_listener(flag_key, user, flag_value_maybe_changed_callback_fn)\\n    #  flag value must be changed\\n    client.flag_tracker.add_flag_value_changed_listener(flag_key, user, flag_value_changed_callback_fn)\\n\\n\\`\\`\\`\\n\\`flag_key\\`: the key of the feature flag to track\\n\\n\\`user\\`: the user to evaluate the flag value\\n\\n\\`callback_fn\\`: the function to be called for the flag value change\\n* the first argument is the flag key\\n* the second argument is the latest flag value\\n\\n\\n\\n### Offline Mode\\n\\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\\n\\n\\`\\`\\`python\\nconfig = Config(env_secret, event_url, streaming_url, offline=True)\\n\\`\\`\\`\\nWhen you put the SDK in offline mode, no insight message is sent to the server and all feature flag evaluations return\\nfallback values because there are no feature flags or segments available. If you want to use your own data source,\\nSDK allows users to populate feature flags and segments data from a JSON string. Here is an example: [fbclient_test_data.json](tests/fbclient_test_data.json).\\n\\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to construct these objects yourself, it\\'s simpler to request existing flags directly from the FeatBit server in JSON format and use this output as the starting point for your file. Here\\'s how:\\n\\n\\`\\`\\`shell\\n# replace http://localhost:5100 with your evaluation server url\\ncurl -H \\\"Authorization: <your-env-secret>\\\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\\n\\`\\`\\`\\n\\nThen you can use this file to initialize the SDK in offline mode:\\n\\n\\`\\`\\`python\\n// first load data from file and then\\nclient.initialize_from_external_json(json)\\n\\`\\`\\`\\n\\n### Experiments (A/B/n Testing)\\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform, then you should be able to see the result in near real time after the experiment is started.\\n\\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\\n\\`\\`\\`python\\nclient.track_metric(user, event_name, numeric_value);\\n\\`\\`\\`\\n**numeric_value** is not mandatory, the default value is **1**.\\n\\nMake sure \\`track_metric\\` is called after the related feature flag is evaluated by simply calling \\`variation\\` or \\`variation_detail\\`\\notherwise, the custom event may not be included into the experiment result.\\n\\n## Getting support\\n\\n- If you have a specific question about using this sdk, we encourage you\\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\\n- If you encounter a bug or would like to request a\\n  feature, [submit an issue](https://github.com/featbit/featbit-python-sdk/issues/new).\\n\\n## See Also\\n- [Connect To Python Sdk](https://docs.featbit.co/sdk/overview#python)\\\"]",
        "label": "imlZMZ",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 304,
        "height": 208
      },
      "selected": false,
      "dragging": false,
      "width": 304,
      "height": 208,
      "resizing": false
    },
    {
      "id": "LIv4dK",
      "position": {
        "x": -880,
        "y": -1920
      },
      "data": {
        "content": "# FeatBit Server-Side SDK for .NET\n\n## Introduction\n\nThis is the .NET Server-Side SDK for the 100% open-source feature flags management\nplatform [FeatBit](https://github.com/featbit/featbit).\n\nThe FeatBit Server-Side SDK for .NET is designed primarily for use in multi-user systems such as web servers and\napplications. It is not intended for use in desktop and embedded systems applications.\n\nFor using FeatBit in *client-side* .NET applications, refer to\nour [Client-Side .NET SDK](https://github.com/featbit/featbit-dotnet-client-sdk).\n\n## Data Synchronization\n\nWe use websocket to make the local data synchronized with the FeatBit server, and then store them in memory by\ndefault. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK and\nthe average synchronization time is less than 100 ms. Be aware the websocket connection may be interrupted due to\ninternet outage, but it will be resumed automatically once the problem is gone.\n\nIf you want to use your own data source, see [Offline Mode](#offline-mode).\n\n## Get Started\n\n### Installation\n\nThe latest stable version is available on [NuGet](https://www.nuget.org/packages/FeatBit.ServerSdk/).\n\n```sh\ndotnet add package FeatBit.ServerSdk\n```\n\nUse the `--version` option to specify\na [preview version](https://www.nuget.org/packages/FeatBit.ServerSdk/absoluteLatest) to install.\n\n### Prerequisite\n\nBefore using the SDK, you need to obtain the environment secret and SDK URLs.\n\nFollow the documentation below to retrieve these values\n\n- [How to get the environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get the SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n### Quick Start\n\nThe following code demonstrates basic usage of FeatBit.ServerSdk.\n\n```cs\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\nusing FeatBit.Sdk.Server.Options;\n\n// setup SDK options\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Event(new Uri(\"<replace-with-your-event-url>\"))\n    .Streaming(new Uri(\"<replace-with-your-streaming-url>\"))\n    .Build();\n\n// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\nif (!client.Initialized)\n{\n    Console.WriteLine(\"FbClient failed to initialize. All Variation calls will use fallback value.\");\n}\nelse\n{\n    Console.WriteLine(\"FbClient successfully initialized!\");\n}\n\n// flag to be evaluated\nconst string flagKey = \"game-runner\";\n\n// create a user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n// evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n\n// close the client to ensure that all insights are sent out before the app exits\nawait client.CloseAsync();\n```\n\n### Examples\n\n- [Console App](/examples/ConsoleApp/Program.cs)\n- [ASP.NET Core](/examples/WebApiApp/Program.cs)\n\n## SDK\n\n### FbClient\n\nThe FbClient is the heart of the SDK which providing access to FeatBit server. Applications should instantiate a **single instance** for the lifetime of the application.\n\n#### FbClient Using Default Options\n\n```csharp\nusing FeatBit.Sdk.Server;\n\n// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n```\n\n#### FbClient Using Custom Options\n\n```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Options;\nusing Microsoft.Extensions.Logging;\n\nvar consoleLoggerFactory = LoggerFactory.Create(x => x.AddConsole());\n\nvar options = new FbOptionsBuilder(\"<replace-with-your-env-secret>\")\n    .Streaming(new Uri(\"ws://localhost:5100\"))\n    .Event(new Uri(\"http://localhost:5100\"))\n    .StartWaitTime(TimeSpan.FromSeconds(3))\n    .LoggerFactory(consoleLoggerFactory)\n    .Build();\n\n// Creates a new client instance that connects to FeatBit with the custom option.\nvar client = new FbClient(options);\n```\n\n#### Dependency Injection\n\nWe can register the FeatBit services using standard conventions.\n\n> **Note**\n> The `AddFeatBit` extension method will block the current thread for a maximum duration specified in `FbOptions.StartWaitTime`.\n\n```csharp\nusing FeatBit.Sdk.Server.DependencyInjection;\n\nvar builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddControllers();\n\n// add FeatBit service\nbuilder.Services.AddFeatBit(options =>\n{\n    options.EnvSecret = \"<replace-with-your-env-secret>\";\n    options.StreamingUri = new Uri(\"ws://localhost:5100\");\n    options.EventUri = new Uri(\"http://localhost:5100\");\n    options.StartWaitTime = TimeSpan.FromSeconds(3);\n});\n\nvar app = builder.Build();\napp.Run();\n```\n\nThen the `IFbClient` interface can be obtained through dependency injection.\n\n```csharp\npublic class HomeController : ControllerBase\n{\n    private readonly IFbClient _fbClient;\n\n    public HomeController(IFbClient fbClient)\n    {\n        _fbClient = fbClient;\n    }\n}\n```\n\n### FbUser\n\nFbUser defines the attributes of a user for whom you are evaluating feature flags. FbUser has two built-in\nattributes: `key` and `name`. The only mandatory attribute of a FbUser is the key, which must uniquely identify each\nuser.\n\nBesides these built-in properties, you can define any additional attributes associated with the user\nusing `Custom(string key, string value)` method on `IFbUserBuilder`. Both built-in attributes and custom attributes can\nbe referenced in targeting rules, and are included in analytics data.\n\nThere is only one method for building FbUser.\n\n```csharp\nvar bob = FbUser.Builder(\"a-unique-key-of-user\")\n    .Name(\"bob\")\n    .Custom(\"age\", \"15\")\n    .Custom(\"country\", \"FR\")\n    .Build();\n```\n\n### Evaluating flags\n\nBy using the feature flag data it has already received, the SDK **locally calculates** the value of a feature flag for a\ngiven user.\n\nThere is a `Variation` method that returns a flag value, and a `VariationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n- BoolVariation/BoolVariationDetail\n- StringVariation/StringVariationDetail\n- DoubleVariation/DoubleVariationDetail\n- FloatVariation/FloatVariationDetail\n- IntVariation/IntVariationDetail\n- JsonVariation/JsonVariationDetail (in consideration)\n\n> **Note**\n> Since the current version does not have native support for retrieving JSON variations, you can use the `StringVariation` method as an alternative to get the JSON string.\n\nVariation calls take the feature flag key, a FbUser, and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n```csharp\nusing FeatBit.Sdk.Server;\nusing FeatBit.Sdk.Server.Model;\n\n// Creates a new client instance that connects to FeatBit with the default option.\nvar client = new FbClient(\"<replace-with-your-env-secret>\");\n\n// The flag key to be evaluated\nconst string flagKey = \"game-runner\";\n\n// The user\nvar user = FbUser.Builder(\"anonymous\").Build();\n\n// Evaluate a boolean flag for a given user\nvar boolVariation = client.BoolVariation(flagKey, user, defaultValue: false);\nConsole.WriteLine($\"flag '{flagKey}' returns {boolVariation} for user {user.Key}\");\n\n// evaluate a boolean flag for a given user with evaluation detail\nvar boolVariationDetail = client.BoolVariationDetail(flagKey, user, defaultValue: false);\nConsole.WriteLine(\n    $\"flag '{flagKey}' returns {boolVariationDetail.Value} for user {user.Key}. \" +\n    $\"Reason Kind: {boolVariationDetail.Kind}, Reason Description: {boolVariationDetail.Reason}\"\n);\n```\n\n### Offline Mode\n\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\n\n```csharp\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .Build();\n\nvar client = new FbClient(options);\n```\n\nWhen you put the SDK in offline mode, no events are sent to the server and all feature flag evaluations return\nfallback values because there are no feature flags or segments available. If you want to use your own data source in\nthis case, the sdk allows users to populate feature flags and segments data from a JSON string. Here is an\nexample: [featbit-bootstrap.json](/tests/FeatBit.ServerSdk.Tests/Bootstrapping/featbit-bootstrap.json).\n\n> **_NOTE:_** Populating data from a JSON string is only supported in offline mode.\n\nThe format of the data in flags and segments is defined by FeatBit and is subject to change. Rather than trying to\nconstruct these objects yourself, it's simpler to request existing flags directly from the FeatBit server in JSON format\nand use this output as the starting point for your file. Here's how:\n\n```shell\n# replace http://localhost:5100 with your evaluation server url\ncurl -H \"Authorization: <your-env-secret>\" http://localhost:5100/api/public/sdk/server/latest-all > featbit-bootstrap.json\n```\n\nThen use that file to initialize FbClient:\n\n```csharp\nusing FeatBit.Sdk.Server.Options;\n\nvar json = File.ReadAllText(\"featbit-bootstrap.json\");\n\nvar options = new FbOptionsBuilder()\n    .Offline(true)\n    .UseJsonBootstrapProvider(json)\n    .Build();\n\nvar client = new FbClient(options);\n```\n\n### Disable Events Collection\n\nBy default, the SDK automatically sends events (flag evaluation events and metric events for A/B testing) to the FeatBit\nserver, unless the SDK is in offline mode.\n\nIf you prefer to disable this event collection while the SDK is in online mode, you\ncan configure this behavior using the `DisableEvents` option.\n\n```csharp\nvar options = new FbOptionsBuilder()\n    .DisableEvents(true)\n    .Build();\n```\n\n### Experiments (A/B/n Testing)\n\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n```csharp\nclient.Track(user, eventName, numericValue);\n```\n\n**numericValue** is not mandatory, the default value is **1.0**.\n\nMake sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n## Supported .NET versions\n\nThis version of the SDK is built for the following targets:\n\n- .NET 6.0: runs on .NET 6.0 and above (including higher major versions).\n- .NET Core 3.1: runs on .NET Core 3.1+.\n- .NET Framework 4.6.2: runs on .NET Framework 4.6.2 and above.\n- .NET Standard 2.0/2.1: runs in any project that is targeted to .NET Standard 2.x rather than to a specific runtime\n  platform.\n\nThe .NET build tools should automatically load the most appropriate build of the SDK for whatever platform your\napplication or library is targeted to.\n\n> **_NOTE:_** This SDK requires the `System.Text.Json` API to be available, which is included in the runtime for .NET\n> Core 3.1 and later versions, but not on other platforms, so on other platforms the SDK brings\n> in `System.Text.Json` as a NuGet package dependency.\n\n## Getting support\n\n- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n## See Also\n\n- [Connect To .NET Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#net)",
        "label": "LIv4dK",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 528,
        "height": 400
      },
      "selected": false,
      "width": 528,
      "height": 400,
      "resizing": false,
      "dragging": false
    },
    {
      "id": "EZy7x-",
      "position": {
        "x": -80,
        "y": -1920
      },
      "data": {
        "content": "> **Attention**\n>\n> If you are using the v1 or v2 of the SDK, please refer to this [doc](https://github.com/featbit/featbit-js-client-sdk/tree/v2)\n\n# FeatBit Client SDK for JavaScript\n\n## Introduction\n\nThis is the Client-Side SDK for the 100% open-source feature flags management platform [FeatBit](https://github.com/featbit/featbit).\n\nBe aware, this is a client side SDK, it is intended for use in a single-user context, which can be mobile, desktop or embedded applications. This SDK can only be ran in a browser environment, it is not suitable for NodeJs applications.\n\n## Get Started\n\n### Installation\n\n```bash\nnpm install --save @featbit/js-client-sdk\n```\n### Prerequisite\n\nBefore using the SDK, you need to obtain the environment secret (the sdkKey) and SDK URLs.\n\nFollow the documentation below to retrieve these values\n- [How to get environment secret](https://docs.featbit.co/sdk/faq#how-to-get-the-environment-secret)\n- [How to get SDK URLs](https://docs.featbit.co/sdk/faq#how-to-get-the-sdk-urls)\n\n### Quick Start\n\nThe following code demonstrates the basic usage of `@featbit/js-client-sdk`.\n\n```javascript\nimport { FbClientBuilder, UserBuilder } from \"@featbit/js-client-sdk\";\n\nconst bob = new UserBuilder('a-unique-key-of-user')\n    .name('bob')\n    .custom('age', '18')\n    .custom('country', 'FR')\n    .build();\n\n// setup SDK client with websocket streaming\nconst fbClient = new FbClientBuilder()\n    .sdkKey(\"your_sdk_key\")\n    .streamingUri('ws://localhost:5100')\n    .eventsUri(\"http://localhost:5100\")\n    .user(bob)\n    .build();\n\n(async () => {\n  // wait for the SDK to be initialized\n  try {\n    await fbClient.waitForInitialization();\n  } catch(err) {\n    // failed to initialize the SDK\n    console.log(err);\n  }\n\n  // flag to be evaluated\n  const flagKey = \"game-runner\";\n\n  // evaluate a feature flag for a given user\n  const boolVariation = await fbClient.boolVariation(flagKey, false);\n\n  // switch user\n  const alice = new UserBuilder('another-unique-key-of-user')\n      .name('alice')\n      .custom('country', 'UK')\n      .custom('age', 36)\n      .build();\n  \n  await fbClient.identify(alice);\n})();\n```\n\n## Examples\n- [web App](./examples/console-app)\n- For how to use FeatBit with React, please refer to the [react-client-sdk](https://github.com/featbit/featbit-react-client-sdk)\n\n## SDK\n\n### FbClient\n\nThe `FbClient` is the heart of the SDK which provides access to FeatBit server. Applications should instantiate a single instance for the lifetime of the application.\n\n`FbClientBuilder` is used to construct a `FbClient` instance. The builder exposes methods to configure the SDK, and finally to create the `FbClient` instance.\n\n#### FbClient Using Streaming\n\n```javascript\nimport { FbClientBuilder, UserBuilder } from \"@featbit/js-client-sdk\";\n\nconst user = new UserBuilder('a-unique-key-of-user')\n    .name('bob')\n    .build();\n    \nconst fbClient = new FbClientBuilder()\n    .sdkKey(\"your_sdk_key\")\n    .streamingUri('ws://localhost:5100')\n    .eventsUri(\"http://localhost:5100\")\n    .user(user)\n    .build();\n```\n#### FbClient Using Polling\n\n```javascript\nimport { FbClientBuilder, UserBuilder, DataSyncModeEnum } from \"@featbit/js-client-sdk\";\n\nconst user = new UserBuilder('a-unique-key-of-user')\n    .name('bob')\n    .build();\n\nconst fbClient = new FbClientBuilder()\n    .sdkKey(\"your_sdk_key\")\n    .dataSyncMode(DataSyncModeEnum.POLLING)\n    .pollingUri('http://localhost:5100')\n    .eventsUri(\"http://localhost:5100\")\n    .pollingInterval(10000)\n    .build();\n```\n\n#### IUser\n\n`IUser` defines the attributes of a user for whom you are evaluating feature flags. IUser has two built-in attributes: key and name. The only mandatory attribute of a IUser is the key, which must uniquely identify each user.\n\nBesides these built-in properties, you can define any additional attributes associated with the user using `custom(string key, string value)` method on UserBuilder. Both built-in attributes and custom attributes can be referenced in targeting rules, and are included in analytics data.\n\n`UserBuilder` is used to construct a `IUser` instance. The builder exposes methods to configure the IUser, and finally to create the IUser instance.\n\n```javascript\nimport { UserBuilder } from \"@featbit/js-client-sdk\";\n\nconst bob = new UserBuilder(\"unique_key_for_bob\")\n    .name(\"Bob\")\n    .custom('age', 18)\n    .custom('country', 'FR')\n    .build();\n```\n\n### Bootstrap\nIf you already have the feature flags available, you can pass them to the SDK instead of requesting from the remote.\n\n\n> **_NOTE:_** The bootstrapped flags will be overridden by the remote flags if they are available.\n\n```javascript\n// define the option with the bootstrap parameter\nconst options = {\n  ...\n  bootstrap = [{\n    // feature flag key name\n    id: string,\n    // variation value\n    variation: string,\n    // variation data type, string will be used if not specified\n    variationType: VariationDataType\n  }]\n}\n\nconst fbClient = new FbClientBuilder(options).build();\n// or\nconst fbClient = new FbClientBuilder()\n    //... other options\n    .bootstrap(options.bootstrap)\n    .build();\n```\n\n### Evaluation\n\nAfter initialization, the SDK has all the feature flags locally, and it does not need to request the remote server for any feature flag evaluation. All evaluation is done locally and synchronously, the average evaluation time is less than 1 ms.\n\nThere is a `variation` method that returns a flag value, and a `variationDetail` method that returns an object\ndescribing how the value was determined for each type.\n\n- boolVariation/boolVariationDetail\n- stringVariation/stringVariationDetail\n- numberVariation/numberVariationDetail\n- jsonVariation/jsonVariationDetail\n\nVariation calls take the feature flag key and a default value. If any error makes it impossible to\nevaluate the flag (for instance, the feature flag key does not match any existing flag), default value is returned.\n\n```javascript\n// flag to be evaluated\nconst flagKey = \"game-runner\";\n\n// evaluate a feature flag for a given user\nconst boolVariation = await fbClient.boolVariation(flagKey, false);\n\n// evaluate a boolean flag for a given user with evaluation detail\nconst boolVariationDetail = await fbClient.boolVariationDetail(flagKey, false);\n```\n\n### Offline Mode\n\nIn some situations, you might want to stop making remote calls to FeatBit. Here is how:\n```javascript\nimport { FbClientBuilder } from \"@featbit/browser-server-sdk\";\n\nconst fbClient = new FbClientBuilder()\n    //... other options\n    .offline(true)\n    .build();\n\n```\nWhen Offline mode is enabled, you should provide the flags with the [bootstrap](#bootstrap) option,\notherwise, the SDK would return the defaul value you passed to the `variation` method.\n\n### Events\n\n#### Wait for ready\n\nTo find out when the client is ready, you can use one of two mechanisms: events or promises.\n\nThe client object can emit JavaScript events. It emits a ready event when it receives initial flag values from the server. You can listen for this event to determine when the client is ready to evaluate flags.\n\n```javascript\nfbClient.on('ready', () => {\n  var flagValue = fbClient.variation(\"YOUR_FEATURE_KEY\", defaultValue);\n});\n```\n\nOr, you can use a promise instead of an event. The SDK has a method that returns a promise for initialization: **waitForInitialization()**. The behavior of waitUntilReady() is equivalent to the ready event. The promise resolves when the client receives its initial flag data. As with all promises, you can either use .then() to provide a callback, or use await if you are writing asynchronous code.\n\n```javascript\nfbClient.waitForInitialization().then((data) => {\n  // data has the following structure [ {id: 'featureFlagKey', variation: variationValue } ]\n  // variationValue has the type as defined on remote\n  // initialization succeeded, flag values are now available\n});\n// or, with await:\nconst featureFlags = await fbClient.waitForInitialization();\n// initialization succeeded, flag values are now available\n```\n\nThe SDK only decides initialization has failed if it receives an error response indicating that the environment ID is invalid. If it has trouble connecting to FeatBit, it will keep retrying until it succeeds.\n\n#### Subscribe to flag(s) changes\n\nTo get notified when a feature flag is changed, we offer two methods\n- subscribe to the changes of any feature flag(s)\n\n```javascript\nfbClient.on('update', (keys: string[]) => {\n  // do something when any feature flag changes\n});\n\n```\n- subscribe to the changes of a specific feature flag\n\n```javascript\n// replace feature_flag_key with your feature flag key\nfbClient.on('update:feature_flag_key', (key) => {\n  const myFeature = fbClient.variation('feature_flag_key', defaultValue);\n});\n\n```\n\n### Switch user after initialization\nIf the user changed after some process, login for example, the following method can be used to set the user after initialization.\n\n```javascript\nawait fbClient.identify(user);\n```\n\n\n### Data synchronization\n\nWe use **WebSocket** or **Polling** to make the local data synchronized with the server, and then store them in localStorage by default. Whenever there is any change to a feature flag or its related data, this change will be pushed to the SDK, the average synchronization time is less than **100ms** if WebSocket is configured. Be aware the WebSocket/Polling connection may be interrupted due to internet outage, but it will be resumed automatically once the problem is gone.\n\n### Network failure handling\n\nAs all data is stored locally in the localStorage, in the following situations, the SDK would still work when there is temporarily no internet connection:\n- it has already received the data from previous connections\n- the `fbClient.bootstrap(featureFlags)` method is called with all necessary feature flags\n\nIn the meantime, the SDK would try to reconnect to the server by an incremental interval, this makes sure that the websocket would be restored when the internet connection is back.\n\n### Experiments (A/B/n Testing)\n\nWe support automatic experiments for pageviews and clicks, you just need to set your experiment on our SaaS platform,\nthen you should be able to see the result in near real time after the experiment is started.\n\nIn case you need more control over the experiment data sent to our server, we offer a method to send custom event.\n\n```javascript\nfbClient.track(eventName, numericValue);\n```\n\n**numericValue** is not mandatory, the default value is **1.0**.\n\nMake sure `track` is called after the related feature flag is called, otherwise the custom event won't be included\ninto the experiment result.\n\n## Getting support\n- If you have a specific question about using this sdk, we encourage you\n  to [ask it in our slack](https://join.slack.com/t/featbit/shared_invite/zt-1ew5e2vbb-x6Apan1xZOaYMnFzqZkGNQ).\n- If you encounter a bug or would like to request a\n  feature, [submit an issue](https://github.com/featbit/dotnet-server-sdk/issues/new).\n\n## See Also\n- [Connect To JavaScript Sdk](https://docs.featbit.co/getting-started/connect-an-sdk#javascript)",
        "label": "EZy7x-",
        "isLoading": false,
        "locked": false,
        "isInput": false,
        "isOutput": false,
        "editable": false
      },
      "type": "text",
      "measured": {
        "width": 560,
        "height": 384
      },
      "selected": false,
      "width": 560,
      "height": 384,
      "resizing": false,
      "dragging": false
    }
  ],
  "edges": [
    {
      "source": "HGub16",
      "sourceHandle": "HGub16-d",
      "target": "search-1741588175536",
      "targetHandle": "search-1741588175536-d",
      "id": "connection-1741588178853",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      }
    },
    {
      "source": "search-1741588175536",
      "sourceHandle": "search-1741588175536-c",
      "target": "y60AiK",
      "targetHandle": "y60AiK-d",
      "id": "connection-1741588186936",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    },
    {
      "source": "llm-1741588243599",
      "sourceHandle": "llm-1741588243599-b",
      "target": "TSPk1p",
      "targetHandle": "TSPk1p-d",
      "id": "connection-1741588260913",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    },
    {
      "source": "TSPk1p",
      "sourceHandle": "TSPk1p-c",
      "target": "modify-1741588325661",
      "targetHandle": "modify-1741588325661-d",
      "id": "connection-1741588344810",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      }
    },
    {
      "source": "modify-1741588325661",
      "sourceHandle": "modify-1741588325661-c",
      "target": "O7JwCn",
      "targetHandle": "O7JwCn-d",
      "id": "connection-1741588356066",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    },
    {
      "source": "O7JwCn",
      "sourceHandle": "O7JwCn-c",
      "target": "search-1741588175536",
      "targetHandle": "search-1741588175536-d",
      "id": "connection-1741588359034",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      }
    },
    {
      "id": "connection-1741588460422",
      "source": "y60AiK",
      "target": "llm-1741588460405",
      "type": "floating"
    },
    {
      "source": "HGub16",
      "sourceHandle": "HGub16-b",
      "target": "llm-1741588460405",
      "targetHandle": "llm-1741588460405-d",
      "id": "connection-1741588466937",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      }
    },
    {
      "source": "llm-1741588460405",
      "sourceHandle": "llm-1741588460405-b",
      "target": "HEQ1Z_",
      "targetHandle": "HEQ1Z_-d",
      "id": "connection-1741588478186",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    },
    {
      "id": "connection-1741953758457",
      "source": "EZy7x-",
      "target": "modify-1741953758449",
      "type": "floating"
    },
    {
      "source": "LIv4dK",
      "sourceHandle": "LIv4dK-c",
      "target": "modify-1741953758449",
      "targetHandle": "modify-1741953758449-d",
      "id": "connection-1741953763698",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      },
      "selected": false
    },
    {
      "source": "Nyce_M",
      "sourceHandle": "Nyce_M-c",
      "target": "modify-1741953758449",
      "targetHandle": "modify-1741953758449-d",
      "id": "connection-1741953766231",
      "type": "floating",
      "data": {
        "connectionType": "STC"
      },
      "selected": false
    },
    {
      "id": "connection-1741953795349",
      "source": "modify-1741953758449",
      "target": "imlZMZ",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    },
    {
      "id": "connection-1741953801611",
      "source": "imlZMZ",
      "target": "modify-1741953801598",
      "type": "floating"
    },
    {
      "id": "connection-1741953808756",
      "source": "modify-1741953801598",
      "target": "pdEGCS",
      "type": "floating",
      "data": {
        "connectionType": "CTT"
      },
      "markerEnd": {
        "type": "arrowclosed",
        "width": 8,
        "height": 20,
        "color": "#CDCDCD",
        "strokeWidth": 0.1
      }
    }
  ],
  "viewport": {
    "x": 818.5790782087421,
    "y": 1531.6996733593162,
    "zoom": 0.7795818930965406
  }
}