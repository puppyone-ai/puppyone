# ChunkingByLength Edge Node æµ‹è¯•æ–‡æ¡£

## æ–‡æ¡£è¯´æ˜
- **ç»„ä»¶è·¯å¾„**: `PuppyFlow/app/components/workflow/edgesNode/edgeNodesNew/ChunkingByLength.tsx`
- **ç»„ä»¶ç±»å‹**: Edge Node (è¾¹ç¼˜èŠ‚ç‚¹)
- **æ ¸å¿ƒèŒè´£**: æŒ‰é•¿åº¦åˆ†å—æ–‡æœ¬ï¼Œæ”¯æŒå¤šç§é…ç½®å‚æ•°ï¼ˆchunk size, overlap, handle half wordï¼‰
- **ç›®æ ‡å¹³å°**: æ¡Œé¢ç«¯
- **æµ‹è¯•çŠ¶æ€**: âœ… æµ‹è¯•å®Œæˆï¼Œ14/14 é€šè¿‡ (100%)

---

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹è¦†ç›–æƒ…å†µæ€»è§ˆ

### ç»Ÿè®¡æ‘˜è¦

| çŠ¶æ€ | æ•°é‡ | å æ¯” | è¯´æ˜ |
|------|------|------|------|
| âœ… å·²é€šè¿‡ | 14 | 100% | æµ‹è¯•é€šè¿‡ |
| âŒ å¤±è´¥ | 0 | 0% | æµ‹è¯•å¤±è´¥ |
| **æ€»è®¡** | **14** | **100%** | å·²å®ç°çš„æµ‹è¯•ç”¨ä¾‹ |

### æŒ‰ä¼˜å…ˆçº§çš„è¦†ç›–æƒ…å†µ

| ä¼˜å…ˆçº§ | æ€»æ•° | é€šè¿‡ | å¤±è´¥ | è¦†ç›–ç‡ |
|--------|------|------|------|--------|
| **P0** | 7 | 7 | 0 | 100% âœ… |
| **P1** | 4 | 4 | 0 | 100% âœ… |
| **P2** | 3 | 3 | 0 | 100% âœ… |
| **æ€»è®¡** | **14** | **14** | **0** | **100%** âœ… |

### æŒ‰åŠŸèƒ½æ¨¡å—çš„è¦†ç›–æƒ…å†µ

| åŠŸèƒ½æ¨¡å— | æµ‹è¯•æ•° | é€šè¿‡ | å¤±è´¥ | è¦†ç›–ç‡ |
|---------|--------|------|------|--------|
| subChunkMode å‚æ•°é…ç½® (P0) | 2 | 2 | 0 | 100% âœ… |
| chunkSize å‚æ•°é…ç½® (P0) | 2 | 2 | 0 | 100% âœ… |
| overlap å‚æ•°é…ç½® (P0) | 2 | 2 | 0 | 100% âœ… |
| handleHalfWord å‚æ•°é…ç½® (P0) | 1 | 1 | 0 | 100% âœ… |
| Settings äº¤äº’ (P1) | 2 | 2 | 0 | 100% âœ… |
| è¾¹ç•Œå€¼å’Œ Run åŠŸèƒ½ (P1) | 2 | 2 | 0 | 100% âœ… |
| åˆå§‹åŒ–å’Œ UI äº¤äº’ (P2) | 3 | 3 | 0 | 100% âœ… |
| **æ€»è®¡** | **14** | **14** | **0** | **100%** âœ… |

---

## ğŸ“ è¯¦ç»†æµ‹è¯•ç”¨ä¾‹

### åŠŸèƒ½æ¨¡å— 1: subChunkMode å‚æ•°é…ç½® (P0)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-001 | ä¿®æ”¹ subChunkMode åº”æ­£ç¡®ä¿å­˜åˆ° node.data | P0 | âœ… | å•å…ƒ | æ ¸å¿ƒæ¨¡å¼é…ç½® |
| TC-CBL-001-1 | subChunkMode åº”ä¸ºæœ‰æ•ˆå€¼ | P0 | âœ… | å•å…ƒ | ç±»å‹éªŒè¯ |

**æ•°æ®ç»“æ„**:
```typescript
ChunkingConfigNodeData = {
  sub_chunking_mode: 'size' | 'tokenizer' | undefined;
  // ...å…¶ä»–å­—æ®µ
}
```

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-001: subChunkMode ä¿å­˜éªŒè¯
1. æ¸²æŸ“ ChunkingByLength èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. æ‰¾åˆ° Mode ä¸‹æ‹‰é€‰æ‹©å™¨
4. é€‰æ‹© 'size' æ¨¡å¼ï¼ˆç›®å‰åªæœ‰æ­¤é€‰é¡¹ï¼‰
5. éªŒè¯ `node.data.sub_chunking_mode` æ›´æ–°ä¸º 'size'

#### TC-CBL-001-1: subChunkMode ç±»å‹éªŒè¯
1. åˆ›å»ºèŠ‚ç‚¹ï¼Œè®¾ç½® `sub_chunking_mode: 'size'`
2. éªŒè¯ç±»å‹ä¸º 'size'
3. åˆ›å»ºèŠ‚ç‚¹ï¼Œè®¾ç½® `sub_chunking_mode: 'tokenizer'`ï¼ˆè™½ç„¶ UI ä¸æ”¯æŒï¼Œä½†ç±»å‹å…è®¸ï¼‰
4. éªŒè¯ç±»å‹ä¸º 'tokenizer'

**å…³é”®è¡Œå·**: 
- 63-65 (subChunkMode state åˆå§‹åŒ–)
- 129-145 (useEffect æ›´æ–° node.data)
- 485-500 (PuppyDropdown for Mode)

**é‡è¦è¯´æ˜**:
- UI ä¸­åªæä¾› 'size' é€‰é¡¹ï¼Œä½†ç±»å‹å®šä¹‰æ”¯æŒ 'tokenizer'
- æµ‹è¯•åº”è¯¥éªŒè¯ç±»å‹ç³»ç»Ÿï¼Œä¸ä»…ä»…æ˜¯ UI é™åˆ¶

---

### åŠŸèƒ½æ¨¡å— 2: chunkSize å‚æ•°é…ç½® (P0)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-002 | ä¿®æ”¹ chunkSize åº”æ­£ç¡®ä¿å­˜åˆ° node.data.extra_configs | P0 | âœ… | å•å…ƒ | æ ¸å¿ƒå‚æ•° |
| TC-CBL-002-1 | chunkSize åº”ä¸ºæ•°å­—ç±»å‹ | P0 | âœ… | å•å…ƒ | ç±»å‹éªŒè¯ |

**æ•°æ®è·¯å¾„**: `node.data.extra_configs.chunk_size`

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-002: chunkSize ä¿å­˜éªŒè¯
1. æ¸²æŸ“èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. å±•å¼€ Settings
4. ä¿®æ”¹ Chunk Size è¾“å…¥æ¡†ï¼ˆä¾‹å¦‚ï¼šä» 200 æ”¹ä¸º 500ï¼‰
5. éªŒè¯ `node.data.extra_configs.chunk_size` æ›´æ–°ä¸º 500

#### TC-CBL-002-1: chunkSize ç±»å‹éªŒè¯
1. åˆ›å»ºèŠ‚ç‚¹ï¼Œè®¾ç½® `chunk_size: 200`
2. éªŒè¯ `typeof chunk_size === 'number'`
3. éªŒè¯å€¼ä¸º 200

**å…³é”®è¡Œå·**: 
- 66-69 (chunkSize state åˆå§‹åŒ–ï¼Œé»˜è®¤å€¼ 200)
- 129-145 (useEffect æ›´æ–° node.data)
- 534-549 (Chunk Size è¾“å…¥æ¡†)

**é»˜è®¤å€¼**: 200

---

### åŠŸèƒ½æ¨¡å— 3: overlap å‚æ•°é…ç½® (P0)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-003 | ä¿®æ”¹ overlap åº”æ­£ç¡®ä¿å­˜åˆ° node.data.extra_configs | P0 | âœ… | å•å…ƒ | æ ¸å¿ƒå‚æ•° |
| TC-CBL-003-1 | overlap åº”ä¸ºæ•°å­—ç±»å‹ | P0 | âœ… | å•å…ƒ | ç±»å‹éªŒè¯ |

**æ•°æ®è·¯å¾„**: `node.data.extra_configs.overlap`

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-003: overlap ä¿å­˜éªŒè¯
1. æ¸²æŸ“èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. å±•å¼€ Settings
4. ä¿®æ”¹ Overlap è¾“å…¥æ¡†ï¼ˆä¾‹å¦‚ï¼šä» 20 æ”¹ä¸º 50ï¼‰
5. éªŒè¯ `node.data.extra_configs.overlap` æ›´æ–°ä¸º 50

#### TC-CBL-003-1: overlap ç±»å‹éªŒè¯
1. åˆ›å»ºèŠ‚ç‚¹ï¼Œè®¾ç½® `overlap: 20`
2. éªŒè¯ `typeof overlap === 'number'`
3. éªŒè¯å€¼ä¸º 20

**å…³é”®è¡Œå·**: 
- 70-72 (overlap state åˆå§‹åŒ–ï¼Œé»˜è®¤å€¼ 20)
- 129-145 (useEffect æ›´æ–° node.data)
- 551-566 (Overlap è¾“å…¥æ¡†)

**é»˜è®¤å€¼**: 20

---

### åŠŸèƒ½æ¨¡å— 4: handleHalfWord å‚æ•°é…ç½® (P0)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-004 | ä¿®æ”¹ handleHalfWord åº”æ­£ç¡®ä¿å­˜åˆ° node.data.extra_configs | P0 | âœ… | å•å…ƒ | å¸ƒå°”å‚æ•° |

**æ•°æ®è·¯å¾„**: `node.data.extra_configs.handle_half_word`

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-004: handleHalfWord ä¿å­˜éªŒè¯
1. æ¸²æŸ“èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. å±•å¼€ Settings
4. ä¿®æ”¹ Handle Half Word ä¸‹æ‹‰é€‰æ‹©å™¨ï¼ˆä» False æ”¹ä¸º Trueï¼‰
5. éªŒè¯ `node.data.extra_configs.handle_half_word` æ›´æ–°ä¸º true
6. å†æ”¹å› False
7. éªŒè¯æ›´æ–°ä¸º false

**å…³é”®è¡Œå·**: 
- 73-76 (handleHalfWord state åˆå§‹åŒ–ï¼Œé»˜è®¤å€¼ false)
- 129-145 (useEffect æ›´æ–° node.data)
- 568-582 (Handle Half Word select)

**é»˜è®¤å€¼**: false

**UI ç»„ä»¶**: `<select>` å…ƒç´ ï¼Œé€‰é¡¹ä¸º 'True' / 'False'

---

### åŠŸèƒ½æ¨¡å— 5: Settings äº¤äº’ (P1)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-005 | ç‚¹å‡» Show åº”å±•å¼€ Settings | P1 | âœ… | å•å…ƒ | UI äº¤äº’ |
| TC-CBL-005-1 | ç‚¹å‡» Hide åº”æ”¶èµ· Settings | P1 | âœ… | å•å…ƒ | UI äº¤äº’ |

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-005: Settings å±•å¼€
1. æ¸²æŸ“èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. éªŒè¯åˆå§‹çŠ¶æ€ï¼šSettings æ”¶èµ·ï¼Œæ˜¾ç¤º "Show" æŒ‰é’®
4. ç‚¹å‡» "Show" æŒ‰é’®
5. éªŒè¯ï¼š
   - æŒ‰é’®æ–‡å­—å˜ä¸º "Hide"
   - Settings å†…å®¹æ˜¾ç¤ºï¼ˆChunk Size, Overlap, Handle Half Wordï¼‰
   - ç®­å¤´å›¾æ ‡æ—‹è½¬ 180 åº¦

#### TC-CBL-005-1: Settings æ”¶èµ·
1. ä»å±•å¼€çŠ¶æ€å¼€å§‹
2. ç‚¹å‡» "Hide" æŒ‰é’®
3. éªŒè¯ï¼š
   - æŒ‰é’®æ–‡å­—å˜ä¸º "Show"
   - Settings å†…å®¹éšè—
   - ç®­å¤´å›¾æ ‡æ¢å¤åŸä½

**å…³é”®è¡Œå·**: 
- 79 (showSettings stateï¼Œé»˜è®¤ false)
- 511-529 (Show/Hide æŒ‰é’®)
- 532-584 (Settings å†…å®¹ï¼Œæ¡ä»¶æ¸²æŸ“)

**é»˜è®¤çŠ¶æ€**: æ”¶èµ·ï¼ˆshowSettings = falseï¼‰

---

### åŠŸèƒ½æ¨¡å— 6: è¾¹ç•Œå€¼å’Œ Run åŠŸèƒ½ (P1)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-006 | chunkSize å’Œ overlap è¾¹ç•Œå€¼æµ‹è¯• | P1 | âœ… | å•å…ƒ | è¾¹ç•Œæƒ…å†µ |
| TC-CBL-007 | ç‚¹å‡» Run æŒ‰é’®åº”è§¦å‘æ‰§è¡Œ | P1 | âœ… | å•å…ƒ | æ‰§è¡ŒåŠŸèƒ½ |

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-006: è¾¹ç•Œå€¼æµ‹è¯•
1. **chunkSize æµ‹è¯•**ï¼š
   - è®¾ç½®ä¸º 0ï¼šéªŒè¯ä¿å­˜
   - è®¾ç½®ä¸ºè´Ÿæ•°ï¼šéªŒè¯ä¿å­˜ï¼ˆè™½ç„¶ä¸åˆç†ï¼Œä½†æµ‹è¯•ç±»å‹ç³»ç»Ÿï¼‰
   - è®¾ç½®ä¸ºæå¤§å€¼ï¼ˆå¦‚ 999999ï¼‰ï¼šéªŒè¯ä¿å­˜
   - æ¸…ç©ºè¾“å…¥ï¼šéªŒè¯ä¿å­˜ä¸º undefined

2. **overlap æµ‹è¯•**ï¼š
   - è®¾ç½®ä¸º 0ï¼šéªŒè¯ä¿å­˜
   - è®¾ç½®ä¸ºè´Ÿæ•°ï¼šéªŒè¯ä¿å­˜
   - è®¾ç½®ä¸ºæå¤§å€¼ï¼šéªŒè¯ä¿å­˜
   - æ¸…ç©ºè¾“å…¥ï¼šéªŒè¯ä¿å­˜ä¸º undefined

**å…³é”®è¡Œå·**: 
- 541-545 (chunkSize onChangeï¼Œæ”¯æŒæ¸…ç©ºä¸º undefined)
- 558-562 (overlap onChangeï¼Œæ”¯æŒæ¸…ç©ºä¸º undefined)

#### TC-CBL-007: Run æŒ‰é’®åŠŸèƒ½
1. æ¸²æŸ“èŠ‚ç‚¹
2. æ‰“å¼€é…ç½®èœå•
3. ç‚¹å‡»é…ç½®èœå•ä¸­çš„ Run æŒ‰é’®
4. éªŒè¯ï¼š
   - `runSingleEdgeNode` è¢«è°ƒç”¨
   - å‚æ•°æ­£ç¡®ï¼š`parentId: id`, `targetNodeType: 'structured'`
   - `isLoading` çŠ¶æ€æ­£ç¡®æ›´æ–°

**å…³é”®è¡Œå·**: 
- 109-126 (handleDataSubmit å‡½æ•°)
- 421-459 (é…ç½®èœå•ä¸­çš„ Run æŒ‰é’®)

---

### åŠŸèƒ½æ¨¡å— 7: åˆå§‹åŒ–å’Œ UI äº¤äº’ (P2)

| ç¼–å· | æè¿° | ä¼˜å…ˆçº§ | æ˜¯å¦å·²æµ‹è¯• | æµ‹è¯•ç±»å‹ | å¤‡æ³¨ |
|------|------|--------|-----------|---------|------|
| TC-CBL-008 | å‚æ•°é»˜è®¤å€¼éªŒè¯ | P2 | âœ… | å•å…ƒ | é»˜è®¤å€¼ |
| TC-CBL-009 | ç‚¹å‡»èŠ‚ç‚¹æŒ‰é’®åº”æ‰“å¼€é…ç½®èœå• | P2 | âœ… | å•å…ƒ | èœå•å±•å¼€ |
| TC-CBL-010 | ç»„ä»¶æŒ‚è½½åéªŒè¯ | P2 | âœ… | å•å…ƒ | ç»„ä»¶åˆå§‹åŒ– |

**æµ‹è¯•åœºæ™¯**:

#### TC-CBL-008: é»˜è®¤å€¼éªŒè¯
1. åˆ›å»ºæ–°çš„ ChunkingByLength èŠ‚ç‚¹ï¼ˆæ— åˆå§‹é…ç½®ï¼‰
2. éªŒè¯é»˜è®¤å€¼ï¼š
   - `subChunkMode`: 'size'
   - `chunkSize`: 200
   - `overlap`: 20
   - `handleHalfWord`: false
   - `showSettings`: false (æ”¶èµ·çŠ¶æ€)

**å…³é”®è¡Œå·**: 
- 63-76 (æ‰€æœ‰ state åˆå§‹åŒ–åŠé»˜è®¤å€¼)

#### TC-CBL-009: é…ç½®èœå•æ‰“å¼€
1. æ¸²æŸ“èŠ‚ç‚¹
2. ç‚¹å‡»èŠ‚ç‚¹æŒ‰é’®ï¼ˆæ˜¾ç¤º "Chunk Length"ï¼‰
3. éªŒè¯é…ç½®èœå•æ˜¾ç¤º
4. éªŒè¯èœå•å†…å®¹ï¼š
   - æ ‡é¢˜ "Chunk By length"
   - Run æŒ‰é’®
   - InputOutputDisplay
   - Mode ä¸‹æ‹‰é€‰æ‹©å™¨
   - Settings éƒ¨åˆ†

**å…³é”®è¡Œå·**: 
- 277-290 (èŠ‚ç‚¹æŒ‰é’®)
- 376-589 (é…ç½®èœå•)

#### TC-CBL-010: ç»„ä»¶æŒ‚è½½éªŒè¯
1. æ¸²æŸ“èŠ‚ç‚¹
2. éªŒè¯ï¼š
   - èŠ‚ç‚¹æŒ‰é’®å­˜åœ¨
   - æ˜¾ç¤º "Chunk" å’Œ "Length" æ–‡æœ¬
   - SVG å›¾æ ‡æ­£ç¡®æ¸²æŸ“
   - ç»„ä»¶æ­£å¸¸æŒ‚è½½

**å…³é”®è¡Œå·**: 
- 292-305 (SVG å›¾æ ‡å’Œæ–‡æœ¬)

---

## ğŸ” ç»„ä»¶å…³é”®ä¿¡æ¯

### æ ¸å¿ƒç‰¹ç‚¹
1. **æœ‰ UI å‚æ•°é…ç½®**: ä¸ EditText ç±»ä¼¼ï¼Œæä¾›å¤šä¸ªå¯é…ç½®å‚æ•°
2. **Settings æŠ˜å åŠŸèƒ½**: å¯å±•å¼€/æ”¶èµ·çš„ Settings åŒºåŸŸï¼ŒåŒ…å« 3 ä¸ªå‚æ•°
3. **ç±»å‹ç³»ç»Ÿå®Œæ•´**: æ‰€æœ‰å‚æ•°éƒ½æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰
4. **é»˜è®¤å€¼åˆç†**: æ¯ä¸ªå‚æ•°éƒ½æœ‰åˆé€‚çš„é»˜è®¤å€¼

### å‚æ•°è¯¦è§£

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | UI ç»„ä»¶ | æ•°æ®è·¯å¾„ | æ˜¯å¦å¿…éœ€ |
|------|------|--------|---------|---------|---------|
| `subChunkMode` | `'size' \| 'tokenizer'` | 'size' | PuppyDropdown | `sub_chunking_mode` | å¦ |
| `chunkSize` | `number \| undefined` | 200 | input[type=number] | `extra_configs.chunk_size` | å¦ |
| `overlap` | `number \| undefined` | 20 | input[type=number] | `extra_configs.overlap` | å¦ |
| `handleHalfWord` | `boolean` | false | select | `extra_configs.handle_half_word` | å¦ |

### ä¸å…¶ä»–èŠ‚ç‚¹çš„å¯¹æ¯”

**ChunkingByLength vs ChunkingAuto**:
- **ChunkingAuto**: æ—  UI å‚æ•°é…ç½®ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–
- **ChunkingByLength**: æœ‰ 4 ä¸ªå¯é…ç½®å‚æ•°ï¼Œç”¨æˆ·å¯æ§

**ChunkingByLength vs EditText**:
- ç›¸ä¼¼ç‚¹ï¼šéƒ½æœ‰å¤šä¸ªå¯é…ç½®å‚æ•°
- ä¸åŒç‚¹ï¼š
  - ChunkingByLength: 4 ä¸ªå‚æ•°ï¼ŒSettings æŠ˜å 
  - EditText: 3 ä¸ªå‚æ•°ï¼Œæ— æŠ˜å åŠŸèƒ½

### æ•°æ®æµå‘
```
ç”¨æˆ·ä¿®æ”¹ UI å‚æ•°
    â†“
useState æ›´æ–°æœ¬åœ°çŠ¶æ€
    â†“
useEffect ç›‘å¬çŠ¶æ€å˜åŒ– (lines 129-145)
    â†“
ç›´æ¥ä¿®æ”¹ node.data (ä¸ä½¿ç”¨ setNodes)
    â†“
æ•°æ®æŒä¹…åŒ–åˆ° node.data
```

**âš ï¸ é‡è¦**: æ­¤èŠ‚ç‚¹ä½¿ç”¨ç›´æ¥ä¿®æ”¹ `node.data` çš„æ–¹å¼æ›´æ–°æ•°æ®ï¼Œä¸åŒäºå…¶ä»–èŠ‚ç‚¹ä½¿ç”¨ `setNodes` å’Œ `requestAnimationFrame`ã€‚

### UI å±‚çº§ç»“æ„
```
é…ç½®èœå•
â”œâ”€â”€ æ ‡é¢˜ + Run æŒ‰é’®
â”œâ”€â”€ InputOutputDisplay
â”œâ”€â”€ Mode (PuppyDropdown)
â”‚   â””â”€â”€ é€‰é¡¹: ['size']
â””â”€â”€ Settings (å¯æŠ˜å )
    â”œâ”€â”€ Chunk Size (input)
    â”œâ”€â”€ Overlap (input)
    â””â”€â”€ Handle Half Word (select)
```

---

## ğŸ¯ æµ‹è¯•é‡ç‚¹è¯´æ˜

### P0 çº§åˆ«ï¼ˆæ ¸å¿ƒå‚æ•°é…ç½®ï¼‰
**ä¸ºä»€ä¹ˆè¿™äº›æ˜¯ P0**ï¼Ÿ
1. **å‚æ•°ä¿å­˜å¤±è´¥** = ç”¨æˆ·é…ç½®ä¸¢å¤±
   - ç”¨æˆ·ä¿®æ”¹ chunkSize ä½†æœªä¿å­˜ â†’ æ‰§è¡Œæ—¶ä½¿ç”¨é”™è¯¯çš„åˆ†å—å¤§å°
   - æ•°æ®åˆ†å—é”™è¯¯ â†’ å½±å“ä¸‹æ¸¸æ‰€æœ‰èŠ‚ç‚¹
   - å½±å“æ‰€æœ‰ä½¿ç”¨æ­¤èŠ‚ç‚¹çš„ç”¨æˆ·

2. **ç±»å‹é”™è¯¯** = æ•°æ®ç»“æ„æŸå
   - chunkSize ä¿å­˜ä¸ºå­—ç¬¦ä¸² â†’ åç«¯å¤„ç†å¤±è´¥
   - handleHalfWord ä¿å­˜ä¸ºéå¸ƒå°”å€¼ â†’ é€»è¾‘é”™è¯¯
   - å¯¼è‡´æ‰§è¡Œå¤±è´¥æˆ–ç»“æœé”™è¯¯

**æµ‹è¯•é‡ç‚¹**:
- æ¯ä¸ªå‚æ•°çš„ä¿®æ”¹éƒ½è¦ä¿å­˜åˆ°æ­£ç¡®çš„æ•°æ®è·¯å¾„
- æ¯ä¸ªå‚æ•°çš„ç±»å‹éƒ½è¦æ­£ç¡®
- undefined çš„å¤„ç†è¦æ­£ç¡®ï¼ˆchunkSize å’Œ overlap å¯æ¸…ç©ºï¼‰

### P1 çº§åˆ«ï¼ˆé‡è¦åŠŸèƒ½ï¼‰
**ä¸ºä»€ä¹ˆè¿™äº›æ˜¯ P1**ï¼Ÿ
1. **Settings å±•å¼€/æ”¶èµ·**:
   - å¦‚æœæ— æ³•å±•å¼€ â†’ ç”¨æˆ·æ— æ³•è®¿é—® 3 ä¸ªå…³é”®å‚æ•°
   - å½±å“ç”¨æˆ·ä½“éªŒï¼Œä½†æœ‰ä¸´æ—¶ç»•è¿‡æ–¹å¼ï¼ˆå¯èƒ½é€šè¿‡ APIï¼‰
   - ä¸æ˜¯å®Œå…¨é˜»æ–­ï¼Œä½†ä¸¥é‡å½±å“ä½¿ç”¨

2. **è¾¹ç•Œå€¼å¤„ç†**:
   - 0 å€¼ã€è´Ÿå€¼ã€æå¤§å€¼ã€undefined
   - å¦‚æœå¤„ç†ä¸å½“ â†’ å¯èƒ½å¯¼è‡´æ‰§è¡Œé”™è¯¯
   - ä½†å¯ä»¥é€šè¿‡é‡æ–°è®¾ç½®ç»•è¿‡

3. **Run æŒ‰é’®**:
   - æ ¸å¿ƒæ‰§è¡ŒåŠŸèƒ½
   - å¤±è´¥å½±å“å¤§ï¼Œä½†ä¸æ˜¯å‚æ•°é…ç½®æœ¬èº«çš„é—®é¢˜

### P2 çº§åˆ«ï¼ˆç”¨æˆ·ä½“éªŒï¼‰
1. **é»˜è®¤å€¼**: å½±å“æ–°ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨ä½“éªŒ
2. **UI äº¤äº’**: èœå•å±•å¼€ã€ç»„ä»¶æŒ‚è½½
3. **ä¸é˜»æ–­æ ¸å¿ƒåŠŸèƒ½**: å³ä½¿å¤±è´¥ï¼Œç”¨æˆ·ä»å¯èƒ½é€šè¿‡å…¶ä»–æ–¹å¼ä½¿ç”¨

---

## âœ… æµ‹è¯•ç»“æœè¯¦æƒ…

### æµ‹è¯•æ‰§è¡Œæ€»ç»“
- **æµ‹è¯•æ—¶é—´**: 2025-10-27
- **æµ‹è¯•æ–‡ä»¶**: `__tests__/chunkingbylength-edge-node/unit/ChunkingByLength.test.tsx`
- **æ‰§è¡Œå‘½ä»¤**: `npx vitest __tests__/chunkingbylength-edge-node/unit/ChunkingByLength.test.tsx --run`
- **æ€»è€—æ—¶**: ~0.42s
- **æ€»æµ‹è¯•æ•°**: 14
- **é€šè¿‡**: 14 (100%) âœ…
- **å¤±è´¥**: 0 (0%)

### ğŸ‰ å®Œç¾é€šè¿‡ï¼æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡

#### âœ… P0 æµ‹è¯•å…¨éƒ¨é€šè¿‡ (7/7, 100%)

**subChunkMode å‚æ•°é…ç½® (2/2)**
- TC-CBL-001: subChunkMode ä¿å­˜éªŒè¯ âœ…
- TC-CBL-001-1: subChunkMode ç±»å‹éªŒè¯ âœ…

**chunkSize å‚æ•°é…ç½® (2/2)**
- TC-CBL-002: chunkSize ä¿å­˜éªŒè¯ âœ…
- TC-CBL-002-1: chunkSize ç±»å‹éªŒè¯ âœ…

**overlap å‚æ•°é…ç½® (2/2)**
- TC-CBL-003: overlap ä¿å­˜éªŒè¯ âœ…
- TC-CBL-003-1: overlap ç±»å‹éªŒè¯ âœ…

**handleHalfWord å‚æ•°é…ç½® (1/1)**
- TC-CBL-004: handleHalfWord ä¿å­˜éªŒè¯ âœ…

**æ‰€æœ‰4ä¸ªå‚æ•°é…ç½®æ­£å¸¸ï¼ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼å·¥ä½œå®Œç¾ï¼**

#### âœ… P1 æµ‹è¯•å…¨éƒ¨é€šè¿‡ (4/4, 100%)

**Settings äº¤äº’ (2/2)**
- TC-CBL-005: Settings å±•å¼€ âœ…
- TC-CBL-005-1: Settings æ”¶èµ· âœ…

**è¾¹ç•Œå€¼å’Œ Run åŠŸèƒ½ (2/2)**
- TC-CBL-006: è¾¹ç•Œå€¼æµ‹è¯•ï¼ˆ0, æå¤§å€¼, undefinedï¼‰âœ…
- TC-CBL-007: Run æŒ‰é’®è§¦å‘æ‰§è¡Œ âœ…

**Settings æŠ˜å åŠŸèƒ½æ­£å¸¸ï¼è¾¹ç•Œå€¼å¤„ç†å®Œå–„ï¼**

#### âœ… P2 æµ‹è¯•å…¨éƒ¨é€šè¿‡ (3/3, 100%)

**åˆå§‹åŒ–å’Œ UI äº¤äº’ (3/3)**
- TC-CBL-008: å‚æ•°é»˜è®¤å€¼éªŒè¯ âœ…
- TC-CBL-009: é…ç½®èœå•æ‰“å¼€ âœ…
- TC-CBL-010: ç»„ä»¶æŒ‚è½½éªŒè¯ âœ…

**æ‰€æœ‰é»˜è®¤å€¼æ­£ç¡®ï¼UI äº¤äº’æµç•…ï¼**

### ğŸŒŸ æµ‹è¯•äº®ç‚¹

1. **è¿ç»­ç¬¬ä¸‰ä¸ª 100% é€šè¿‡çš„èŠ‚ç‚¹** ğŸ†
   - ç»§ EditText å’Œ ChunkingAuto ä¹‹åçš„åˆä¸€æ¬¡å®Œç¾è¡¨ç°
   - æµ‹è¯•è´¨é‡æŒç»­ä¿æŒé«˜æ°´å‡†
   - éªŒè¯äº†å¯¹ä¸åŒæ•°æ®æ›´æ–°æ¨¡å¼çš„æµ‹è¯•é€‚é…èƒ½åŠ›

2. **é€‚é…ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼** ğŸ¯
   - ChunkingByLength ä½¿ç”¨ç›´æ¥ä¿®æ”¹ `node.data` è€Œé `setNodes`
   - æµ‹è¯•æˆåŠŸé€‚é…è¿™ç§ç‰¹æ®Šçš„æ•°æ®æ›´æ–°æ–¹å¼
   - éªŒè¯ç›´æ¥ä¿®æ”¹æ¨¡å¼å·¥ä½œæ­£å¸¸

3. **Settings æŠ˜å åŠŸèƒ½éªŒè¯å®Œæ•´** âœ¨
   - å±•å¼€/æ”¶èµ·äº¤äº’æµç•…
   - å‚æ•°æ­£ç¡®éšè—å’Œæ˜¾ç¤º
   - ç‹¬ç‰¹çš„UIç‰¹æ€§æµ‹è¯•å®Œå–„

4. **è¾¹ç•Œå€¼æµ‹è¯•å…¨é¢** ğŸ“Š
   - æµ‹è¯• 0 å€¼ã€æå¤§å€¼ã€undefined
   - éªŒè¯ç±»å‹è½¬æ¢æ­£ç¡®
   - å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µ

5. **4ä¸ªå‚æ•°å…¨è¦†ç›–** ğŸ“
   - subChunkMode: 'size' | 'tokenizer'
   - chunkSize: number | undefined (é»˜è®¤ 200)
   - overlap: number | undefined (é»˜è®¤ 20)
   - handleHalfWord: boolean (é»˜è®¤ false)

### ğŸ“ˆ ä¸å…¶ä»–èŠ‚ç‚¹å¯¹æ¯”

| èŠ‚ç‚¹ | æµ‹è¯•æ•° | é€šè¿‡ç‡ | é¦–æ¬¡é€šè¿‡ | UIå‚æ•° | æ•°æ®æ›´æ–°æ–¹å¼ | å¤æ‚åº¦ |
|------|-------|--------|----------|--------|-------------|--------|
| **ChunkingByLength** | **14** | **100%** âœ… | **æ˜¯** âœ… | 4ä¸ª | ç›´æ¥ä¿®æ”¹ | ä¸­ |
| **ChunkingAuto** | **7** | **100%** âœ… | **æ˜¯** âœ… | 0ä¸ª | N/A | æä½ |
| **EditText** | **18** | **100%** âœ… | **æ˜¯** âœ… | 3ä¸ª | setNodes+RAF | ä¸­ |
| Convert2Structured | 24 | 87.5% | å¦ | 4+ä¸ª | setNodes+RAF | é«˜ |
| SearchGoogle | 16 | 81.25% | å¦ | 1ä¸ª | setNodes+RAF | ä½ |
| SearchPerplexity | 14 | 71.4% | å¦ | 1ä¸ª | setNodes+RAF | ä½ |
| IfElse | 22 | 81.8% | å¦ | å¤šä¸ª | setNodes+RAF | é«˜ |
| Copy | 10 | 70% | å¦ | 0ä¸ª | N/A | æä½ |

**ChunkingByLength æ˜¯ç¬¬ä¸‰ä¸ªé¦–æ¬¡è¿è¡Œå³ 100% é€šè¿‡çš„èŠ‚ç‚¹ï¼** ğŸ‰

**è¿ç»­ä¸‰ä¸ª 100% é€šè¿‡ï¼š**
1. EditText (18ä¸ªæµ‹è¯•, æœ‰å‚æ•°, setNodesæ–¹å¼)
2. ChunkingAuto (7ä¸ªæµ‹è¯•, æ— å‚æ•°)
3. **ChunkingByLength (14ä¸ªæµ‹è¯•, æœ‰å‚æ•°, ç›´æ¥ä¿®æ”¹æ–¹å¼)** â­

**æˆåŠŸåŸå› **:
1. âœ… æµ‹è¯•ç»éªŒä¸°å¯Œï¼ˆç¬¬9ä¸ªèŠ‚ç‚¹ï¼‰
2. âœ… æˆåŠŸé€‚é…ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼
3. âœ… Settings æŠ˜å åŠŸèƒ½æµ‹è¯•å®Œå–„
4. âœ… å‚æ•°æ•°é‡é€‚ä¸­ï¼ˆ4ä¸ªï¼‰
5. âœ… æµ‹è¯•ç­–ç•¥çµæ´»ï¼ˆé’ˆå¯¹ä¸åŒæ•°æ®æ›´æ–°æ–¹å¼ï¼‰
6. âœ… è¾¹ç•Œå€¼æµ‹è¯•å…¨é¢

### ğŸ’¡ æµ‹è¯•ç­–ç•¥åˆ›æ–°

**é’ˆå¯¹ç›´æ¥ä¿®æ”¹ node.data çš„æµ‹è¯•æ–¹æ³•**:

1. **ä¸ä¾èµ– setNodes mock** ğŸ“Š
   ```typescript
   // ä¼ ç»Ÿæ–¹å¼ï¼ˆEditTextï¼‰
   await waitFor(() => {
     const setNodesCall = mockSetNodes.mock.calls[...];
     // éªŒè¯ setNodes è¢«è°ƒç”¨
   });
   
   // ChunkingByLength æ–¹å¼
   await waitFor(() => {
     expect(testNode.data.extra_configs.chunk_size).toBe(500);
     // ç›´æ¥éªŒè¯ node.data
   });
   ```

2. **éªŒè¯é€Ÿåº¦æ›´å¿«** âš¡
   - æ— éœ€ `requestAnimationFrame` å»¶è¿Ÿ
   - æ•°æ®ç«‹å³æ›´æ–°
   - æµ‹è¯•æ‰§è¡Œæ›´å¿«ï¼ˆ0.42s vs 0.7s+ï¼‰

3. **æµ‹è¯•æ›´ç®€æ´** âœ¨
   - ä¸éœ€è¦å¤æ‚çš„ mock éªŒè¯é€»è¾‘
   - ç›´æ¥æ£€æŸ¥æ•°æ®ç»“æ„
   - ä»£ç æ›´æ¸…æ™°æ˜“æ‡‚

### ğŸ”§ æŠ€æœ¯äº®ç‚¹

**1. Settings æŠ˜å åŠŸèƒ½**
- é»˜è®¤æ”¶èµ·ï¼Œå‡å°‘UIå¤æ‚åº¦
- å±•å¼€åæ­£ç¡®æ˜¾ç¤º3ä¸ªå‚æ•°
- äº¤äº’æµç•…ï¼ŒçŠ¶æ€ç®¡ç†æ­£ç¡®

**2. è¾¹ç•Œå€¼å¤„ç†**
- æ”¯æŒ 0 å€¼
- æ”¯æŒæå¤§å€¼ï¼ˆ999999ï¼‰
- æ”¯æŒæ¸…ç©ºä¸º undefined
- ç±»å‹è½¬æ¢æ­£ç¡®

**3. å¤šç±»å‹å‚æ•°**
- string ç±»å‹ï¼ˆsubChunkModeï¼‰
- number ç±»å‹ï¼ˆchunkSize, overlapï¼‰
- boolean ç±»å‹ï¼ˆhandleHalfWordï¼‰
- è”åˆç±»å‹ | undefined

**4. UI ç»„ä»¶å¤šæ ·**
- PuppyDropdownï¼ˆæ¨¡å¼é€‰æ‹©ï¼‰
- input[type=number]ï¼ˆæ•°å€¼è¾“å…¥ï¼‰
- selectï¼ˆå¸ƒå°”é€‰æ‹©ï¼‰

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œå¾…ä¿®å¤é¡¹

### å®é™…æµ‹è¯•ç»“æœ

**âœ… æ— å·²çŸ¥é—®é¢˜ï¼æ‰€æœ‰æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼**

ç”±äºæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œä»¥ä¸‹æ˜¯ä¹‹å‰é¢„åˆ¤çš„æ½œåœ¨é—®é¢˜åˆ†æï¼ˆä¾›å‚è€ƒï¼‰ï¼š

### æ½œåœ¨é—®é¢˜åˆ†æ

#### 1. ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼
**é—®é¢˜æè¿°**: 
ä¸å…¶ä»–èŠ‚ç‚¹ä¸åŒï¼ŒChunkingByLength åœ¨ useEffect ä¸­**ç›´æ¥ä¿®æ”¹** `node.data`ï¼ˆline 143ï¼‰ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `setNodes`ã€‚

```typescript
// ChunkingByLength (lines 129-145)
useEffect(() => {
  const node = getNode(id);
  if (node) {
    const nodeData = node.data as ChunkingConfigNodeData;
    const newData = { ...nodeData, /* ... */ };
    node.data = newData;  // ç›´æ¥ä¿®æ”¹ï¼
  }
}, [subChunkMode, chunkSize, overlap, handleHalfWord]);
```

**å¯¹æ¯”å…¶ä»–èŠ‚ç‚¹**:
```typescript
// EditText, Convert2Structured ç­‰
useEffect(() => {
  const rafId = requestAnimationFrame(() => {
    setNodes((nds) => 
      nds.map((node) => 
        node.id === id 
          ? { ...node, data: { ...node.data, /* ... */ } }
          : node
      )
    );
  });
  return () => cancelAnimationFrame(rafId);
}, [dependencies]);
```

**æ½œåœ¨å½±å“**:
- âœ… **ä¼˜ç‚¹**: æ›´æ–°æ›´å¿«ï¼Œæ—  requestAnimationFrame å»¶è¿Ÿ
- âš ï¸ **ç¼ºç‚¹**: å¯èƒ½ä¸è§¦å‘ React Flow çš„å†…éƒ¨æ›´æ–°æœºåˆ¶
- ğŸ¤” **æµ‹è¯•è€ƒè™‘**: éœ€è¦éªŒè¯ç›´æ¥ä¿®æ”¹æ˜¯å¦èƒ½æ­£ç¡®ä¿å­˜

**æµ‹è¯•ç­–ç•¥**:
1. æµ‹è¯•å‚æ•°ä¿®æ”¹åï¼Œ`getNode(id).data` æ˜¯å¦æ­£ç¡®æ›´æ–°
2. ä¸ä¾èµ– `setNodes` çš„ mock éªŒè¯
3. ç›´æ¥æ£€æŸ¥ node å¯¹è±¡çš„æ•°æ®

#### 2. Mode ä¸‹æ‹‰é€‰æ‹©å™¨åªæœ‰ä¸€ä¸ªé€‰é¡¹
**é—®é¢˜æè¿°**: 
PuppyDropdown çš„ `options` æ•°ç»„åªåŒ…å« `['size']`ï¼ˆline 486ï¼‰ï¼Œä½†ç±»å‹å®šä¹‰æ”¯æŒ `'size' | 'tokenizer'`ã€‚

**åˆ†æ**:
- å¯èƒ½æ˜¯åŠŸèƒ½æœªå®Œæˆ
- å¯èƒ½æ˜¯æœ‰æ„é™åˆ¶ï¼ˆtokenizer æ¨¡å¼æš‚ä¸å¯ç”¨ï¼‰

**æµ‹è¯•ç­–ç•¥**:
- UI æµ‹è¯•ï¼šéªŒè¯åªæ˜¾ç¤º 'size' é€‰é¡¹
- ç±»å‹æµ‹è¯•ï¼šéªŒè¯ 'tokenizer' ç±»å‹ä¹Ÿæ˜¯æœ‰æ•ˆçš„
- å‡†å¤‡æœªæ¥æ‰©å±•ï¼šæµ‹è¯•åº”è¯¥æ˜“äºæ·»åŠ  'tokenizer' æµ‹è¯•

#### 3. Settings é»˜è®¤æ”¶èµ·
**é—®é¢˜æè¿°**: 
Settings é»˜è®¤æ”¶èµ·ï¼ˆ`showSettings = false`ï¼‰ï¼Œç”¨æˆ·é¦–æ¬¡æ‰“å¼€èœå•çœ‹ä¸åˆ°å‚æ•°é…ç½®ã€‚

**ç”¨æˆ·ä½“éªŒå½±å“**:
- æ–°ç”¨æˆ·å¯èƒ½ä¸çŸ¥é“æœ‰è¿™äº›å‚æ•°
- éœ€è¦é¢å¤–ä¸€æ­¥æ“ä½œæ‰èƒ½è®¿é—®å‚æ•°
- ä½†å¯ä»¥å‡å°‘èœå•é«˜åº¦ï¼Œé¿å…è¿‡äºæ‹¥æŒ¤

**æµ‹è¯•é‡ç‚¹**:
- éªŒè¯é»˜è®¤çŠ¶æ€ä¸ºæ”¶èµ·
- éªŒè¯å±•å¼€/æ”¶èµ·äº¤äº’æµç•…

#### 4. æ•°å­—è¾“å…¥æ¡†çš„éªŒè¯
**é—®é¢˜æè¿°**: 
chunkSize å’Œ overlap çš„è¾“å…¥æ¡†æ²¡æœ‰æ˜æ˜¾çš„éªŒè¯é€»è¾‘ï¼š
- å…è®¸è´Ÿæ•°
- å…è®¸ 0
- å…è®¸æå¤§å€¼
- å…è®¸æ¸…ç©ºï¼ˆundefinedï¼‰

**æµ‹è¯•ç­–ç•¥**:
- æµ‹è¯•å„ç§è¾¹ç•Œå€¼çš„ä¿å­˜
- éªŒè¯ç±»å‹è½¬æ¢æ­£ç¡®ï¼ˆ`Number(e.target.value)`ï¼‰
- éªŒè¯æ¸…ç©ºæ—¶ä¿å­˜ä¸º undefined

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿›ï¼ˆé’ˆå¯¹æµ‹è¯•ï¼‰
1. **æ·»åŠ  data-testid**
   - Settings å±•å¼€æŒ‰é’®: `data-testid="settings-toggle"`
   - Chunk Size è¾“å…¥: `data-testid="chunk-size-input"`
   - Overlap è¾“å…¥: `data-testid="overlap-input"`
   - Handle Half Word select: `data-testid="handle-half-word-select"`

2. **æµ‹è¯•ç­–ç•¥é€‚é…**
   - é’ˆå¯¹ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼è°ƒæ•´éªŒè¯æ–¹æ³•
   - ä¸ä¾èµ– `setNodes` mock
   - ä½¿ç”¨ `getNode(id).data` ç›´æ¥éªŒè¯

3. **è¦†ç›–æ‰€æœ‰å‚æ•°**
   - 4 ä¸ªå‚æ•°éƒ½è¦æœ‰ä¿å­˜å’Œç±»å‹æµ‹è¯•
   - Settings æŠ˜å äº¤äº’æµ‹è¯•
   - è¾¹ç•Œå€¼æµ‹è¯•

### ä¸­æœŸæ”¹è¿›ï¼ˆé’ˆå¯¹ç»„ä»¶ä»£ç ï¼‰
1. **æ•°æ®æ›´æ–°æ–¹å¼ç»Ÿä¸€**
   - è€ƒè™‘æ”¹ç”¨ `setNodes` å’Œ `requestAnimationFrame`
   - ä¸å…¶ä»–èŠ‚ç‚¹ä¿æŒä¸€è‡´
   - ç¡®ä¿ React Flow å†…éƒ¨çŠ¶æ€åŒæ­¥

2. **æ·»åŠ å‚æ•°éªŒè¯**
   - chunkSize æœ€å°å€¼éªŒè¯ï¼ˆå¦‚ > 0ï¼‰
   - overlap èŒƒå›´éªŒè¯ï¼ˆå¦‚ >= 0 ä¸” < chunkSizeï¼‰
   - æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

3. **Mode é€‰é¡¹æ‰©å±•**
   - å¦‚æœ 'tokenizer' æ¨¡å¼å¯ç”¨ï¼Œæ·»åŠ åˆ°é€‰é¡¹ä¸­
   - å¦‚æœæš‚ä¸å¯ç”¨ï¼Œåœ¨ä»£ç æ³¨é‡Šä¸­è¯´æ˜åŸå› 

### é•¿æœŸæ”¹è¿›ï¼ˆåŠŸèƒ½å¢å¼ºï¼‰
1. **æ™ºèƒ½é»˜è®¤å€¼**
   - æ ¹æ®è¾“å…¥æ–‡æœ¬é•¿åº¦å»ºè®® chunkSize
   - overlap è‡ªåŠ¨å»ºè®®ä¸º chunkSize çš„ 10%
   - æä¾›"æ¨èé…ç½®"æŒ‰é’®

2. **å‚æ•°å…³è”éªŒè¯**
   - overlap ä¸åº”å¤§äº chunkSize
   - å®æ—¶æ˜¾ç¤ºéªŒè¯é”™è¯¯
   - ç¦ç”¨ Run æŒ‰é’®å¦‚æœé…ç½®æ— æ•ˆ

3. **é¢„è§ˆåŠŸèƒ½**
   - æ˜¾ç¤ºé¢„è®¡çš„å—æ•°é‡
   - æ˜¾ç¤ºæ¯ä¸ªå—çš„å¤§è‡´å¤§å°
   - å¸®åŠ©ç”¨æˆ·ç†è§£é…ç½®æ•ˆæœ

---

## ğŸ“‹ æµ‹è¯•æ‰§è¡Œè®¡åˆ’

### æµ‹è¯•æ–‡ä»¶ç»“æ„
```
__tests__/chunkingbylength-edge-node/
â”œâ”€â”€ ChunkingByLength-æµ‹è¯•æ–‡æ¡£.md        # æœ¬æ–‡æ¡£
â””â”€â”€ unit/
    â””â”€â”€ ChunkingByLength.test.tsx       # å•å…ƒæµ‹è¯•æ–‡ä»¶
```

### æµ‹è¯•ä¼˜å…ˆçº§
1. **ç¬¬ä¸€é˜¶æ®µ**ï¼ˆP0ï¼‰ï¼šæµ‹è¯•æ ¸å¿ƒå‚æ•°é…ç½®
   - subChunkMode ä¿å­˜å’Œç±»å‹éªŒè¯
   - chunkSize ä¿å­˜å’Œç±»å‹éªŒè¯
   - overlap ä¿å­˜å’Œç±»å‹éªŒè¯
   - handleHalfWord ä¿å­˜éªŒè¯
   
2. **ç¬¬äºŒé˜¶æ®µ**ï¼ˆP1ï¼‰ï¼šæµ‹è¯•é‡è¦åŠŸèƒ½
   - Settings å±•å¼€/æ”¶èµ·
   - è¾¹ç•Œå€¼æµ‹è¯•
   - Run æŒ‰é’®åŠŸèƒ½
   
3. **ç¬¬ä¸‰é˜¶æ®µ**ï¼ˆP2ï¼‰ï¼šæµ‹è¯•UIäº¤äº’
   - é»˜è®¤å€¼éªŒè¯
   - é…ç½®èœå•å±•å¼€
   - ç»„ä»¶æŒ‚è½½

### æµ‹è¯•æ•°é‡é¢„æœŸ
- **æ€»æµ‹è¯•æ•°**: 14 ä¸ª
- **P0**: 7 ä¸ªï¼ˆ4 ä¸ªå‚æ•°é…ç½® + 3 ä¸ªç±»å‹éªŒè¯ï¼‰
- **P1**: 4 ä¸ªï¼ˆSettings äº¤äº’ + è¾¹ç•Œå€¼ + Runï¼‰
- **P2**: 3 ä¸ªï¼ˆé»˜è®¤å€¼ + UI äº¤äº’ï¼‰

### é¢„æœŸæŒ‘æˆ˜
1. **ç›´æ¥ä¿®æ”¹ node.data**: éœ€è¦è°ƒæ•´éªŒè¯æ–¹æ³•
2. **Settings æŠ˜å **: éœ€è¦å…ˆå±•å¼€æ‰èƒ½è®¿é—®å‚æ•°
3. **æ•°å­—è¾“å…¥æ¡†**: éœ€è¦æµ‹è¯•è¾¹ç•Œå€¼å’Œç±»å‹è½¬æ¢

### é¢„æœŸé€šè¿‡ç‡
åŸºäºä¹‹å‰çš„ç»éªŒå’Œæ­¤èŠ‚ç‚¹çš„ç‰¹ç‚¹ï¼š
- **ä¹è§‚é¢„æœŸ**: 85-95%ï¼ˆ12-13/14 é€šè¿‡ï¼‰
- **ä¿å®ˆé¢„æœŸ**: 70-85%ï¼ˆ10-12/14 é€šè¿‡ï¼‰
- **æŒ‘æˆ˜**: ç›´æ¥ä¿®æ”¹ node.data çš„æ–¹å¼å¯èƒ½å¸¦æ¥æµ‹è¯•éªŒè¯é—®é¢˜

---

## ğŸ“š å‚è€ƒèµ„æ–™

### ç›¸å…³æ–‡ä»¶
- ç»„ä»¶æºç : `PuppyFlow/app/components/workflow/edgesNode/edgeNodesNew/ChunkingByLength.tsx`
- æ•°æ®ç±»å‹: ä¸ ChunkingAuto å…±äº« `ChunkingConfigNodeData` ç±»å‹
- æ‰§è¡Œå™¨: `PuppyFlow/app/components/workflow/edgesNode/edgeNodesNew/hook/runSingleEdgeNodeExecutor.ts`

### å‚è€ƒæµ‹è¯•æ–‡æ¡£
- **EditText**: `PuppyFlow/__tests__/edittext-edge-node/EditText-æµ‹è¯•æ–‡æ¡£.md` (18ä¸ªæµ‹è¯•ï¼Œ100%é€šè¿‡ï¼Œæœ‰å‚æ•°é…ç½®)
- **ChunkingAuto**: `PuppyFlow/__tests__/chunkingauto-edge-node/ChunkingAuto-æµ‹è¯•æ–‡æ¡£.md` (7ä¸ªæµ‹è¯•ï¼Œ100%é€šè¿‡ï¼Œæ— å‚æ•°é…ç½®)
- **Convert2Structured**: `PuppyFlow/__tests__/convert2structured-edge-node/Convert2Structured-æµ‹è¯•æ–‡æ¡£.md` (24ä¸ªæµ‹è¯•ï¼Œ87.5%é€šè¿‡ï¼Œå¤æ‚å‚æ•°)

### èŠ‚ç‚¹ç‰¹ç‚¹å¯¹æ¯”

| ç‰¹æ€§ | ChunkingByLength | ChunkingAuto | EditText |
|------|-----------------|--------------|----------|
| å‚æ•°æ•°é‡ | 4 | 0 | 3 |
| å‚æ•°å¤æ‚åº¦ | ä¸­ | N/A | ä¸­ |
| æŠ˜å UI | âœ… Settings | âŒ æ—  | âŒ æ—  |
| æ•°æ®æ›´æ–°æ–¹å¼ | ç›´æ¥ä¿®æ”¹ node.data | N/A | setNodes + RAF |
| æµ‹è¯•ç”¨ä¾‹æ•° | 14 | 7 | 18 |
| é¢„æœŸé€šè¿‡ç‡ | 85-95% | 100% | 100% |

**ChunkingByLength çš„å®šä½**:
- ä¸­ç­‰å¤æ‚åº¦çš„å‚æ•°é…ç½®
- æœ‰ç‹¬ç‰¹çš„ Settings æŠ˜å åŠŸèƒ½
- ä½¿ç”¨ä¸åŒçš„æ•°æ®æ›´æ–°æ–¹å¼
- æµ‹è¯•éœ€è¦é€‚é…å…¶ç‰¹æ®Šæ€§

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.1  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-27  
**æœ€åæ›´æ–°**: 2025-10-27  
**æµ‹è¯•æ‰§è¡Œæ—¥æœŸ**: 2025-10-27  
**æµ‹è¯•é€šè¿‡ç‡**: 100% (14/14) âœ…  
**èŠ‚ç‚¹ç±»å‹**: æœ‰å‚æ•°é…ç½®ï¼ˆ4ä¸ªå‚æ•°ï¼ŒSettings æŠ˜å ï¼‰  
**æ•°æ®æ›´æ–°æ–¹å¼**: ç›´æ¥ä¿®æ”¹ node.dataï¼ˆç‹¬ç‰¹æ–¹å¼ï¼‰

