# JSON Block Node 测试文档

## 文档说明
- **组件路径**: `PuppyFlow/app/components/workflow/blockNode/JsonNodeNew.tsx`
- **组件类型**: Block Node（数据块节点）
- **核心职责**: JSON 数据的存储、编辑、展示、索引管理和工作流连接
- **目标平台**: 桌面端（不支持移动端）

---

## 📝 测试策略

### 分层测试原则

```
┌─────────────────────────────────────────────┐
│   E2E 测试（Playwright）                     │
│   - 完整用户流程                              │
│   - 跨节点交互                                │
│   - 索引管理完整流程                          │
└─────────────────────────────────────────────┘
                     ▲
                     │
┌─────────────────────────────────────────────┐
│   集成测试（React Testing Library）          │
│   - JsonBlockNode 组件测试                   │
│   - 视图切换集成                              │
│   - 节点角色识别                              │
└─────────────────────────────────────────────┘
                     ▲
                     │
┌─────────────────────────────────────────────┐
│   单元测试（Vitest）                         │
│   - RichJSONForm 组件独立测试                │
│   - JSONForm 组件独立测试                    │
│   - 工具函数测试                              │
└─────────────────────────────────────────────┘
```

### 编辑器测试分离

- **RichJSONForm/JSONForm**：独立单元测试
  - JSON 解析和验证
  - 语法高亮功能
  - 键盘交互
  - 性能测试（大 JSON）
  
- **JsonBlockNode**：集成测试
  - 编辑器 props 传递
  - 视图切换内容一致性
  - 事件处理集成

---

## 功能模块测试用例

### 📝 功能模块 1: JSON 内容编辑与保存

#### 1.1 基础编辑功能

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-001 | 用户输入 JSON 内容 | 1. 创建 JSON Block<br>2. 在编辑器输入 JSON 数据 | - JSON 实时显示在编辑器中<br>- 内容同步到 node.data.content | **P0** | 核心功能，无法编辑则节点完全不可用 |
| TC-JSON-002 | 编辑现有 JSON 内容 | 1. 打开已有 JSON 的节点<br>2. 修改部分数据 | - 修改立即反映在 UI<br>- 触发自动保存机制 | **P0** | 核心编辑体验，影响所有编辑场景 |
| TC-JSON-003 | 清空所有 JSON 内容 | 1. 删除节点内所有 JSON<br>2. 等待保存 | - 内容为空字符串<br>- savingStatus 正常流转 | **P1** | 常见操作，但可通过删除节点绕过 |
| TC-JSON-004 | 超长 JSON 输入（>10万字符） | 1. 粘贴超大 JSON<br>2. 观察性能和保存 | - 编辑器不卡顿<br>- 自动切换到外部存储<br>- 保存成功 | **P1** | 大数据场景，影响高级用户体验 |
| TC-JSON-005 | 无效 JSON 格式输入 | 输入非法 JSON（如缺少引号、括号不匹配） | - 编辑器显示错误提示（如果有）<br>- 不阻止保存（以文本形式） | **P2** | 用户错误处理，影响用户体验 |
| TC-JSON-006 | 特殊字符和 Unicode 在 JSON 中 | 输入包含 emoji、换行符、特殊 Unicode 的 JSON | - 特殊字符正确显示和保存<br>- JSON 解析无误 | **P2** | 边缘场景但影响内容完整性 |
| TC-JSON-007 | 对象类型 content 的字符串化 | content 是对象/数组（非字符串） | - 自动转为 JSON 字符串（缩进2空格）<br>- 编辑器正常显示 | **P1** | 兼容结构化输出，常见场景 |

#### 1.2 自动保存机制

> **机制说明**：防抖保存对 internal 和 external 两种存储模式都生效
> - **Internal 存储**：当 `savingStatus='editing'` 时触发，2秒后保存
> - **External 存储**：当 `dirty=true` 时触发，2秒后保存
> - 两种模式都通过 `setTimeout(2000)` 实现防抖

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-008 | Internal 存储编辑后自动保存 | 1. 节点为 internal 存储<br>2. 编辑内容<br>3. 停止输入<br>4. 等待2秒 | - savingStatus: editing → saving → saved<br>- 2秒防抖生效<br>- 内容保存到 node.data.content | **P0** | 数据安全核心，保存失败导致数据丢失 |
| TC-JSON-008-EXT | External 存储编辑后自动保存 | 1. 节点为 external 存储<br>2. 编辑内容（dirty=true）<br>3. 停止输入<br>4. 等待2秒 | - savingStatus: editing → saving → saved<br>- dirty: true → false<br>- 内容保存到外部存储 | **P0** | 外部存储数据安全 |
| TC-JSON-009 | 快速连续编辑的防抖 | 1. 持续快速输入5秒<br>2. 停止输入 | - 中间状态不触发保存<br>- 停止后仅触发一次保存 | **P1** | 性能优化，防止频繁请求 |
| TC-JSON-010 | 保存中再次编辑 | 1. 编辑内容A<br>2. 等待1秒<br>3. 再编辑内容B | - 旧保存被取消<br>- 新编辑重新计时2秒<br>- 最终保存最新内容B | **P1** | 防止数据覆盖，影响编辑流畅度 |
| TC-JSON-011 | 保存失败处理 | 1. 模拟网络错误<br>2. 编辑并触发保存 | - savingStatus 显示 'error'<br>- saveError 包含错误信息<br>- 用户可重试 | **P0** | 数据安全，用户需知晓保存失败 |
| TC-JSON-012 | 节点 isLoading 时不触发保存 | 1. 设置 node.data.isLoading = true<br>2. 编辑内容 | - 不触发自动保存<br>- 等待 isLoading=false 后恢复 | **P2** | 防止加载期间的冲突操作 |

#### 1.3 内容加载状态

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-013 | 节点加载中显示骨架屏 | 设置 isLoading=true | - 显示 SkeletonLoadingIcon<br>- 不显示 JSON 编辑器 | **P2** | 用户体验，但不影响功能 |
| TC-JSON-014 | 加载完成后显示内容 | isLoading: true → false | - 骨架屏消失<br>- 显示完整 JSON 内容 | **P1** | 影响内容可访问性 |

---

### 💾 功能模块 2: 动态存储策略

#### 2.1 存储类切换

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-015 | 内容超阈值切换到外部存储 | 1. 初始内容 < 阈值（internal）<br>2. 粘贴大量 JSON > 阈值 | - storage_class: internal → external<br>- 生成 resource_key<br>- 内容正确保存到外部存储 | **P0** | 数据安全核心，切换失败导致数据丢失 |
| TC-JSON-016 | 内容缩减切换回内部存储 | 1. 初始 external 存储<br>2. 删除内容至 < 阈值 | - storage_class: external → internal<br>- resource_key 清理<br>- 内容迁移到 node.data.content | **P0** | 数据完整性，迁移失败丢失内容 |
| TC-JSON-017 | 阈值边界测试 | 内容长度恰好等于 CONTENT_LENGTH_THRESHOLD | - 存储策略稳定，不频繁切换<br>- 边界值有明确归属 | **P2** | 边缘场景，但需确保稳定 |
| TC-JSON-018 | 存储切换时的数据一致性 | 1. 切换前读取内容A<br>2. 执行切换<br>3. 切换后读取内容B | - A === B，无数据丢失或损坏 | **P0** | 数据完整性，任何丢失都是致命问题 |

#### 2.2 内容类型判断（Structured vs Text）

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-019 | 有效 JSON 识别为 structured | 1. 输入有效 JSON 对象/数组<br>2. 触发保存 | - contentType = 'structured'<br>- 调用 handleDynamicStorageSwitch 时传入正确类型 | **P1** | 影响存储策略和数据处理 |
| TC-JSON-020 | 无效 JSON 识别为 text | 1. 输入无效 JSON 字符串<br>2. 触发保存 | - contentType = 'text'<br>- 以文本形式存储 | **P1** | 容错机制，保证数据不丢失 |
| TC-JSON-021 | null 值处理 | content = null | - 转换为 'null' 字符串<br>- 正确保存 | **P2** | 边界值处理 |

#### 2.3 Dirty 标记管理

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-022 | External 存储的 dirty 标记 | 1. 节点为 external 存储<br>2. 编辑内容 | - dirty=true<br>- 触发外部存储保存<br>- 保存后 dirty=false | **P1** | 外部存储核心机制，影响保存触发 |
| TC-JSON-023 | Internal 存储不使用 dirty | 1. 节点为 internal 存储<br>2. 编辑内容 | - dirty 始终为 false<br>- 依靠 savingStatus='editing' 触发 | **P1** | 存储策略正确性，防止逻辑混乱 |

#### 2.4 存储信息调试

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-024 | 保存时打印存储信息 | 编辑并保存节点 | Console 输出：<br>- contentLength<br>- storageClass<br>- switched<br>- estimatedChunks<br>- resourceKey | **P3** | 开发调试功能，不影响用户 |

---

### 🔗 功能模块 3: 节点连接

#### 3.1 Source Handles（输出连接点）

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-025 | 4个方向 Source Handle 可见 | 创建 JSON Block 节点 | - 上、右、下、左各有1个 WhiteBallHandle<br>- ID 分别为 {id}-a/b/c/d | **P1** | 核心连接功能，无法连接则工作流断裂 |
| TC-JSON-026 | 从 Source Handle 拖拽创建连接 | 从任一 Source Handle 拖出连线 | - 可成功连接到其他节点的 Target<br>- 连接关系正确记录 | **P0** | 工作流核心，无法连接则无法构建流程 |
| TC-JSON-027 | isConnectable=false 时禁用 | 设置 isConnectable=false | - Source Handles 不可交互 | **P2** | 特殊场景下的控制功能 |

#### 3.2 Target Handles（输入连接点）

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-028 | 4个方向 Target Handle 存在 | 创建 JSON Block 节点 | - 上、右、下、左各有1个透明 Handle<br>- type='target'<br>- 覆盖整个节点区域 | **P1** | 核心连接功能 |
| TC-JSON-029 | 接收其他节点的连接 | 其他节点拖拽连线到此节点 | - 可成功建立连接<br>- 边缘高亮（orange） | **P0** | 工作流核心功能 |
| TC-JSON-030 | 鼠标悬停 Target 时边框变色 | 鼠标移动到节点边缘区域 | - isOnConnect 时边框变为 orange | **P3** | 视觉反馈，不影响功能 |

---

### 🏷️ 功能模块 4: 节点角色自动识别

> **⚠️ 功能现状说明**：
> - ✅ **逻辑已实现**：代码会自动检测并设置 `isInput`/`isOutput` 标记
> - ❌ **无视觉反馈**：当前版本中这些标记**不影响节点样式**（无边框颜色、图标等变化）
> - 🎯 **用途未明**：标记可能用于后端工作流执行逻辑，但前端未消费这些状态
> - 📝 **测试建议**：测试重点放在数据标记的正确性，而非UI变化

#### 4.1 Input 节点检测

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-031 | 无上游有下游自动标记 Input | 1. 创建节点A<br>2. A连接到节点B（A→B）<br>3. A无其他上游 | - A被标记为 isInput=true<br>- 调用 manageNodeasInput(A.id)<br>- **注意**：UI 无变化 | **P2** | 数据标记功能，但无视觉反馈，降级为 P2 |
| TC-JSON-032 | Input 节点新增上游后取消标记 | 1. A为 Input 节点<br>2. 创建 C→A 连接 | - A 的 isInput 状态更新<br>- 不再是起点节点<br>- **注意**：UI 无变化 | **P3** | 动态拓扑变化，无视觉影响 |

#### 4.2 Output 节点检测

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-033 | 有上游无下游自动标记 Output | 1. A→B 连接<br>2. B无其他下游 | - B被标记为 isOutput=true<br>- 调用 manageNodeasOutput(B.id)<br>- **注意**：UI 无变化 | **P2** | 数据标记功能，但无视觉反馈，降级为 P2 |
| TC-JSON-034 | Output 节点新增下游后取消标记 | 1. B为 Output 节点<br>2. 创建 B→C 连接 | - B 的 isOutput 状态更新<br>- **注意**：UI 无变化 | **P3** | 动态拓扑变化，无视觉影响 |

#### 4.3 角色变更的性能优化

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-035 | 初次渲染延迟检测 | 组件首次挂载 | - 使用 requestAnimationFrame 延迟执行<br>- 避免阻塞首屏渲染 | **P3** | 性能优化，不影响功能正确性 |
| TC-JSON-036 | 后续连接立即检测 | 非首次挂载的连接变化 | - 立即执行角色检测<br>- 无延迟 | **P3** | 交互响应速度，但无视觉反馈 |

---

### 🏷️ 功能模块 5: 标签管理

#### 5.1 标签显示

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-037 | 显示节点标签 | 创建节点（label="测试节点"） | - 左上角显示标签文本<br>- 带 JSON 大括号图标 | **P2** | 辅助信息，不影响核心功能 |
| TC-JSON-038 | 标签为空时显示 ID | 创建节点（无 label） | - 显示 node.id 作为后备 | **P3** | 边缘场景，用户体验 |
| TC-JSON-039 | 超长标签截断显示 | label 超过容器宽度 | - 文本 truncate 显示<br>- 不破坏布局 | **P3** | UI 细节 |

#### 5.2 标签编辑

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-040 | 点击重命名按钮编辑标签 | 1. 点击设置中的重命名<br>2. editable=true | - 标签变为 input 输入框<br>- 自动聚焦，光标在末尾 | **P2** | 常用功能，但非核心 |
| TC-JSON-041 | 编辑标签并保存 | 1. 进入编辑模式<br>2. 修改文本<br>3. 失焦（blur） | - 调用 editNodeLabel(id, newLabel)<br>- isLocalEdit 重置为 false | **P2** | 标签修改的持久化 |
| TC-JSON-042 | 编辑中点击外部取消 | 1. 编辑标签<br>2. 点击节点外部 | - 调用 setNodeUneditable(id)<br>- 如有修改则保存 | **P3** | 交互细节 |
| TC-JSON-043 | 编辑时阻止节点拖拽 | 1. 进入编辑模式<br>2. 尝试拖拽节点 | - 添加 'nodrag' 类<br>- 节点不可拖动 | **P2** | 防止误操作，影响编辑体验 |

#### 5.3 标签同步

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-044 | 外部修改标签时同步 | 其他组件修改 node.data.label | - 本地 nodeLabel 自动更新<br>- 不覆盖正在编辑的本地状态 | **P2** | 数据一致性，但非高频场景 |
| TC-JSON-045 | 非字符串 label 转换 | label 为非字符串类型 | - 自动转换为字符串显示 | **P3** | 容错处理 |

---

### 🔍 功能模块 6: 向量索引管理

> **核心功能说明**：JSON Node 的特有功能，用于管理数据的向量索引

#### 6.1 添加索引

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-046 | 添加向量索引 | 1. 点击 IndexingButton<br>2. 配置 key_path 和 value_path<br>3. 提交 | - indexingList 新增一项<br>- status 初始为 'processing'<br>- 索引创建完成后 status='done' | **P1** | 核心特色功能，影响数据检索 |
| TC-JSON-047 | 索引创建失败处理 | 1. 添加索引<br>2. 后端返回错误 | - status 变为 'error'<br>- 错误信息显示给用户<br>- 可以删除失败的索引 | **P1** | 错误处理，影响用户体验 |
| TC-JSON-048 | 并发添加多个索引 | 同时添加2个索引 | - 两个索引分别处理<br>- status 独立管理<br>- 不相互干扰 | **P2** | 高级场景，但需支持 |
| TC-JSON-049 | 添加索引时节点状态同步 | 添加索引过程中 | - 节点的 indexingList 实时更新<br>- UI 显示处理进度 | **P2** | 用户体验，提供反馈 |

#### 6.2 删除索引

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-050 | 删除已完成的索引 | 1. 选择 status='done' 的索引<br>2. 点击删除 | - status 变为 'deleting'<br>- 后端删除成功后从 indexingList 移除 | **P1** | 核心功能，索引生命周期管理 |
| TC-JSON-051 | 删除失败处理 | 1. 删除索引<br>2. 后端返回错误 | - status 变为 'error'<br>- 索引仍保留在列表中<br>- 错误信息提示用户 | **P1** | 错误处理，防止数据不一致 |
| TC-JSON-052 | 删除处理中的索引 | 删除 status='processing' 的索引 | - 行为明确（取消或等待完成）<br>- 不产生孤立资源 | **P2** | 边缘场景，但需明确行为 |

#### 6.3 索引状态管理

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-053 | 索引状态流转：notStarted → processing | 用户添加索引 | - 初始 status='notStarted'（或直接 'processing'）<br>- 开始处理后变为 'processing' | **P2** | 状态机正确性 |
| TC-JSON-054 | 索引状态流转：processing → done | 索引创建成功 | - status 从 'processing' 变为 'done'<br>- chunks 和 index_name 已填充 | **P1** | 核心流程，必须正确 |
| TC-JSON-055 | 索引状态流转：processing → error | 索引创建失败 | - status 从 'processing' 变为 'error'<br>- 保留在列表中供重试或删除 | **P1** | 错误处理流程 |
| TC-JSON-056 | 索引状态流转：done → deleting → 移除 | 删除成功的索引 | - status 从 'done' 变为 'deleting'<br>- 删除完成后从列表移除 | **P1** | 完整的删除流程 |

#### 6.4 索引列表显示

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-057 | 显示多个索引 | 节点包含多个索引项 | - 所有索引正确显示<br>- 每个索引显示其状态 | **P2** | 基本展示功能 |
| TC-JSON-058 | 空索引列表 | indexingList = [] | - 不显示索引列表或显示空状态 | **P3** | 默认状态 |

---

### 🎨 功能模块 7: 视图切换

> **功能说明**：JSON Node 支持两种编辑器视图
> - **RichEditor** (RichJSONForm)：富文本样式的 JSON 编辑器
> - **JSONForm**：纯文本 JSON 编辑器

#### 7.1 视图切换功能

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-059 | 切换到 JSONForm 视图 | 1. 默认 RichEditor<br>2. 点击 ViewToggleButton | - useRichEditor = false<br>- 显示 JSONForm<br>- 内容保持一致 | **P1** | 核心功能，影响编辑体验 |
| TC-JSON-060 | 切换回 RichEditor 视图 | 1. 当前 JSONForm<br>2. 点击 ViewToggleButton | - useRichEditor = true<br>- 显示 RichJSONForm<br>- 内容保持一致 | **P1** | 核心功能 |
| TC-JSON-061 | 切换视图时内容不丢失 | 1. 在 RichEditor 中编辑<br>2. 切换到 JSONForm<br>3. 切换回 RichEditor | - 所有步骤内容一致<br>- 无数据丢失 | **P0** | 数据安全，切换不能丢数据 |
| TC-JSON-062 | ViewToggleButton 显示/隐藏 | 1. 鼠标移出节点<br>2. 鼠标移入节点 | - 移出时 opacity=0<br>- 移入时 opacity=1<br>- 始终在左下角 | **P3** | UI 交互细节 |

#### 7.2 编辑器集成测试

> **⚠️ 测试策略说明**：
> - **编辑器自身功能**（语法高亮、格式化等）应在 `RichJSONForm.test.tsx` 和 `JSONForm.test.tsx` 中单独测试
> - **JsonBlockNode 中仅测试集成部分**：内容传递、事件处理、属性绑定

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-063 | RichEditor 正确接收 props | 使用 RichEditor 视图 | - value、onChange、readonly 正确传递<br>- preventParentDrag/allowParentDrag 正确绑定 | **P1** | 集成正确性 |
| TC-JSON-064 | JSONForm 正确接收 props | 使用 JSONForm 视图 | - value、onChange、readonly 正确传递<br>- preventParentDrag/allowParentDrag 正确绑定 | **P1** | 集成正确性 |
| TC-JSON-065 | 锁定状态下两种视图都只读 | locked=true 时切换视图 | - 两种编辑器都设置 readonly=true<br>- 不可编辑 | **P1** | 安全性，锁定功能必须生效 |

---

### 🔄 功能模块 8: 循环标记

> **功能说明**：NodeLoopButton 控制节点的循环行为

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-066 | 标记节点为循环 | 点击 NodeLoopButton 启用循环 | - node.data.looped = true<br>- UI 显示循环标识（如果有） | **P2** | 工作流高级功能 |
| TC-JSON-067 | 取消节点循环标记 | 点击 NodeLoopButton 禁用循环 | - node.data.looped = false<br>- UI 取消循环标识 | **P2** | 循环功能反向操作 |
| TC-JSON-068 | 循环标记持久化 | 1. 标记为循环<br>2. 保存工作流<br>3. 重新加载 | - looped 状态保持<br>- 重新加载后仍为 true | **P2** | 数据持久化 |

---

### 🎭 功能模块 9: UI 状态与交互

#### 9.1 边框颜色状态

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-069 | 加载中显示橙色边框 | isLoading=true | border-color: #FFA500 | **P3** | 视觉反馈 |
| TC-JSON-070 | 等待流程显示绿色边框 | isWaitingForFlow=true | border-color: #39bc66 | **P3** | 视觉反馈 |
| TC-JSON-071 | 激活时显示紫色边框 | activatedNode.id === 当前id | border-color: #9B7EDB | **P3** | 视觉反馈 |
| TC-JSON-072 | 悬停时显示紫色边框 | 鼠标移入节点 | border-color: #9B7EDB | **P3** | 交互反馈 |
| TC-JSON-073 | 连接中触摸显示橙色 | isOnConnect=true 且鼠标在边缘 | border-color: main-orange | **P3** | 连接引导 |
| TC-JSON-074 | 默认状态深灰色边框 | 无特殊状态 | border-color: main-deep-grey | **P3** | 默认样式 |

#### 9.2 鼠标交互

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-075 | 鼠标移入激活节点 | 鼠标移入节点区域 | - isHovered=true<br>- 调用 activateNode(id) | **P3** | 交互反馈 |
| TC-JSON-076 | 鼠标移出取消悬停 | 鼠标移出节点区域 | - isHovered=false | **P3** | 交互反馈 |
| TC-JSON-077 | 悬停时显示调整大小手柄 | 鼠标移入节点 | - ResizeControl opacity=1<br>- ViewToggleButton opacity=1 | **P3** | UI 引导 |

#### 9.3 拖拽功能

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-078 | 拖拽移动节点 | 在标签区域按住并拖动 | - 节点跟随鼠标移动<br>- cursor: grab → grabbing | **P1** | 核心布局功能 |
| TC-JSON-079 | 编辑区域禁止拖拽 | 在 JSON 编辑器上拖动 | - 节点不移动<br>- 可选中文本/编辑 JSON | **P2** | 防止编辑冲突 |
| TC-JSON-080 | 编辑标签时禁止拖拽 | 编辑标签输入框时拖动 | - 节点不移动<br>- preventParentDrag 生效 | **P2** | 防止编辑冲突 |

#### 9.4 调整大小

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-081 | 拖拽右下角调整大小 | 拖动 ResizeControl 手柄 | - 节点尺寸变化<br>- 最小 240x176px | **P2** | 布局自定义功能 |
| TC-JSON-082 | 小于最小尺寸限制 | 尝试缩小至 < 240x176 | - 无法继续缩小<br>- 保持最小尺寸 | **P3** | 边界保护 |
| TC-JSON-083 | 悬停时显示调整手柄 | 鼠标移入节点 | - 右下角显示 resize 图标<br>- opacity=1 | **P3** | 视觉引导 |
| TC-JSON-084 | 未悬停时隐藏手柄 | 鼠标移出节点 | - resize 图标 opacity=0<br>- pointerEvents='none' | **P3** | UI 整洁 |

#### 9.5 光标样式

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-085 | 生成新节点时十字光标 | isOnGeneratingNewNode=true | cursor: crosshair | **P3** | 操作引导 |
| TC-JSON-086 | 正常状态默认光标 | 无特殊状态 | cursor: default | **P3** | 默认样式 |

#### 9.6 滚动行为

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-087 | JSON 编辑器内滚动不传播 | 在编辑器内使用鼠标滚轮 | - 仅编辑器内容滚动<br>- 不触发 ReactFlow 画布移动<br>- stopPropagation 在捕获阶段生效 | **P1** | 核心交互，防止误操作 |

---

### 🔒 功能模块 10: 锁定状态

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-089 | 锁定节点显示 LOCKED 标签 | locked=true | - 节点上方显示 LOCKED 标签<br>- 带锁图标 | **P2** | 视觉反馈 |
| TC-JSON-090 | 锁定状态下不可编辑 JSON | 1. locked=true<br>2. 尝试编辑 | - 编辑器 readonly=true<br>- 无法修改内容 | **P1** | 安全性，锁定功能核心 |
| TC-JSON-091 | 锁定状态下可以查看 | locked=true | - JSON 内容正常显示<br>- 可以滚动查看 | **P2** | 只读查看功能 |
| TC-JSON-092 | 解除锁定后可编辑 | locked: true → false | - 编辑器变为可编辑<br>- readonly=false | **P2** | 锁定功能的反向操作 |

---

### ⚡ 功能模块 11: 性能优化

#### 11.1 组件优化

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-093 | React.memo 防止无关重渲染 | 1. 其他节点更新<br>2. 本节点 props 未变 | - 本节点不重新渲染 | **P2** | 大型画布性能优化 |
| TC-JSON-094 | useMemo 缓存计算结果 | props 无变化时多次渲染 | - borderColor、containerClassName、handleStyle 不重新计算 | **P3** | 性能优化细节 |
| TC-JSON-095 | useCallback 缓存函数引用 | 多次渲染 | - 事件处理函数引用稳定 | **P3** | 性能优化细节 |
| TC-JSON-096 | 合并 state 减少更新 | 多个 state 同时变化 | - 使用 nodeState 对象统一管理<br>- 减少渲染次数 | **P3** | 性能优化策略 |

#### 11.2 引用管理

| 用例ID | 测试场景 | 操作步骤 | 预期结果 | 优先级 | 理由 |
|--------|---------|---------|---------|--------|------|
| TC-JSON-097 | 使用 ref 避免不必要重渲染 | 组件使用多个 ref | - componentRef、contentRef、scrollContainerRef 等<br>- DOM 引用变化不触发渲染 | **P3** | 性能优化 |
| TC-JSON-098 | hasMountedRef 标记初始渲染 | 组件首次挂载 | - hasMountedRef.current = false → true<br>- 用于延迟副作用执行 | **P3** | 性能优化细节 |

---

## 📊 测试用例覆盖情况总览

### 统计摘要

| 状态 | 数量 | 占比 | 说明 |
|------|------|------|------|
| ✅ 已测试（单元） | 32 | 33.0% | 已在单元测试中实现 |
| ⏭️ 跳过（需集成） | 5 | 5.2% | 已标记为 skip，需集成测试验证 |
| ⏸️ 待实现（单元） | 4 | 4.1% | P0/P1 用例待补充单元测试 |
| 📝 待实现（集成/E2E） | 56 | 57.7% | P2/P3 用例或需集成测试的场景 |
| **总计** | **97** | **100%** | 所有测试用例 |

### 按优先级的覆盖情况

| 优先级 | 总数 | 已测试 | 跳过 | 待实现 | 覆盖率（已测试+跳过） |
|--------|------|--------|------|--------|---------------------|
| **P0** | 11 | 5 | 5 | 1 | 90.9% |
| **P1** | 28 | 27 | 0 | 1 | 96.4% |
| **P2** | 31 | 0 | 0 | 31 | 0% |
| **P3** | 27 | 0 | 0 | 27 | 0% |

### 详细覆盖表格

#### 功能模块 1: JSON 内容编辑与保存

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-001 | 用户输入 JSON 内容 | P0 | ✅ | 单元 | 已在 content.test.tsx 中实现 |
| TC-JSON-002 | 编辑现有 JSON 内容 | P0 | ✅ | 单元 | 已在 content.test.tsx 中实现 |
| TC-JSON-003 | 清空所有 JSON 内容 | P1 | ✅ | 单元 | 已在 content.test.tsx 中实现 |
| TC-JSON-004 | 超长 JSON 输入（>10万字符） | P1 | ✅ | 单元 | 已在 content.test.tsx 中实现 |
| TC-JSON-005 | 无效 JSON 格式输入 | P2 | ❌ | 单元/集成 | 待实现：错误提示验证 |
| TC-JSON-006 | 特殊字符和 Unicode 在 JSON 中 | P2 | ❌ | 单元 | 待实现：特殊字符处理 |
| TC-JSON-007 | 对象类型 content 的字符串化 | P1 | ✅ | 单元 | 已在 content.test.tsx 中实现，包含对象/数组/null测试 |
| TC-JSON-008 | Internal 存储编辑后自动保存 | P0 | ⏭️ | 集成 | 已在 content.test.tsx 中标记为 skip，需集成测试验证防抖 |
| TC-JSON-008-EXT | External 存储编辑后自动保存 | P0 | ⏭️ | 集成 | 已在 content.test.tsx 中标记为 skip，需集成测试验证 |
| TC-JSON-009 | 快速连续编辑的防抖 | P1 | ⏭️ | 集成 | 已在 content.test.tsx 中标记为 skip，需真实时序控制 |
| TC-JSON-010 | 保存中再次编辑 | P1 | ⏭️ | 集成 | 已在 content.test.tsx 中标记为 skip，需并发场景测试 |
| TC-JSON-011 | 保存失败处理 | P0 | ⏭️ | 集成 | 已在 content.test.tsx 中标记为 skip，需真实错误处理流程 |
| TC-JSON-012 | 节点 isLoading 时不触发保存 | P2 | ✅ | 单元 | 已在 content.test.tsx 中实现基础验证 |
| TC-JSON-013 | 节点加载中显示骨架屏 | P2 | ❌ | 单元 | 待实现：骨架屏显示验证 |
| TC-JSON-014 | 加载完成后显示内容 | P1 | ✅ | 单元 | 已在 content.test.tsx 中实现 |

#### 功能模块 2: 动态存储策略

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-015 | 内容超阈值切换到外部存储 | P0 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-016 | 内容缩减切换回内部存储 | P0 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-017 | 阈值边界测试 | P2 | ❌ | 单元 | 待实现：边界值测试 |
| TC-JSON-018 | 存储切换时的数据一致性 | P0 | ✅ | 单元 | 已在 storage.test.tsx 中实现，包含特殊字符测试 |
| TC-JSON-019 | 有效 JSON 识别为 structured | P1 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-020 | 无效 JSON 识别为 text | P1 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-021 | null 值处理 | P2 | ❌ | 单元 | 待实现：null 值边界测试 |
| TC-JSON-022 | External 存储的 dirty 标记 | P1 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-023 | Internal 存储不使用 dirty | P1 | ✅ | 单元 | 已在 storage.test.tsx 中实现 |
| TC-JSON-024 | 保存时打印存储信息 | P3 | ❌ | 单元 | 待实现：控制台输出验证 |

#### 功能模块 3: 节点连接

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-025 | 4个方向 Source Handle 可见 | P1 | ✅ | 单元 | 已在 connection.test.tsx 中实现，包含ID命名和connectable测试 |
| TC-JSON-026 | 从 Source Handle 拖拽创建连接 | P0 | ✅ | 单元/E2E | 已在 connection.test.tsx 中实现基础验证，完整拖拽需E2E |
| TC-JSON-027 | isConnectable=false 时禁用 | P2 | ❌ | 单元 | 待实现：禁用状态测试 |
| TC-JSON-028 | 4个方向 Target Handle 存在 | P1 | ✅ | 单元 | 已在 connection.test.tsx 中实现 |
| TC-JSON-029 | 接收其他节点的连接 | P0 | ✅ | 单元/E2E | 已在 connection.test.tsx 中实现基础验证 |
| TC-JSON-030 | 鼠标悬停 Target 时边框变色 | P3 | ❌ | 单元/集成 | 待实现：边框颜色变化验证 |

#### 功能模块 4: 节点角色自动识别

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-031 | 无上游有下游自动标记 Input | P2 | ❌ | 集成 | 待实现：需真实连接关系 |
| TC-JSON-032 | Input 节点新增上游后取消标记 | P3 | ❌ | 集成 | 待实现：需动态拓扑变化 |
| TC-JSON-033 | 有上游无下游自动标记 Output | P2 | ❌ | 集成 | 待实现：需真实连接关系 |
| TC-JSON-034 | Output 节点新增下游后取消标记 | P3 | ❌ | 集成 | 待实现：需动态拓扑变化 |
| TC-JSON-035 | 初次渲染延迟检测 | P3 | ❌ | 单元 | 待实现：requestAnimationFrame验证 |
| TC-JSON-036 | 后续连接立即检测 | P3 | ❌ | 集成 | 待实现：响应速度测试 |

#### 功能模块 5: 标签管理

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-037 | 显示节点标签 | P2 | ❌ | 单元 | 待实现：标签显示验证 |
| TC-JSON-038 | 标签为空时显示 ID | P3 | ❌ | 单元 | 待实现：后备显示逻辑 |
| TC-JSON-039 | 超长标签截断显示 | P3 | ❌ | 单元 | 待实现：CSS truncate 验证 |
| TC-JSON-040 | 点击重命名按钮编辑标签 | P2 | ❌ | 集成 | 待实现：编辑模式切换 |
| TC-JSON-041 | 编辑标签并保存 | P2 | ❌ | 集成 | 待实现：保存逻辑验证 |
| TC-JSON-042 | 编辑中点击外部取消 | P3 | ❌ | 集成 | 待实现：失焦行为测试 |
| TC-JSON-043 | 编辑时阻止节点拖拽 | P2 | ❌ | 集成 | 待实现：nodrag类验证 |
| TC-JSON-044 | 外部修改标签时同步 | P2 | ❌ | 集成 | 待实现：数据同步测试 |
| TC-JSON-045 | 非字符串 label 转换 | P3 | ❌ | 单元 | 待实现：类型转换验证 |

#### 功能模块 6: 向量索引管理

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-046 | 添加向量索引 | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-047 | 索引创建失败处理 | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-048 | 并发添加多个索引 | P2 | ❌ | 集成 | 待实现：并发场景测试 |
| TC-JSON-049 | 添加索引时节点状态同步 | P2 | ❌ | 单元 | 待实现：状态同步验证 |
| TC-JSON-050 | 删除已完成的索引 | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-051 | 删除失败处理 | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-052 | 删除处理中的索引 | P2 | ❌ | 集成 | 待实现：中间状态删除测试 |
| TC-JSON-053 | 索引状态流转：notStarted → processing | P2 | ❌ | 单元 | 待实现：初始状态验证 |
| TC-JSON-054 | 索引状态流转：processing → done | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-055 | 索引状态流转：processing → error | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-056 | 索引状态流转：done → deleting → 移除 | P1 | ✅ | 单元 | 已在 indexing.test.tsx 中实现 |
| TC-JSON-057 | 显示多个索引 | P2 | ❌ | 单元 | 待实现：列表显示验证 |
| TC-JSON-058 | 空索引列表 | P3 | ❌ | 单元 | 待实现：空状态显示 |

#### 功能模块 7: 视图切换

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-059 | 切换到 JSONForm 视图 | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |
| TC-JSON-060 | 切换回 RichEditor 视图 | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |
| TC-JSON-061 | 切换视图时内容不丢失 | P0 | ✅ | 单元 | 已在 view.test.tsx 中实现，包含多次切换测试 |
| TC-JSON-062 | ViewToggleButton 显示/隐藏 | P3 | ❌ | 单元 | 待实现：opacity变化验证 |
| TC-JSON-063 | RichEditor 正确接收 props | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |
| TC-JSON-064 | JSONForm 正确接收 props | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |
| TC-JSON-065 | 锁定状态下两种视图都只读 | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |

#### 功能模块 8: 循环标记

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-066 | 标记节点为循环 | P2 | ❌ | 单元 | 待实现：looped状态设置 |
| TC-JSON-067 | 取消节点循环标记 | P2 | ❌ | 单元 | 待实现：looped状态清除 |
| TC-JSON-068 | 循环标记持久化 | P2 | ❌ | 集成 | 待实现：状态持久化验证 |

#### 功能模块 9: UI 状态与交互

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-069 | 加载中显示橙色边框 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-070 | 等待流程显示绿色边框 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-071 | 激活时显示紫色边框 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-072 | 悬停时显示紫色边框 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-073 | 连接中触摸显示橙色 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-074 | 默认状态深灰色边框 | P3 | ❌ | 单元 | 待实现：边框颜色验证 |
| TC-JSON-075 | 鼠标移入激活节点 | P3 | ❌ | 单元 | 待实现：激活行为验证 |
| TC-JSON-076 | 鼠标移出取消悬停 | P3 | ❌ | 单元 | 待实现：悬停状态清除 |
| TC-JSON-077 | 悬停时显示调整大小手柄 | P3 | ❌ | 单元 | 待实现：opacity变化验证 |
| TC-JSON-078 | 拖拽移动节点 | P1 | ⏸️ | 集成/E2E | 待实现：需真实拖拽环境 |
| TC-JSON-079 | 编辑区域禁止拖拽 | P2 | ❌ | 集成 | 待实现：拖拽阻止验证 |
| TC-JSON-080 | 编辑标签时禁止拖拽 | P2 | ❌ | 集成 | 待实现：preventParentDrag验证 |
| TC-JSON-081 | 拖拽右下角调整大小 | P2 | ❌ | 集成 | 待实现：resize验证 |
| TC-JSON-082 | 小于最小尺寸限制 | P3 | ❌ | 单元 | 待实现：最小尺寸边界 |
| TC-JSON-083 | 悬停时显示调整手柄 | P3 | ❌ | 单元 | 待实现：手柄显示验证 |
| TC-JSON-084 | 未悬停时隐藏手柄 | P3 | ❌ | 单元 | 待实现：手柄隐藏验证 |
| TC-JSON-085 | 生成新节点时十字光标 | P3 | ❌ | 单元 | 待实现：光标样式验证 |
| TC-JSON-086 | 正常状态默认光标 | P3 | ❌ | 单元 | 待实现：光标样式验证 |
| TC-JSON-087 | JSON 编辑器内滚动不传播 | P1 | ✅ | 单元/集成 | 已在 view.test.tsx 中实现基础验证，需集成测试验证stopPropagation |

#### 功能模块 10: 锁定状态

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-089 | 锁定节点显示 LOCKED 标签 | P2 | ❌ | 单元 | 待实现：锁定标签显示 |
| TC-JSON-090 | 锁定状态下不可编辑 JSON | P1 | ✅ | 单元 | 已在 view.test.tsx 中实现 |
| TC-JSON-091 | 锁定状态下可以查看 | P2 | ❌ | 单元 | 待实现：只读查看验证 |
| TC-JSON-092 | 解除锁定后可编辑 | P2 | ❌ | 单元 | 待实现：锁定解除验证 |

#### 功能模块 11: 性能优化

| 编号 | 描述 | 优先级 | 是否已测试 | 测试类型 | 备注 |
|------|------|--------|-----------|---------|------|
| TC-JSON-093 | React.memo 防止无关重渲染 | P2 | ❌ | 单元 | 待实现：重渲染验证 |
| TC-JSON-094 | useMemo 缓存计算结果 | P3 | ❌ | 单元 | 待实现：缓存效果验证 |
| TC-JSON-095 | useCallback 缓存函数引用 | P3 | ❌ | 单元 | 待实现：引用稳定性验证 |
| TC-JSON-096 | 合并 state 减少更新 | P3 | ❌ | 单元 | 待实现：渲染次数统计 |
| TC-JSON-097 | 使用 ref 避免不必要重渲染 | P3 | ❌ | 单元 | 待实现：ref使用验证 |
| TC-JSON-098 | hasMountedRef 标记初始渲染 | P3 | ❌ | 单元 | 待实现：初始化标记验证 |

---

### 🎯 测试优先级建议

#### 第一阶段：完善 P0/P1 单元测试（1周内）

**需要补充的测试**：
1. ✅ ~~TC-JSON-008/008-EXT/009/010/011（防抖保存）~~ → 转为集成测试
2. ⏸️ TC-JSON-078（拖拽移动节点）→ 需集成测试环境

#### 第二阶段：编写集成测试（2周内）

**集成测试重点**：
1. 防抖保存机制（TC-JSON-008, 008-EXT, 009, 010, 011）
2. 节点连接完整流程（TC-JSON-026, 029 完整版）
3. 节点角色自动识别（TC-JSON-031, 033）
4. 标签编辑流程（TC-JSON-040, 041, 042, 043）
5. 拖拽和布局功能（TC-JSON-078, 079, 080, 081）

#### 第三阶段：E2E 测试（后续迭代）

**Playwright E2E 场景**：
1. 完整的用户工作流（创建节点→编辑→保存→连接）
2. 视图切换完整流程
3. 索引管理完整流程（添加→等待处理→删除）
4. 存储策略切换的完整验证
5. 多节点协作场景

---

## 📚 版本历史

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| v1.2 | 2025-10-24 | 📊 新增测试用例覆盖情况总览表格（97个用例详细覆盖状态）<br>✅ 已完成32个P0/P1单元测试（覆盖率33%）<br>⏭️ 标记5个需集成测试的跳过用例<br>📈 新增按优先级的覆盖率统计<br>🎯 提供三阶段测试实施建议 |
| v1.1 | 2025-10-23 | ❌ 移除移动端相关测试用例（TC-JSON-088）<br>📝 明确编辑器测试策略：分层测试，编辑器组件独立测试<br>🔄 调整编辑器集成测试用例（TC-JSON-063/064）<br>📊 更新用例统计：97个用例（P1从27→28） |
| v1.0 | 2025-10-23 | 初始版本，98个测试用例<br>参考 TextBlockNode v1.2 结构<br>新增索引管理、视图切换、循环标记功能 |

---

*当前版本: v1.2*  
*最后更新: 2025-10-24*  
*维护者: 测试团队*

