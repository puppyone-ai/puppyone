import React, { useState } from 'react'

type NodeViewToggleButtonProps = {
  useRichEditor: boolean,
  onToggle: () => void,
}

function NodeViewToggleButton({ useRichEditor, onToggle }: NodeViewToggleButtonProps) {
  const [isHovered, setIsHovered] = useState(false)

  const onMouseEnter = () => {
    setIsHovered(true)
  }

  const onMouseLeave = () => {
    setIsHovered(false)
  }

  // 设置悬浮效果对应的颜色
  const fillColor = isHovered ? "#BEBEBE" : "#6D7177"
  
  return (
    <button
      onClick={onToggle}
      className={`flex items-center justify-center ${isHovered ? "bg-[#3E3E41]" : ""} w-[24px] h-[24px] rounded-[8px]`}
      onMouseEnter={onMouseEnter}
      onMouseLeave={onMouseLeave}
      title={useRichEditor ? "Switch to JSON Editor" : "Switch to Rich Editor"}
    >
      {useRichEditor ? (
        // Rich Editor icon (使用提供的表格 SVG) - 当前是 Rich 模式时显示
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <mask id="path-1-inside-1_8140_41" fill="white">
            <path d="M1 3H15V13H1V3Z"/>
          </mask>
          <path d="M1 3V1.5H-0.5V3H1ZM15 3H16.5V1.5H15V3ZM15 13V14.5H16.5V13H15ZM1 13H-0.5V14.5H1V13ZM1 3V4.5H15V3V1.5H1V3ZM15 3H13.5V13H15H16.5V3H15ZM15 13V11.5H1V13V14.5H15V13ZM1 13H2.5V3H1H-0.5V13H1Z" 
                fill={fillColor} mask="url(#path-1-inside-1_8140_41)"/>
          <path d="M5 4L5.00001 13" stroke={fillColor} strokeWidth="1.5"/>
          <path d="M15 7L2 7" stroke={fillColor} strokeWidth="1.5"/>
        </svg>
      ) : (
        // JSON Editor icon (花括号) - 当前是 JSON 模式时显示
        <svg width="14" height="11" viewBox="0 0 14 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0.305664 5.76562V5.08203C0.748372 5.08203 1.05697 4.99219 1.23145 4.8125C1.40853 4.63021 1.49707 4.33464 1.49707 3.92578V2.92969C1.49707 2.48958 1.55176 2.12891 1.66113 1.84766C1.77311 1.56641 1.93587 1.34766 2.14941 1.19141C2.36296 1.03516 2.62337 0.927083 2.93066 0.867187C3.23796 0.804687 3.58691 0.773438 3.97754 0.773438V1.85937C3.67025 1.85937 3.43457 1.90234 3.27051 1.98828C3.10645 2.07161 2.99316 2.20052 2.93066 2.375C2.87077 2.54948 2.84082 2.77214 2.84082 3.04297V4.32422C2.84082 4.52474 2.80697 4.71224 2.73926 4.88672C2.67155 5.0612 2.54785 5.21484 2.36816 5.34766C2.18848 5.47786 1.93197 5.58073 1.59863 5.65625C1.2679 5.72917 0.836914 5.76562 0.305664 5.76562ZM3.97754 10.6992C3.58691 10.6992 3.23796 10.668 2.93066 10.6055C2.62337 10.5456 2.36296 10.4375 2.14941 10.2813C1.93587 10.125 1.77311 9.90625 1.66113 9.625C1.55176 9.34375 1.49707 8.98307 1.49707 8.54297V7.55078C1.49707 7.14193 1.40853 6.84766 1.23145 6.66797C1.05697 6.48568 0.748372 6.39453 0.305664 6.39453V5.71094C0.836914 5.71094 1.2679 5.7487 1.59863 5.82422C1.93197 5.89714 2.18848 6 2.36816 6.13281C2.54785 6.26302 2.67155 6.41536 2.73926 6.58984C2.80697 6.76432 2.84082 6.95052 2.84082 7.14844V8.42969C2.84082 8.70052 2.87077 8.92318 2.93066 9.09766C2.99316 9.27214 3.10645 9.40234 3.27051 9.48828C3.43457 9.57422 3.67025 9.61719 3.97754 9.61719V10.6992ZM0.305664 6.39453V5.08203H1.54395V6.39453H0.305664ZM13.6934 5.71094V6.39453C13.2507 6.39453 12.9408 6.48568 12.7637 6.66797C12.5892 6.84766 12.502 7.14193 12.502 7.55078V8.54297C12.502 8.98307 12.446 9.34375 12.334 9.625C12.2246 9.90625 12.0632 10.125 11.8496 10.2813C11.6361 10.4375 11.3757 10.5456 11.0684 10.6055C10.7611 10.668 10.4121 10.6992 10.0215 10.6992V9.61719C10.3288 9.61719 10.5645 9.57422 10.7285 9.48828C10.8926 9.40234 11.0046 9.27214 11.1645 9.09766C11.127 8.92318 11.1582 8.70052 11.1582 8.42969V7.14844C11.1582 6.95052 11.1921 6.76432 11.2598 6.58984C11.3275 6.41536 11.4512 6.26302 11.6309 6.13281C11.8105 6 12.0658 5.89714 12.3965 5.82422C12.7298 5.7487 13.1621 5.71094 13.6934 5.71094ZM10.0215 0.773438C10.4121 0.773438 10.7611 0.804687 11.0684 0.867187C11.3757 0.927083 11.6361 1.03516 11.8496 1.19141C12.0632 1.34766 12.2246 1.56641 12.334 1.84766C12.446 2.12891 12.502 2.48958 12.502 2.92969V3.92578C12.502 4.33464 12.5892 4.63021 12.7637 4.8125C12.9408 4.99219 13.2507 5.08203 13.6934 5.08203V5.76562C13.1621 5.76562 12.7298 5.72917 12.3965 5.65625C12.0658 5.58073 11.8105 5.47786 11.6309 5.34766C11.4512 5.21484 11.3275 5.0612 11.2598 4.88672C11.1921 4.71224 11.1582 4.52474 11.1582 4.32422V3.04297C11.1582 2.77214 11.127 2.54948 11.0645 2.375C11.0046 2.20052 10.8926 2.07161 10.7285 1.98828C10.5645 1.90234 10.3288 1.85937 10.0215 1.85937V0.773438ZM13.6934 5.08203V6.39453H12.4551V5.08203H13.6934Z" 
                fill={fillColor} />
        </svg>
      )}
    </button>
  )
}

export default NodeViewToggleButton 