## Upbar 组件交互说明（仅交互 + 配图）

本说明聚焦 Upbar 的可见行为、可点元素、展开/关闭、状态反馈与异常提示；不涉及技术实现。

### Upbar 总览
- Upbar 位于画布上方居中，包含：`+ Add Block`、画布控制、`Save`、`更多`、`Group List`。
- 用户可在任何时刻点击其中任意功能；当出现禁用态会有清晰的视觉暗示。

### 添加节点（AddNodeButton）
1) 点击 `+` 展开节点菜单（再次点击或点击空白处收起）：

```text
┌───────────────────────────────────────────── Upbar ─────────────────────────────────────────────┐
│  [+ Add Block ]   [ Zoom | Fit ]   [ Save ]   [ … ]   [ Group List ]                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────┘
                                 │
                                 ▼
┌──────────────────────────── Add Node Menu ────────────────────────────┐
│  Text Elements                                                        │
│   ┌────────────┐   ┌───────────────────┐                              │
│   │   Text     │   │  Structured Text  │                              │
│   └────────────┘   └───────────────────┘                              │
│                                                                       │
│  External Resources                                                   │
│   ┌────────────┐                                                      │
│   │    File    │                                                      │
│   └────────────┘                                                      │
│                                                                       │
│  Layout Elements                                                      │
│   ┌────────────┐                                                      │
│   │   Group    │                                                      │
│   └────────────┘                                                      │
└───────────────────────────────────────────────────────────────────────┘
```

包含分组与项：
- Text Elements：Text、Structured Text
- External Resources：File
- Layout Elements：Group

2) 选择某一项后进入“拖拽放置”模式：
- 光标旁出现类型预览（如 Text 的 “Aa”）。
- 在画布任意处点击，即在该处落点创建节点。
- 右键可取消创建并退出该模式。

```text
画布区域：

              ⊕  （光标）
             ┌──────────────┐
             │  预览：Text  │  ← 跟随光标移动
             └──────────────┘

交互说明：在目标处单击 → 在该处创建节点；右键 → 取消创建并退出模式。
```

交互约束：当正在创建节点时，Upbar 其他按钮呈禁用态，避免误触。

### 画布控制（Controls）
- 提供缩放与适配视图按钮，位于中部；点击后立即生效。

### 保存（SaveButton）
- 点击保存当前画布内容，按钮文本会给出状态反馈：

```text
Save 按钮状态：

┌────────┐   ┌──────────┐   ┌────────┐
│  Save  │   │  Saved   │   │ Error  │
└────────┘   └──────────┘   └────────┘

成功/失败状态会在短时间后自动回到「Save」。
```

- 成功或失败状态会在短时间后自动恢复为 `Save`。

### 更多（MoreOptions）
- 点击显示更多菜单；当前为占位，无菜单项；点击空白处关闭。



### Group List（群组列表）
- 入口：点击 Upbar 右侧的 `Group List` 按钮打开；再次点击或点击空白处关闭。

```text
┌───────────────────────────── Group List 面板 ─────────────────────────────┐
│ Workspace: 当前工作区名称                                                 │
│ ───────────────────────────────────────────────────────────────────────── │
│ Group A                                    [ Run ]   [ Deploy ]           │
│ Group B                                    [ Run ]   [ Deploy ]           │
│ Group C                                    [ Run ]   [ Deploy ]           │
│ ...（支持滚动展示更多）                                                    │
└───────────────────────────────────────────────────────────────────────────┘
```

交互规则：
- 点击群组名称：在画布中定位并高亮该 Group 的范围（便于快速跳转）。
- 点击 `Run`：仅运行该 Group 所包含的节点流程。运行期间按钮进入禁用/加载态。
- 点击 `Deploy`：进入该 Group 的部署流程（不跳出当前页面，仅打开部署面板/弹层）。
- 当无可用 Group 时，面板展示“暂无 Group”占位提示。

交互补充：
- 展开的菜单点击空白处自动关闭；再次点击入口也可关闭。

### 典型路径示例
1. 点击 `+` → 选 `Text` → 在画布点击落点创建节点。
2. 编辑后点击 `Save`，状态短暂显示 `Saved`。

### 边界与异常反馈
- 正在创建节点时：Upbar 其他按钮禁用，右键取消后恢复。
- 保存异常：显示 `Error`，稍后自动恢复。
